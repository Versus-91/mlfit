{"version":3,"file":"js/app.282d9189.js","mappings":"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","sources":["webpack://mlfit/./node_modules/danfojs/lib/ sync","webpack://mlfit/./src/App.vue","webpack://mlfit/./src/components/sidebar-component.vue","webpack://mlfit/./src/components/upload-component.vue","webpack://mlfit/./src/helpers/parser/parser.js","webpack://mlfit/./src/helpers/parser/csv_parser.js","webpack://mlfit/./src/helpers/parser/txt_parser.js","webpack://mlfit/./src/helpers/parser/parser_factory.js","webpack://mlfit/./src/stores/settings.js","webpack://mlfit/src/components/upload-component.vue","webpack://mlfit/./src/components/upload-component.vue?4aa8","webpack://mlfit/./src/components/upload-component.vue?14a8","webpack://mlfit/./src/helpers/settings.js","webpack://mlfit/./src/helpers/py-worker.js","webpack://mlfit/./src/helpers/dimensionality-reduction/pca.js","webpack://mlfit/./src/helpers/utils.js","webpack://mlfit/./src/helpers/dimensionality-reduction/tsne.js","webpack://mlfit/./src/helpers/charts.js","webpack://mlfit/./src/helpers/ui.js","webpack://mlfit/./src/helpers/model.js","webpack://mlfit/./src/helpers/classification/logistic_regression.js","webpack://mlfit/./src/helpers/regression_model.js","webpack://mlfit/./src/helpers/regression/linear_regression.js","webpack://mlfit/./src/helpers/regression/bspline_regression.js","webpack://mlfit/./src/helpers/classification/svm.js","webpack://mlfit/./src/helpers/regression/svm.js","webpack://mlfit/./src/helpers/classification/knn.js","webpack://mlfit/./src/helpers/regression/knn_regressor.js","webpack://mlfit/./src/helpers/classification/random_forest.js","webpack://mlfit/./src/helpers/regression/random_forest.js","webpack://mlfit/./src/helpers/classification/NaiveBayes.js","webpack://mlfit/./src/helpers/classification/lda.js","webpack://mlfit/./src/helpers/regression/polynomial_regression.js","webpack://mlfit/./src/helpers/regression/kernel_regression.js","webpack://mlfit/./src/helpers/classification/boosting.js","webpack://mlfit/./src/helpers/regression/boosting.js","webpack://mlfit/./src/helpers/model_factory.js","webpack://mlfit/src/components/sidebar-component.vue","webpack://mlfit/./src/components/sidebar-component.vue?5c0f","webpack://mlfit/./src/components/sidebar-component.vue?e4f8","webpack://mlfit/./src/components/main-component.vue","webpack://mlfit/./src/components/tabs/dmensionality-reduction-componenet.vue","webpack://mlfit/src/components/tabs/dmensionality-reduction-componenet.vue","webpack://mlfit/./src/components/tabs/dmensionality-reduction-componenet.vue?9063","webpack://mlfit/./src/components/tabs/dmensionality-reduction-componenet.vue?359e","webpack://mlfit/./src/components/tabs/results-component.vue","webpack://mlfit/./src/components/tabs/classification-view-component.vue","webpack://mlfit/src/components/tabs/classification-view-component.vue","webpack://mlfit/./src/components/tabs/classification-view-component.vue?e406","webpack://mlfit/./src/components/tabs/classification-view-component.vue?de8c","webpack://mlfit/./src/components/tabs/regression-view-component.vue","webpack://mlfit/src/components/tabs/regression-view-component.vue","webpack://mlfit/./src/components/tabs/regression-view-component.vue?6ab4","webpack://mlfit/./src/components/tabs/regression-view-component.vue?8435","webpack://mlfit/src/components/tabs/results-component.vue","webpack://mlfit/./src/components/tabs/results-component.vue?b709","webpack://mlfit/./src/components/tabs/results-component.vue?73e9","webpack://mlfit/./src/components/visualization/scatterplot-matrix-component.vue","webpack://mlfit/./src/components/visualization/parallel-coordinate-plot-component.vue","webpack://mlfit/src/components/visualization/parallel-coordinate-plot-component.vue","webpack://mlfit/./src/components/visualization/parallel-coordinate-plot-component.vue?23a4","webpack://mlfit/./src/components/visualization/parallel-coordinate-plot-component.vue?081d","webpack://mlfit/src/components/visualization/scatterplot-matrix-component.vue","webpack://mlfit/./src/components/visualization/scatterplot-matrix-component.vue?4516","webpack://mlfit/./src/components/visualization/scatterplot-matrix-component.vue?dd01","webpack://mlfit/./src/components/tabs/methods-tab-component.vue","webpack://mlfit/src/components/tabs/methods-tab-component.vue","webpack://mlfit/./src/components/tabs/methods-tab-component.vue?7317","webpack://mlfit/./src/components/tabs/methods-tab-component.vue?411b","webpack://mlfit/./src/helpers/sns-worker.js","webpack://mlfit/./src/helpers/correlation/correlation-matrix.js","webpack://mlfit/src/components/main-component.vue","webpack://mlfit/./src/components/main-component.vue?f8f6","webpack://mlfit/./src/components/main-component.vue?26f6","webpack://mlfit/src/App.vue","webpack://mlfit/./src/App.vue?c036","webpack://mlfit/./src/App.vue?0e40","webpack://mlfit/./src/main.js","webpack://mlfit/webpack/bootstrap","webpack://mlfit/webpack/runtime/amd define","webpack://mlfit/webpack/runtime/amd options","webpack://mlfit/webpack/runtime/chunk loaded","webpack://mlfit/webpack/runtime/compat get default export","webpack://mlfit/webpack/runtime/define property getters","webpack://mlfit/webpack/runtime/get javascript chunk filename","webpack://mlfit/webpack/runtime/global","webpack://mlfit/webpack/runtime/hasOwnProperty shorthand","webpack://mlfit/webpack/runtime/make namespace object","webpack://mlfit/webpack/runtime/node module decorator","webpack://mlfit/webpack/runtime/publicPath","webpack://mlfit/webpack/runtime/jsonp chunk loading","webpack://mlfit/webpack/startup"],"sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 6553;\nmodule.exports = webpackEmptyContext;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('b-notification',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.settings.getDatasizeFlag),expression:\"this.settings.getDatasizeFlag\"}],staticClass:\"mt-2\",attrs:{\"type\":\"is-warning\",\"has-icon\":\"\",\"aria-close-label\":\"Close notification\",\"role\":\"alert\"}},[_vm._v(\" Due to the large size of dataset only 10,000 radom samples from dataset would be used. \")]),_c('div',{staticClass:\"columns is-multiline\",attrs:{\"id\":\"app\"}},[_c('SidebarComponent',{ref:\"sidebar\",on:{\"updateFeatures\":_vm.updateFeatureStats}}),_c('MainComponent',{ref:\"main\",attrs:{\"dataframe\":this.settings.df},on:{\"check-target\":function($event){return _vm.checkTarget()}}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-2 has-background-info-light\",staticStyle:{\"height\":\"100%\"}},[_vm._m(0),_c('section',[_c('upload-component',{on:{\"uploaded\":_vm.generateTargetDropdown,\"uploaded-file\":_vm.setFile}}),_c('div',{staticClass:\"column is-12\"},[_c('b-field',{attrs:{\"label\":\"Seed\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"placeholder\":\"Seed\",\"type\":\"number\",\"min\":\"0\"},model:{value:(_vm.seed),callback:function ($$v) {_vm.seed=$$v},expression:\"seed\"}})],1),_c('b-field',{attrs:{\"label\":\"Target\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},on:{\"input\":_vm.checkmodelTask},model:{value:(_vm.modelTarget),callback:function ($$v) {_vm.modelTarget=$$v},expression:\"modelTarget\"}},_vm._l((_vm.columns),function(option){return _c('option',{key:option,domProps:{\"value\":option}},[_vm._v(\" \"+_vm._s(option)+\" \")])}),0)],1),_c('b-field',{attrs:{\"label\":\"Imputation\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},model:{value:(_vm.imputationOption),callback:function ($$v) {_vm.imputationOption=$$v},expression:\"imputationOption\"}},_vm._l((_vm.imputationOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)],1),_c('b-field',{attrs:{\"label\":\"Cross Validation\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},model:{value:(_vm.crossValidationOption),callback:function ($$v) {_vm.crossValidationOption=$$v},expression:\"crossValidationOption\"}},_vm._l((_vm.crossValidationOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)],1),_c('b-field',{attrs:{\"label\":\"Model\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"disabled\":_vm.tuneModel,\"expanded\":true,\"size\":\"is-small\"},model:{value:(_vm.modelOption),callback:function ($$v) {_vm.modelOption=$$v},expression:\"modelOption\"}},_vm._l((_vm.modelOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.title)+\" \")])}),0),_c('b-button',{attrs:{\"size\":\"is-small\",\"icon-pack\":\"fas\",\"icon-left\":!this.tuneModel ? 'cog' : 'arrow-left'},on:{\"click\":_vm.configureModel}})],1),(_vm.tuneModel)?_c('section',{staticClass:\"mx-1\"},_vm._l((_vm.modelConfigurations),function(option,i){return _c('b-field',{key:i,attrs:{\"label\":option.label,\"label-position\":'on-border'}},[(option.type === 'select')?_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},model:{value:(option.value),callback:function ($$v) {_vm.$set(option, \"value\", $$v)},expression:\"option.value\"}},_vm._l((option.values),function(item,index){return _c('option',{key:index,domProps:{\"value\":item.value}},[_vm._v(\" \"+_vm._s(item.label)+\" \")])}),0):(option.type === 'number')?_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\"},model:{value:(option.value),callback:function ($$v) {_vm.$set(option, \"value\", $$v)},expression:\"option.value\"}}):(option.type === 'text')?_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"text\"},model:{value:(option.value),callback:function ($$v) {_vm.$set(option, \"value\", $$v)},expression:\"option.value\"}}):_vm._e()],1)}),1):_vm._e(),_c('b-field',[_c('b-checkbox',{attrs:{\"size\":\"is-small\"},model:{value:(_vm.dataScalingBehavior),callback:function ($$v) {_vm.dataScalingBehavior=$$v},expression:\"dataScalingBehavior\"}},[_vm._v(\"Standardize by default\")])],1),_c('b-field',[_c('b-checkbox',{attrs:{\"size\":\"is-small\"},model:{value:(_vm.explainModel),callback:function ($$v) {_vm.explainModel=$$v},expression:\"explainModel\"}},[_vm._v(\"Explain the model\")])],1),_c('b-field',[_c('b-checkbox',{attrs:{\"size\":\"is-small\"},model:{value:(_vm.usePCAs),callback:function ($$v) {_vm.usePCAs=$$v},expression:\"usePCAs\"}},[_vm._v(\"Use PC components\")])],1),(_vm.usePCAs)?_c('b-field',{attrs:{\"label\":\"Number of Components\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\"},model:{value:(_vm.numberOfComponents),callback:function ($$v) {_vm.numberOfComponents=$$v},expression:\"numberOfComponents\"}})],1):_vm._e(),_c('b-field',[_c('b-checkbox',{attrs:{\"size\":\"is-small\"},model:{value:(_vm.useHPC),callback:function ($$v) {_vm.useHPC=$$v},expression:\"useHPC\"}},[_vm._v(\"Use HPC resources\")])],1),_c('b-field',[_c('b-button',{attrs:{\"size\":\"is-small\",\"icon-pack\":\"fas\",\"icon-left\":\"play\",\"loading\":_vm.training,\"disabled\":!_vm.dataframe || _vm.modelOption == null},on:{\"click\":_vm.train}},[_vm._v(\" train\")]),_c('button',{staticClass:\"button is-small\",attrs:{\"disabled\":!_vm.useHPC},on:{\"click\":function($event){return _vm.upload()}}},[_vm._v(\"Upload to HPC\")])],1),_c('b-loading',{attrs:{\"is-full-page\":false},model:{value:(_vm.training),callback:function ($$v) {_vm.training=$$v},expression:\"training\"}})],1)],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('figure',{staticClass:\"image is-96x96\"},[_c('img',{attrs:{\"src\":\"/logo.png\"}})])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-12 has-background-light\"},[_c('b-field',{staticClass:\"file is-success is-fullwidth\",class:{ 'has-name': !!_vm.file }},[_c('b-upload',{staticClass:\"file-label\",attrs:{\"accept\":\".csv,.txt,.xlsx\"},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}},[_c('a',{staticClass:\"button is-success is-small is-fullwidth\"},[_c('b-icon',{staticClass:\"file-icon\",attrs:{\"pack\":\"fas\",\"icon\":\"upload\"}}),_c('span',{staticClass:\"file-label\"},[_vm._v(_vm._s(this.settings.datasetName || \"Upload\"))])],1)])],1),_c('b-field',[_c('b-checkbox',{attrs:{\"size\":\"is-small\"},model:{value:(_vm.header),callback:function ($$v) {_vm.header=$$v},expression:\"header\"}},[_vm._v(\"Header\")])],1),_c('b-field',{attrs:{\"label\":\"Separator\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},model:{value:(_vm.separator),callback:function ($$v) {_vm.separator=$$v},expression:\"separator\"}},_vm._l((_vm.separatorOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)],1),_c('b-field',{attrs:{\"label\":\"Decimal\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\",\"label-position\":'on-border'},model:{value:(_vm.decimal),callback:function ($$v) {_vm.decimal=$$v},expression:\"decimal\"}},_vm._l((_vm.decimalOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)],1),_c('b-field',[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},on:{\"input\":_vm.handleFileSelect},model:{value:(_vm.sampleDataset),callback:function ($$v) {_vm.sampleDataset=$$v},expression:\"sampleDataset\"}},_vm._l((_vm.samplDataOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.name}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable no-unused-vars */\r\nexport class DataParser {\r\n    parse(_content) {\r\n        throw new Error(\"Not implemented.\")\r\n    }\r\n}","import { DataParser } from './parser';\r\nimport Papa from 'papaparse';\r\n\r\nexport class CSVParser extends DataParser {\r\n    constructor(options) {\r\n        super();\r\n        this.separators = { 0: ',', 1: '.', 2: ',', 3: ' ' }\r\n        this.separator = options.separator;\r\n        this.delimiter = options.delimiter;\r\n        this.has_header = options.header\r\n    }\r\n    parse(content) {\r\n        return new Promise((resolve) => {\r\n            Papa.parse(content, {\r\n                worker: false,\r\n                header: this.has_header,\r\n                delimiter: this.separators[this.separator],\r\n                transform: (val) => {\r\n                    if (val === \"?\" || val === \"NA\") {\r\n                        return NaN\r\n                    }\r\n                    return val\r\n                },\r\n                // transformHeader: (val) => {\r\n                //     return val.replace(/[^a-zA-Z0-9 ]/g, \"\").trim()\r\n                // },\r\n                skipEmptyLines: true,\r\n                dynamicTyping: true,\r\n                complete: async function (result) {\r\n                    resolve(result.data)\r\n                }\r\n            })\r\n        }\r\n        )\r\n    }\r\n}","import { DataParser } from './parser';\r\nimport Papa from 'papaparse';\r\n\r\nexport class TXTParser extends DataParser {\r\n    constructor(options) {\r\n        super();\r\n        this.separators = { 0: ',', 1: '.', 2: ',', 3: ' ' }\r\n        this.separator = options.separator;\r\n        this.delimiter = options.delimiter;\r\n        this.has_header = options.header\r\n    }\r\n    parse(content) {\r\n        return new Promise((resolve) => {\r\n            Papa.parse(content, {\r\n                worker: false,\r\n                header: this.has_header,\r\n                delimiter: this.separators[this.separator],\r\n                transform: (val) => {\r\n                    if (val === \"?\" || val === \"NA\") {\r\n                        return NaN\r\n                    }\r\n                    return val\r\n                },\r\n                // transformHeader: (val) => {\r\n                //     return val.replace(/[^a-zA-Z0-9 ]/g, \"\").trim()\r\n                // },\r\n                skipEmptyLines: true,\r\n                dynamicTyping: true,\r\n                complete: async function (result) {\r\n                    if (this.delimiter == 1) {\r\n                        for (let i = 0; i < result.data.length; i++) {\r\n                            const element = result.data[i];\r\n                            for (let j = 0; j < element.length; j++) {\r\n                                result.data[i][j] = parseFloat(result.data[i][j].replace(/\\./g, '').replace(',', '.'));\r\n                            }\r\n                        }\r\n                    }\r\n                    resolve(result.data)\r\n                }\r\n            })\r\n        }\r\n        )\r\n    }\r\n}","import { CSVParser } from './csv_parser'\r\nimport { TXTParser } from './txt_parser'\r\n\r\n\r\nexport class ParserFactory {\r\n    static createParser(fileType, options) {\r\n        switch (fileType.toLowerCase()) {\r\n            case 'csv':\r\n                return new CSVParser(options);\r\n            case 'txt': {\r\n                let parser = new TXTParser(options)\r\n                return parser\r\n            }\r\n            // case 'xlsx':\r\n            //     return new XLXParser();\r\n            default:\r\n                throw new Error(`Unsupported file type: ${fileType}`);\r\n        }\r\n    }\r\n}\r\n","import { defineStore } from 'pinia'\r\n\r\nexport const settingStore = defineStore({\r\n    id: 'cart',\r\n    state: () => ({\r\n        counter: 1,\r\n        df: {},\r\n        id: null,\r\n        rawData: {},\r\n        features: [],\r\n        transformations: [],\r\n        classTransformations: [],\r\n        results: [],\r\n        messages: [],\r\n        datasetName: '',\r\n        activeTab: 0,\r\n        dataSizeFlag: false,\r\n        resultActiveTab: '',\r\n        datasetShape: {\r\n            count: 0,\r\n            columns: 0\r\n        },\r\n        target: null,\r\n        isClassification: true,\r\n        seed: 123,\r\n    }),\r\n    getters: {\r\n        items: (state) => {\r\n            return state.features\r\n        },\r\n        getDatasizeFlag: (state) => {\r\n            return state.dataSizeFlag\r\n        },\r\n        getCounter: (state) => {\r\n            return state.counter\r\n        },\r\n        getUID: () => {\r\n            let id = Math.random().toString(16).slice(2);\r\n            return id;\r\n        },\r\n        getMessages: (state) => {\r\n            return state.messages.reverse()\r\n        },\r\n        getDatasetName: (state) => {\r\n            return state.datasetName\r\n        },\r\n        getDatasetShape: (state) => {\r\n            return state.datasetShape\r\n        },\r\n        getDataset: (state) => {\r\n            return state.df;\r\n        },\r\n        getRawData: (state) => {\r\n            return state.rawData;\r\n        },\r\n        currentTab: (state) => {\r\n            return state.activeTab\r\n        },\r\n        mergedClasses: (state) => {\r\n            return state.classTransformations\r\n        },\r\n        getSeed: (state) => {\r\n            return state.seed\r\n        },\r\n        getMethodResults: (state) => {\r\n            return state.results\r\n        },\r\n        getResultTab: (state) => {\r\n            return state.resultActiveTab\r\n        },\r\n        outputs: (state) => state.results,\r\n        transformationsList: (state) => state.transformations,\r\n        modelTarget: (state) => state.target,\r\n        classificationTask: (state) => state.isClassification,\r\n    },\r\n    actions: {\r\n        setSeed(seed) {\r\n            this.seed = seed\r\n        },\r\n        setDatasetName(name) {\r\n            this.datasetName = name;\r\n        },\r\n        setDatasetShape(shape) {\r\n            this.datasetShape = shape;\r\n        },\r\n        resetFeatures() {\r\n            this.features = []\r\n            this.transformations = []\r\n            this.classTransformations = []\r\n        },\r\n        resetClassTransformations() {\r\n            this.classTransformations = []\r\n        },\r\n        resetTransformations() {\r\n            this.transformations = []\r\n        },\r\n        setDatasizeFlag(flag) {\r\n            this.dataSizeFlag = flag;\r\n        },\r\n        resetDataset() {\r\n            this.datasetName = '';\r\n            this.datasetShape = {\r\n                count: 0,\r\n                columns: 0\r\n            };\r\n\r\n        },\r\n        increaseCounter() {\r\n            this.counter++;\r\n        },\r\n        setDataframe(data) {\r\n            this.df = data;\r\n        },\r\n        setRawData(data) {\r\n            this.rawData = data;\r\n        },\r\n        addFeature(feature) {\r\n            feature.scaler = 0;\r\n            let index = this.features.findIndex(m => m.name === feature.name);\r\n            if (index !== -1) {\r\n                this.features[index] = feature\r\n                return\r\n            }\r\n            this.features.push(feature)\r\n        },\r\n        setClassTransformation(transformations) {\r\n            this.classTransformations.push(transformations)\r\n        },\r\n\r\n        addTransformation(transformation) {\r\n            let index = this.transformations.findIndex(m => m.name === transformation.name);\r\n            if (index !== -1) {\r\n                this.transformations[index] = transformation\r\n                return\r\n            }\r\n            this.transformations.push(transformation)\r\n        },\r\n        addResult(result) {\r\n            this.results.push(result)\r\n        },\r\n        addMessage(message) {\r\n            var date = new Date();\r\n            message['date'] = date.toLocaleString()\r\n            this.messages.push(message)\r\n        },\r\n        removeResult(id) {\r\n            const i = this.results.findIndex(m => m.id === id)\r\n            if (i > -1) {\r\n                this.results.splice(i, 1);\r\n            }\r\n        },\r\n        getResultVisualizations(id) {\r\n            const i = this.results.findIndex(m => m.id === id)\r\n            if (i > -1) {\r\n                let tables = this.results[i].tables;\r\n                let plots = this.results[i].plots;\r\n                return [tables, plots]\r\n            }\r\n        },\r\n        resetDF() {\r\n            this.df = {}\r\n        },\r\n        updateFeature(feature) {\r\n            let index = this.features.findIndex(m => m.name === feature.name);\r\n            if (index !== -1) {\r\n                this.features[index] = feature\r\n            }\r\n        },\r\n        removeItem(name) {\r\n            const i = this.features.lastIndexOf(name)\r\n            if (i > -1) this.features.splice(i, 1)\r\n        },\r\n        setTarget(target) {\r\n            this.target = target\r\n        },\r\n        setmodelTask(type) {\r\n            this.isClassification = type\r\n        },\r\n        setActiveTab(index) {\r\n            this.activeTab = index\r\n        },\r\n        setResultActiveTab(index) {\r\n            this.resultActiveTab = index\r\n        }\r\n    },\r\n})\r\n\r\n","<template>\r\n    <div class=\"column is-12 has-background-light\">\r\n        <b-field class=\"file is-success is-fullwidth\" :class=\"{ 'has-name': !!file }\">\r\n            <b-upload accept=\".csv,.txt,.xlsx\" v-model=\"file\" class=\"file-label\">\r\n                <a class=\"button is-success is-small is-fullwidth\">\r\n                    <b-icon pack=\"fas\" class=\"file-icon\" icon=\"upload\"></b-icon>\r\n                    <span class=\"file-label\">{{ this.settings.datasetName || \"Upload\" }}</span>\r\n                </a>\r\n            </b-upload>\r\n        </b-field>\r\n        <b-field>\r\n            <b-checkbox size=\"is-small\" v-model=\"header\">Header</b-checkbox>\r\n        </b-field>\r\n        <b-field label=\"Separator\" :label-position=\"'on-border'\">\r\n            <b-select :expanded=\"true\" v-model=\"separator\" size=\"is-small\">\r\n                <option v-for=\"option in separatorOptions\" :value=\"option.id\" :key=\"option.id\">\r\n                    {{ option.label }}\r\n                </option>\r\n            </b-select>\r\n        </b-field>\r\n        <b-field label=\"Decimal\" :label-position=\"'on-border'\">\r\n            <b-select :expanded=\"true\" v-model=\"decimal\" size=\"is-small\" :label-position=\"'on-border'\">\r\n                <option v-for=\"option in decimalOptions\" :value=\"option.id\" :key=\"option.id\">\r\n                    {{ option.label }}\r\n                </option>\r\n            </b-select>\r\n        </b-field>\r\n        <b-field>\r\n            <b-select :expanded=\"true\" @input=\"handleFileSelect\" size=\"is-small\" v-model=\"sampleDataset\">\r\n                <option v-for=\"option in samplDataOptions\" :value=\"option.name\" :key=\"option.id\">\r\n                    {{ option.label }}\r\n                </option>\r\n            </b-select>\r\n        </b-field>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ParserFactory } from '../helpers/parser/parser_factory.js'\r\nimport { DataFrame } from 'danfojs';\r\nimport { settingStore } from '@/stores/settings'\r\n\r\nconst DATASET_SIZE = 10000;\r\nexport default {\r\n    setup() {\r\n        const settings = settingStore()\r\n        return { settings }\r\n    },\r\n    name: 'UploadComponent',\r\n    props: {\r\n        msg: String\r\n    },\r\n    data() {\r\n        return {\r\n            sampleDataset: 'none',\r\n            file: null,\r\n            separator: 2,\r\n            header: true,\r\n            decimal: 1,\r\n            decimalOptions:\r\n                [\r\n                    {\r\n                        id: 1,\r\n                        label: '.',\r\n                    }, {\r\n                        id: 2,\r\n                        label: ',',\r\n                    }]\r\n            ,\r\n            separatorOptions:\r\n                [\r\n                    {\r\n                        id: 1,\r\n                        label: '.',\r\n                    }, {\r\n                        id: 2,\r\n                        label: ',',\r\n                    }\r\n                    , {\r\n                        id: 3,\r\n                        label: 'space',\r\n                    }]\r\n            ,\r\n            samplDataOptions:\r\n                [\r\n                    {\r\n                        id: 0,\r\n                        name: 'none',\r\n                        label: 'Select toy dataset',\r\n\r\n                    },\r\n                    {\r\n                        id: 1,\r\n                        name: 'iris',\r\n                        label: 'iris',\r\n                    }, {\r\n                        id: 2,\r\n                        name: 'wine',\r\n                        label: 'wine',\r\n\r\n                    }\r\n                    , {\r\n                        id: 3,\r\n                        name: 'diabetes',\r\n                        label: 'diabetes',\r\n                    }, {\r\n                        id: 4,\r\n                        name: 'housing',\r\n                        label: 'California Housing',\r\n                    }, {\r\n                        id: 5,\r\n                        name: 'Titanic',\r\n                        label: 'Titanic',\r\n\r\n                    },]\r\n            ,\r\n        }\r\n    },\r\n    watch: {\r\n        file: async function (val) {\r\n            try {\r\n                let dataset = await this.process_file(val, val.name.split('.')[1])\r\n                this.initDataframe(dataset, val.name.split('.')[0])\r\n            } catch (error) {\r\n                this.$buefy.toast.open('Failed to parse the dataset.')\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        shuffle(array, seed) {\r\n            var m = array.length, t, i;\r\n            // While there remain elements to shuffle\r\n            while (m) {\r\n\r\n                // Pick a remaining element\r\n                i = Math.floor(this.random(seed) * m--);\r\n\r\n                // And swap it with the current element.\r\n                t = array[m];\r\n                array[m] = array[i];\r\n                array[i] = t;\r\n                ++seed\r\n            }\r\n        },\r\n        random(seed) {\r\n            var x = Math.sin(seed++) * 10000;\r\n            return x - Math.floor(x);\r\n        },\r\n        async initDataframe(dataset, name) {\r\n            this.settings.resetFeatures();\r\n            this.settings.setDatasetName(name);\r\n            this.settings.setDatasetShape({ count: dataset.$data.length, columns: dataset.columns.length });\r\n            let df = await dataset.sample(dataset.$data.length, { seed: this.settings.getSeed });\r\n            this.settings.setDataframe(df)\r\n            this.$emit('uploaded', true)\r\n        },\r\n        async process_file(file, type) {\r\n            let options = {\r\n                separator: this.separator,\r\n                delimiter: this.decimal,\r\n                header: this.header\r\n            }\r\n            let processdDataset = await ParserFactory.createParser(type, options).parse(file)\r\n            if (processdDataset.length > DATASET_SIZE) {\r\n                this.settings.setDatasizeFlag(true);\r\n                this.shuffle(processdDataset, this.settings.getSeed)\r\n                processdDataset = processdDataset.slice(0, DATASET_SIZE)\r\n            } else {\r\n                this.settings.setDatasizeFlag(false);\r\n            }\r\n            let dataFrame = new DataFrame(processdDataset);\r\n            let idIndex = dataFrame.columns.findIndex(col => col.toLowerCase() === 'id')\r\n            if (idIndex > -1)\r\n                dataFrame.drop({ columns: dataFrame.columns[idIndex], inplace: true })\r\n            this.settings.setRawData(processdDataset);\r\n            this.$emit(\"uploaded-file\", file)\r\n            return dataFrame\r\n        },\r\n        async handleFileSelect(name) {\r\n            if (name == 'none') {\r\n                return\r\n            }\r\n            name += '.csv';\r\n            let current = this;\r\n            let file;\r\n            fetch(name)\r\n                .then(response => response.blob())\r\n                .then(async blob => {\r\n                    file = new File([blob], name);\r\n                    let dataframe = await this.process_file(file, 'csv');\r\n                    current.initDataframe(dataframe, name.split('.')[0])\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error fetching the file:', error);\r\n                });\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style></style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./upload-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./upload-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./upload-component.vue?vue&type=template&id=28890b75\"\nimport script from \"./upload-component.vue?vue&type=script&lang=js\"\nexport * from \"./upload-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const FeatureCategories = {\r\n    \"Numerical\": {\r\n        id: 1,\r\n        name: \"Numerical\"\r\n    }\r\n    , \"Nominal\": {\r\n        id: 2,\r\n        name: \"Nominal\"\r\n    }\r\n    , \"Ordinal\": {\r\n        id: 3,\r\n        name: \"Ordinal\"\r\n    }\r\n};\r\nexport const CV_OPTIONS = {\r\n    SPLIT: 1,\r\n    NO: 2,\r\n    KFOLD: 3\r\n}\r\nexport const REGRESSION = 1;\r\nexport const CLASSIFICATION = 2;\r\n\r\n\r\nexport const ScaleOptions = {\r\n    \"No\": {\r\n        id: 0,\r\n        name: \"No\",\r\n    },\r\n    \"Scale\": {\r\n        id: 1,\r\n        name: \"Scale\"\r\n    }\r\n    , \"x^2\": {\r\n        id: 2,\r\n        name: \"x^2\"\r\n    }\r\n    , \"ln(x)\": {\r\n        id: 3,\r\n        name: \"ln(x)\"\r\n    }, \"Standardize\": {\r\n        id: 4,\r\n        name: \"Standardize\"\r\n    }\r\n}\r\nexport const Settings = {\r\n    \"classification\": {\r\n        \"logistic_regression\": {\r\n            \"id\": 1,\r\n            \"label\": \"Logistic Regression\",\r\n            \"title\": \"Logi.Reg\",\r\n            \"value\": 1,\r\n            \"options\": {\r\n                \"regularization\": {\r\n                    \"label\": \"regulrization\",\r\n                    \"type\": \"select\",\r\n                    default: \"Lasso\",\r\n                    value: \"Lasso\",\r\n                    \"values\": [{ label: \"adaptive lasso\", value: \"Lasso\" }, { label: \"ridge\", value: \"ridge\" }]\r\n                }\r\n            }\r\n        },\r\n        \"discriminant_analysis\": {\r\n            \"id\": 2,\r\n            \"label\": \"Discriminant Analysis\",\r\n            \"title\": \"DA\",\r\n            \"value\": 2,\r\n            \"options\": {\r\n                \"type\": {\r\n                    \"label\": \"type\",\r\n                    \"type\": \"select\",\r\n                    default: \"linear\",\r\n                    \"values\": [{ label: \"linear\", value: \"linear\" }, { label: \"quadratic\", value: \"quadratic\" }]\r\n                },\r\n                \"priors\": {\r\n                    label: \"priors\",\r\n                    type: \"text\",\r\n                    placeholder: \"comma separated priors\"\r\n                },\r\n            }\r\n        },\r\n        \"k_nearest_neighbour\": {\r\n            \"id\": 3,\r\n            \"label\": \"k nearest neighbour\",\r\n            \"title\": \"KNN\",\r\n            \"value\": 3,\r\n            \"options\": {\r\n                \"min\": {\r\n                    \"label\": \"min\",\r\n                    type: \"number\",\r\n                    default: 3\r\n                },\r\n                \"max\": {\r\n                    \"label\": \"max\",\r\n                    type: \"number\",\r\n                    default: 9\r\n                },\r\n                \"metric\": {\r\n                    label: \"metrics\",\r\n                    type: \"select\",\r\n                    default: \"manhattan\",\r\n                    values: [{ label: \"euclidean\", value: \"euclidean\" }, { label: \"manhattan\", value: \"manhattan\" }]\r\n                },\r\n            },\r\n        },\r\n        \"support_vector_machine\": {\r\n            \"id\": 4,\r\n            \"label\": \"Support vector machine\",\r\n            \"title\": \"SVM\",\r\n            \"value\": 4,\r\n            \"options\": {\r\n                \"kernel\": {\r\n                    label: 'kernel',\r\n                    type: \"select\",\r\n                    default: \"rbf\",\r\n                    values: [{ label: \"RBF\", value: \"rbf\" }, { label: \"Linear\", value: \"linear\" }, { label: \"Polynomial\", value: \"poly\" }\r\n                        , { label: \"Sigmoid\", value: \"sigmoid\" }]\r\n                },\r\n\r\n                \"bias\": {\r\n                    \"label\": \"bias\",\r\n                    type: \"number\",\r\n                    for: [\"Sigmoid\", \"Sigmoid\"],\r\n                    default: 0\r\n                },\r\n                \"c\": {\r\n                    \"label\": \"Regularization parameter\",\r\n                    type: \"number\",\r\n                    default: 1\r\n                },\r\n                \"degree\": {\r\n                    label: 'degree',\r\n                    type: \"number\",\r\n                    for: [\"Polynomial\"],\r\n                    default: 3\r\n                },\r\n            },\r\n        },\r\n        \"random_forest\": {\r\n            \"id\": 5,\r\n            \"label\": \"Random forest\",\r\n            \"title\": \"RF\",\r\n            \"value\": 5,\r\n            \"options\": {\r\n                \"estimators\": {\r\n                    label: \"estimators\",\r\n                    type: \"number\",\r\n                    default: 100\r\n                },\r\n                \"features\": {\r\n                    label: \"features\",\r\n                    type: \"number\",\r\n                    default: \"sqrt\"\r\n                },\r\n                \"depth\": {\r\n                    label: \"depth\",\r\n                    type: \"number\",\r\n                    default: 5\r\n                },\r\n                \"criteria\": {\r\n                    label: \"criteria\",\r\n                    type: \"select\",\r\n                    default: \"gini\",\r\n                    \"values\": [{ label: \"gini\", value: \"gini\" }, { label: \"log loss\", value: \"log_loss\" },\r\n                    { label: \"entropy\", value: \"entropy\" }]\r\n                }\r\n            },\r\n        },\r\n        \"boosting\": {\r\n            \"id\": 6,\r\n            \"label\": \"Boosting\",\r\n            \"title\": \"Boosting\",\r\n            \"value\": 6,\r\n            \"options\": {\r\n                \"booster\": {\r\n                    type: \"select\",\r\n                    label: \"booster\",\r\n                    default: \"gbtree\",\r\n                    values: [{ label: \"gbtree\", value: \"gbtree\" }, { label: \"gblinear\", value: \"gblinear\" }, { label: \"dart\", value: \"dart\" }]\r\n                },\r\n                \"eta\": {\r\n                    label: \"learning rate\",\r\n                    type: \"number\",\r\n                    default: 0.3\r\n                },\r\n                \"estimators\": {\r\n                    label: \"estimators\",\r\n                    type: \"number\",\r\n                    default: 200\r\n                },\r\n                \"depth\": {\r\n                    label: \"depth\",\r\n                    type: \"number\",\r\n                    default: 5\r\n                },\r\n\r\n            },\r\n        },\r\n        \"naive_bayes\": {\r\n            \"label\": \"Naive Bayes\",\r\n            \"title\": \"NB\",\r\n            \"value\": 7,\r\n            \"id\": 7,\r\n            \"options\": {\r\n                \"laplace\": {\r\n                    label: \"laplace smoothing\",\r\n                    type: \"number\",\r\n                    default: 0.05\r\n                },\r\n                \"priors\": {\r\n                    label: \"priors\",\r\n                    type: \"text\",\r\n                    placeholder: \"comma separated priors\"\r\n                },\r\n                \"type\": {\r\n                    label: \"type\",\r\n                    type: \"select\",\r\n                    default: \"Gaussian\",\r\n                    values: [{ label: \"Gaussian\", value: \"Gaussian\" }, { label: \"Multinomial\", value: \"Multinomial\" }, { label: \"Bernoulli\", value: \"Bernoulli\" }]\r\n                }\r\n            }\r\n\r\n        },\r\n    },\r\n    \"regression\": {\r\n        \"linear_regression\": {\r\n            \"label\": \"Linear Regression\",\r\n            \"title\": \"Lin.Reg\",\r\n            \"value\": 9,\r\n            \"id\": 9,\r\n            \"feature_selection\": [\"no\", \"Lasso\", \"ridge\"],\r\n            \"criteria\": [\"AIC\", \"BIC\", \"AR2\",],\r\n            \"options\": {\r\n                \"regularization\": {\r\n                    label: \"regularization\",\r\n                    type: \"select\",\r\n                    default: \"Lasso\",\r\n                    values: [{ label: \"adaptive lasso\", value: \"Lasso\" }, { label: \"Ridge\", value: \"Ridge\" }]\r\n                }\r\n            }\r\n        },\r\n        \"polynomial_regression\": {\r\n            \"label\": \"Polynomial Regression\",\r\n            \"title\": \"Poly.Reg\",\r\n            \"value\": 14,\r\n            \"id\": 14,\r\n            \"feature_selection\": [\"no\", \"Lasso\", \"ridge\"],\r\n            \"criteria\": [\"AIC\", \"BIC\", \"AR2\",],\r\n            \"options\": {\r\n                \"regularization\": {\r\n                    label: \"regularization\",\r\n                    type: \"select\",\r\n                    default: \"Lasso\",\r\n                    values: [{ label: \"Lasso\", value: \"Lasso\" }, { label: \"Ridge\", value: \"Ridge\" }]\r\n                },\r\n                \"degree\": {\r\n                    label: \"Degree\",\r\n                    type: \"number\",\r\n                    default: 2,\r\n                }\r\n            }\r\n        },\r\n        \"k_nearest_neighbour\": {\r\n            \"label\": \"k nearest neighbour Regression\",\r\n            \"title\": \"KNN\",\r\n            \"value\": 10,\r\n            \"id\": 10,\r\n            \"options\": {\r\n                \"min\": {\r\n                    label: \"min\",\r\n                    type: \"number\",\r\n                    default: 3\r\n                },\r\n                \"max\": {\r\n                    label: \"max\",\r\n                    type: \"number\",\r\n                    default: 9\r\n                },\r\n            },\r\n        },\r\n        \"boosting\": {\r\n            \"label\": \"Boosting Regression\",\r\n            \"title\": \"Boosting\",\r\n            \"value\": 11,\r\n            \"id\": 11,\r\n            \"options\": {\r\n                \"booster\": {\r\n                    label: \"booster\",\r\n                    type: \"select\",\r\n                    default: \"gbtree\",\r\n                    values: [{ label: \"gbtree\", value: \"gbtree\" }, { label: \"gblinear\", value: \"gblinear\" }, { label: \"dart\", value: \"dart\" }]\r\n                },\r\n                \"eta\": {\r\n                    label: \"learning rate\",\r\n                    type: \"number\",\r\n                    default: 0.3\r\n                },\r\n                \"estimators\": {\r\n                    label: \"estimators\",\r\n                    type: \"number\",\r\n                    default: 200\r\n                },\r\n                \"depth\": {\r\n                    label: \"depth\",\r\n                    type: \"number\",\r\n                    default: 5\r\n                },\r\n\r\n            },\r\n        },\r\n        \"support_vector_machine\": {\r\n            \"label\": \"Support vector machine Regression\",\r\n            \"title\": \"SVM.Reg\",\r\n            \"value\": 12,\r\n            \"id\": 12,\r\n            \"options\": {\r\n                \"kernel\": {\r\n                    label: \"kernel\",\r\n                    type: \"select\",\r\n                    default: \"rbf\",\r\n                    values: [{ label: \"RBF\", value: \"rbf\" }, { label: \"Linear\", value: \"linear\" }, { label: \"Polynomial\", value: \"poly\" }\r\n                        , { label: \"Sigmoid\", value: \"sigmoid\" }]\r\n                },\r\n                \"gamma\": {\r\n                    label: \"gamma\",\r\n                    type: \"number\",\r\n                    for: [\"RBF\", \"Sigmoid\", \"Polynomial\"],\r\n                    default: 1\r\n                },\r\n                \"bias\": {\r\n                    label: \"bias\",\r\n                    type: \"number\",\r\n                    for: [\"Sigmoid\", \"Sigmoid\"],\r\n                    default: 0\r\n                },\r\n                \"degree\": {\r\n                    label: \"degree polynomial\",\r\n                    type: \"number\",\r\n                    for: [\"Polynomial\"],\r\n                    default: 3\r\n                },\r\n            },\r\n        },\r\n        \"random_forest\": {\r\n            \"label\": \"Random forest Regression\",\r\n            \"title\": \"RF.Reg\",\r\n            \"value\": 13,\r\n            \"id\": 13,\r\n            \"options\": {\r\n                \"estimators\": {\r\n                    label: \"num of estimators\",\r\n                    type: \"number\",\r\n                    default: 100\r\n                },\r\n                \"features\": {\r\n                    label: \"features length\",\r\n                    type: \"number\",\r\n                    default: \"sqrt\"\r\n                },\r\n                \"depth\": {\r\n                    label: \"depth\",\r\n                    type: \"number\",\r\n                    default: 5\r\n                },\r\n                \"criteria\": {\r\n                    type: \"select\",\r\n                    label: \"criteria\",\r\n                    default: \"squared_error\",\r\n                    \"values\": [{ label: \"squared_error\", value: \"squared_error\" }, { label: \"absolute_error\", value: \"absolute_error\" },\r\n                    { label: \"friedman_mse\", value: \"friedman_mse\" }, { label: \"poisson\", value: \"poisson\" }]\r\n                }\r\n            },\r\n        },\r\n        \"kernel_regression\": {\r\n            \"label\": \"Kernel Regression\",\r\n            \"title\": \"Ker.Reg\",\r\n            \"value\": 15,\r\n            \"id\": 15,\r\n            \"options\": {\r\n                \"estimators\": {\r\n                    type: \"number\",\r\n                    default: 100\r\n                },\r\n            },\r\n        },\r\n        \"bspline_regression\": {\r\n            \"label\": \"Bspline Regression\",\r\n            \"title\": \"Bspl.Reg\",\r\n            \"value\": 16,\r\n            \"id\": 16,\r\n\r\n            \"options\": {\r\n                \"knots\": {\r\n                    label: \"knots\",\r\n                    type: \"number\",\r\n                    default: 5\r\n                },\r\n                \"degree\": {\r\n                    label: \"degree\",\r\n                    type: \"number\",\r\n                    default: 3\r\n                },\r\n            },\r\n        },\r\n    },\r\n};","const pyodideWorker = new Worker(new URL('./webworker.js', import.meta.url))\r\n\r\nconst callbacks = {};\r\n\r\npyodideWorker.onmessage = (event) => {\r\n    const { id, ...data } = event.data;\r\n    const onSuccess = callbacks[id];\r\n    delete callbacks[id];\r\n    onSuccess(data);\r\n};\r\n\r\nconst asyncRun = (() => {\r\n    let id = 0; // identify a Promise\r\n    return (script, context) => {\r\n        // the id could be generated more carefully\r\n        id = (id + 1) % Number.MAX_SAFE_INTEGER;\r\n        return new Promise((onSuccess) => {\r\n            callbacks[id] = onSuccess;\r\n            pyodideWorker.postMessage({\r\n                ...context,\r\n                python: script,\r\n                id,\r\n            });\r\n        });\r\n    };\r\n})();\r\n\r\nexport { asyncRun };","import { asyncRun } from \"../py-worker\";\r\nexport default class PCA {\r\n    constructor() {\r\n    }\r\n    async predict(x, n, x_test = []) {\r\n        this.context = {\r\n            x_train: x,\r\n            x_test: x_test,\r\n            has_test_set: x_test.length > 0,\r\n            n: +n,\r\n        };\r\n        const script = `\r\n        import matplotlib.pyplot as plt\r\n        import numpy as np\r\n        from sklearn.decomposition import PCA\r\n        from js import x_train,n,x_test,has_test_set\r\n        from sklearn.preprocessing import StandardScaler\r\n        x_train = np.array(x_train)\r\n        scaler = StandardScaler()\r\n        X_scaled = scaler.fit_transform(x_train) \r\n        pca_x = PCA(n_components=n,random_state = 42)\r\n        pca = pca_x.fit_transform(np.array(X_scaled))\r\n        pca_test=[]\r\n        if has_test_set:\r\n            x_test = np.array(x_test)\r\n            x_test_scaled= scaler.transform(x_test) \r\n            pca_test = pca_x.fit_transform(np.array(x_test_scaled))\r\n        ccircle = []\r\n        eucl_dist = []\r\n        for i,j in enumerate(x_train.T):\r\n            corr1 = np.corrcoef(j,pca[:,0])[0,1]\r\n            corr2 = np.corrcoef(j,pca[:,1])[0,1]\r\n            ccircle.append((corr1, corr2))\r\n            eucl_dist.append(np.sqrt(corr1**2 + corr2**2))\r\n        (pca,np.arange(1, len(pca_x.explained_variance_ratio_) + 1), pca_x.explained_variance_ratio_,ccircle,eucl_dist,pca_test)\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                return results;\r\n            } else if (error) {\r\n                throw Error(\"Faced errot fitting PCA\")\r\n            }\r\n        } catch (e) {\r\n            throw Error(\"Failed to fit PCA\")\r\n        }\r\n    }\r\n\r\n}\r\n","/* eslint-disable no-undef */\r\nimport { asyncRun } from \"./py-worker\";\r\nimport { MinMaxScaler, StandardScaler, LabelEncoder, getDummies } from 'danfojs';\r\nimport { FeatureCategories } from '../helpers/settings'\r\n\r\nimport * as Papa from 'papaparse';\r\nasync function parseCsv(data) {\r\n    return new Promise(resolve => {\r\n        data = data.map((row) => {\r\n            return Object.keys(row).sort().map(key => parseFloat(row[key]));\r\n        });\r\n        resolve(data);\r\n    });\r\n}\r\n\r\n/**\r\n * Downloads and returns the csv.\r\n *\r\n * @param {string} filename Name of file to be loaded.\r\n *\r\n * @returns {Promise.Array<number[]>} Resolves to parsed csv data.\r\n */\r\nexport async function loadCsv(filename) {\r\n    return new Promise(resolve => {\r\n        const url = `${BASE_URL}${filename}.csv`;\r\n\r\n        Papa.parse(url, {\r\n            download: true,\r\n            header: true,\r\n            complete: (results) => {\r\n                resolve(parseCsv(results['data']));\r\n            }\r\n        })\r\n    });\r\n}\r\n\r\n/**\r\n * Shuffles data and label using Fisher-Yates algorithm.\r\n */\r\nexport async function shuffle(data, label) {\r\n    let counter = data.length;\r\n    let temp = 0;\r\n    let index = 0;\r\n    while (counter > 0) {\r\n        index = (Math.random() * counter) | 0;\r\n        counter--;\r\n        // data:\r\n        temp = data[counter];\r\n        data[counter] = data[index];\r\n        data[index] = temp;\r\n        // label:\r\n        temp = label[counter];\r\n        label[counter] = label[index];\r\n        label[index] = temp;\r\n    }\r\n}\r\n\r\n/**\r\n * Calculate the arithmetic mean of a vector.\r\n *\r\n * @param {Array} vector The vector represented as an Array of Numbers.\r\n *\r\n * @returns {number} The arithmetic mean.\r\n */\r\nfunction mean(vector) {\r\n    let sum = 0;\r\n    for (const x of vector) {\r\n        sum += x;\r\n    }\r\n    return sum / vector.length;\r\n}\r\n\r\n/**\r\n * Calculate the standard deviation of a vector.\r\n *\r\n * @param {Array} vector The vector represented as an Array of Numbers.\r\n *\r\n * @returns {number} The standard deviation.\r\n */\r\nfunction stddev(vector) {\r\n    let squareSum = 0;\r\n    const vectorMean = mean(vector);\r\n    for (const x of vector) {\r\n        squareSum += (x - vectorMean) * (x - vectorMean);\r\n    }\r\n    return Math.sqrt(squareSum / (vector.length - 1));\r\n}\r\n\r\n/**\r\n * Normalize a vector by its mean and standard deviation.\r\n *\r\n * @param {Array} vector Vector to be normalized.\r\n * @param {number} vectorMean Mean to be used.\r\n * @param {number} vectorStddev Standard Deviation to be used.\r\n *\r\n * @returns {Array} Normalized vector.\r\n */\r\nconst normalizeVector = (vector, vectorMean, vectorStddev) => {\r\n    return vector.map(x => (x - vectorMean) / vectorStddev);\r\n};\r\n\r\n/**\r\n * Normalizes the dataset\r\n *\r\n * @param {Array} dataset Dataset to be normalized.\r\n * @param {boolean} isTrainData Whether it is training data or not.\r\n * @param {Array} vectorMeans Mean of each column of dataset.\r\n * @param {Array} vectorStddevs Standard deviation of each column of dataset.\r\n *\r\n * @returns {Object} Contains normalized dataset, mean of each vector column,\r\n *                   standard deviation of each vector column.\r\n */\r\nexport function normalizeDataset(\r\n    dataset, isTrainData = true, vectorMeans = [], vectorStddevs = []) {\r\n    const numFeatures = dataset[0].length;\r\n    let vectorMean;\r\n    let vectorStddev;\r\n\r\n    for (let i = 0; i < numFeatures; i++) {\r\n        const vector = dataset.map(row => row[i]);\r\n\r\n        if (isTrainData) {\r\n            vectorMean = mean(vector);\r\n            vectorStddev = stddev(vector);\r\n\r\n            vectorMeans.push(vectorMean);\r\n            vectorStddevs.push(vectorStddev);\r\n        } else {\r\n            vectorMean = vectorMeans[i];\r\n            vectorStddev = vectorStddevs[i];\r\n        }\r\n\r\n        const vectorNormalized =\r\n            normalizeVector(vector, vectorMean, vectorStddev);\r\n\r\n        vectorNormalized.forEach((value, index) => {\r\n            dataset[index][i] = value;\r\n        });\r\n    }\r\n\r\n    return { dataset, vectorMeans, vectorStddevs };\r\n}\r\n\r\n/**\r\n * Binarizes a tensor based on threshold of 0.5.\r\n *\r\n * @param {tf.Tensor} y Tensor to be binarized.\r\n * @param {number} threshold (default: 0.5).\r\n * @returns {tf.Tensor} Binarized tensor.\r\n */\r\nexport function binarize(y, threshold) {\r\n    if (threshold == null) {\r\n        threshold = 0.5;\r\n    }\r\n    tf.util.assert(\r\n        threshold >= 0 && threshold <= 1,\r\n        `Expected threshold to be >=0 and <=1, but got ${threshold}`);\r\n\r\n    return tf.tidy(() => {\r\n        const condition = y.greater(tf.scalar(threshold));\r\n        return tf.where(condition, tf.onesLike(y), tf.zerosLike(y));\r\n    });\r\n}\r\nexport function encode_name(key) {\r\n    let str_encoded = key.replace(/\\s/g, '').replace(/[^\\w-]/g, '_');\r\n    return str_encoded\r\n}\r\nexport function calculatePrecision(classIndex, confusionMatrix) {\r\n    let truePositive = confusionMatrix[classIndex][classIndex];\r\n    let falsePositive = 0;\r\n\r\n    for (let i = 0; i < confusionMatrix.length; i++) {\r\n        if (i !== classIndex) {\r\n            falsePositive += confusionMatrix[i][classIndex];\r\n        }\r\n    }\r\n\r\n    if (truePositive === 0 && falsePositive === 0) {\r\n        return 1;\r\n    }\r\n\r\n    return truePositive / (truePositive + falsePositive);\r\n}\r\n\r\nexport function calculateRecall(classIndex, confusionMatrix) {\r\n    let truePositive = confusionMatrix[classIndex][classIndex];\r\n    let falseNegative = 0;\r\n    for (let i = 0; i < confusionMatrix.length; i++) {\r\n        falseNegative += confusionMatrix[classIndex][i];\r\n    }\r\n    falseNegative -= truePositive;\r\n    if (truePositive === 0 && falseNegative === 0) {\r\n        return 1;\r\n    }\r\n    return truePositive / (truePositive + falseNegative);\r\n}\r\n\r\n\r\nexport function calculateF1Score(classIndex, confusionMatrix) {\r\n    const precision = calculatePrecision(classIndex, confusionMatrix);\r\n    const recall = calculateRecall(classIndex, confusionMatrix);\r\n    return (2 * precision * recall) / (precision + recall);\r\n}\r\n\r\nexport async function metrics(y, y_pred, labels) {\r\n    const context = {\r\n        y: y,\r\n        y_pred: y_pred,\r\n        labels: labels\r\n    };\r\n    const script = `\r\n        from sklearn.metrics import precision_recall_fscore_support, classification_report, f1_score,accuracy_score\r\n        from js import y_pred,y,labels       \r\n        from sklearn.metrics import recall_score,precision_score\r\n\r\n        precision = precision_score(y, y_pred, average=None,labels=labels)\r\n        recall = recall_score(y, y_pred, average=None,labels=labels)\r\n        f1_micro = f1_score(y, y_pred, average='micro')\r\n        f1_macro = f1_score(y, y_pred, average='macro')\r\n        accuracy = accuracy_score(y, y_pred)\r\n        (precision,recall,f1_micro,f1_macro,accuracy)\r\n    `;\r\n    try {\r\n        const { results, error } = await asyncRun(script, context);\r\n        if (results) {\r\n            return {\r\n                precision: results[0],\r\n                recall: results[1],\r\n                f1_micro: results[2],\r\n                f1_macro: results[3],\r\n                accuracy: results[4],\r\n\r\n            }\r\n        } else if (error) {\r\n            throw error\r\n        }\r\n    } catch (e) {\r\n        throw (\"Something went wrong\", e)\r\n    }\r\n}\r\nexport function calculateRSquared(actual, predicted) {\r\n    const meanActual = mean_array(actual);\r\n    const totalSumOfSquares = actual.reduce((acc, val) => acc + Math.pow(val - meanActual, 2), 0);\r\n    const residualSumOfSquares = actual.reduce((acc, val, index) => acc + Math.pow(val - predicted[index], 2), 0);\r\n    return 1 - (residualSumOfSquares / totalSumOfSquares);\r\n}\r\nexport function calculateMSE(actualValues, predictedValues) {\r\n    if (actualValues.length !== predictedValues.length) {\r\n        throw new Error(\"The lengths of actual values and predicted values must be the same.\");\r\n    }\r\n\r\n    const n = actualValues.length;\r\n    let sumSquaredError = 0;\r\n\r\n    for (let i = 0; i < n; i++) {\r\n        const squaredError = Math.pow(actualValues[i] - predictedValues[i], 2);\r\n        sumSquaredError += squaredError;\r\n    }\r\n\r\n    const meanSquaredError = sumSquaredError / n;\r\n    return meanSquaredError;\r\n}\r\nfunction mean_array(array) {\r\n    return array.reduce((acc, val) => acc + val, 0) / array.length;\r\n}\r\nexport function evaluate_classification(predictions, y_test, encoder) {\r\n    console.assert(predictions.length === y_test.length, \"predictions and test should have the same length.\")\r\n    let missclassification_indexes = []\r\n    let missclassification_preds = []\r\n    let currect_classifications_sum = 0\r\n    y_test.forEach((element, i) => {\r\n        if (element === predictions[i]) {\r\n            currect_classifications_sum++\r\n        } else {\r\n            missclassification_indexes.push(i)\r\n            let label = [predictions[i]]\r\n            let result = encoder.inverseTransform(label)\r\n            missclassification_preds.push(result[0])\r\n\r\n        }\r\n    });\r\n    return {\r\n        accuracy: Number((currect_classifications_sum / predictions.length) * 100),\r\n        indexes: missclassification_indexes,\r\n        mispredictions: missclassification_preds\r\n    }\r\n}\r\nexport function scale_data(dataset, column, normalization_type) {\r\n    try {\r\n\r\n\r\n        switch (normalization_type) {\r\n            case \"0\":\r\n                {\r\n                    break;\r\n                }\r\n            case \"1\":\r\n                {\r\n                    let scaler = new MinMaxScaler()\r\n                    scaler.fit(dataset[column])\r\n                    dataset.addColumn(column, scaler.transform(dataset[column]), { inplace: true })\r\n                    break;\r\n                }\r\n            case \"2\":\r\n                dataset.addColumn(column, dataset[column].apply((x) => x * x), { inplace: true })\r\n                break;\r\n            case \"3\":\r\n                dataset.addColumn(column, dataset[column].apply((x) => {\r\n                    let ln = Math.log(x);\r\n                    if (isNaN(ln)) {\r\n                        throw new Error('falied at data transformation.');\r\n                    }\r\n                    return Math.log(x)\r\n                }\r\n                ), { inplace: true })\r\n                break;\r\n            case \"4\":\r\n                {\r\n                    let scaler = new StandardScaler()\r\n                    scaler.fit(dataset[column])\r\n                    dataset.addColumn(column, scaler.transform(dataset[column]), { inplace: true })\r\n                    break;\r\n                }\r\n            default:\r\n                break;\r\n        }\r\n    } catch (error) {\r\n        throw new Error('falied at data transformation.')\r\n    }\r\n}\r\nexport function applyDataTransformation(dataset, column_names, transformations) {\r\n    for (let i = 0; i < column_names.length; i++) {\r\n        const column = column_names[i];\r\n        let transformation = transformations.find(transformation => transformation.name === column)\r\n        if (transformation) {\r\n            scale_data(dataset, column, transformation.scaler.toString())\r\n        }\r\n    }\r\n    return dataset\r\n}\r\nexport function handle_missing_values(data_frame, impute = false) {\r\n    // to do normalization\r\n    if (impute) {\r\n        let string_columns = []\r\n        let numeric_columns = []\r\n        let string_column_modes = []\r\n        let numeric_column_means = []\r\n        data_frame.columns.forEach((item) => {\r\n            if (data_frame.column(item)?.dtype === 'string') {\r\n                string_columns.push(item)\r\n            } else {\r\n                numeric_columns.push(item)\r\n            }\r\n        })\r\n        string_columns.forEach(element => {\r\n            let mode = getCategoricalMode(data_frame.column(element).values).mode\r\n            string_column_modes.push(mode)\r\n        });\r\n        numeric_columns.forEach(element => {\r\n            let mean = data_frame.column(element).mean()\r\n            numeric_column_means.push(mean)\r\n        });\r\n        data_frame = data_frame.fillNa(string_column_modes, { columns: string_columns })\r\n        data_frame = data_frame.fillNa(numeric_column_means, { columns: numeric_columns })\r\n    } else {\r\n        data_frame.dropNa({ axis: 1, inplace: true })\r\n    }\r\n    return data_frame\r\n}\r\nexport function getCategoricalMode(arr) {\r\n    if (arr.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const categoryCount = {};\r\n    categoryCount['total'] = 0\r\n    categoryCount['mode'] = ''\r\n    for (let i = 0; i < arr.length; i++) {\r\n        const category = arr[i];\r\n        if (category === null || category === undefined) {\r\n            continue\r\n        }\r\n        categoryCount['total']++\r\n        if (category in categoryCount) {\r\n            categoryCount[category]++;\r\n        } else {\r\n            categoryCount[category] = 1;\r\n        }\r\n    }\r\n\r\n    let modeCategory = null;\r\n    let modeCount = 0;\r\n    for (const category in categoryCount) {\r\n        if (category === 'total') {\r\n            continue\r\n        }\r\n        if (categoryCount[category] > modeCount) {\r\n            modeCategory = category;\r\n            modeCount = categoryCount[category];\r\n        }\r\n    }\r\n    categoryCount['mode'] = modeCategory;\r\n    return categoryCount;\r\n}\r\nexport function encode_dataset(data_frame, columns_types) {\r\n    let df = data_frame.copy()\r\n\r\n    let categorical_columns = columns_types.filter(column => column.type === FeatureCategories.Nominal.id || column.type === FeatureCategories.Ordinal.id)\r\n    let categoriclaFeaturesAfterEncoding = []\r\n    categorical_columns.forEach((column) => {\r\n        if (column.type === FeatureCategories.Ordinal.id) {\r\n            let encoder = new LabelEncoder()\r\n            encoder.fit(df[column.name])\r\n            let encoded_column = encoder.transform(df[column.name])\r\n            df.addColumn(column.name, encoded_column.values, { inplace: true })\r\n            categoriclaFeaturesAfterEncoding.push(column.name)\r\n        } else {\r\n            df = getDummies(df, { columns: [column.name] })\r\n            df.drop({ columns: [df.columns.find(m => m.includes(column.name + \"_\"))], inplace: true });\r\n            categoriclaFeaturesAfterEncoding.push(...df.columns.filter(m => m.includes(column.name + \"_\")))\r\n\r\n        }\r\n    })\r\n    return [df, categoriclaFeaturesAfterEncoding]\r\n}\r\n\r\nexport function merge_classes(classes, dataframe) {\r\n    let newClass = classes.map(m => m.class).join('_');\r\n    classes.forEach(cls => {\r\n        dataframe.replace(cls.class, newClass, { columns: [this.settings.modelTarget], inplace: true })\r\n    });\r\n    let message = { message: 'merged classes: ' + newClass, type: 'info' }\r\n    this.$buefy.toast.open('merged classes: ' + newClass)\r\n    this.settings.addMessage(message)\r\n}\r\n\r\n","import { asyncRun } from \"../py-worker\";\r\nexport default class TSNE {\r\n    constructor() {\r\n    }\r\n    async predict(x, n, seed = 123) {\r\n        this.context = {\r\n            x_train: x,\r\n            n: +n,\r\n            seed: seed\r\n        };\r\n        const script = `\r\n        import matplotlib.pyplot as plt\r\n        from sklearn.manifold import TSNE\r\n        import numpy as np\r\n        from js import x_train,n,seed\r\n        from sklearn.preprocessing import StandardScaler\r\n        X = np.array(x_train)\r\n        embedded = TSNE(n_components=n, learning_rate='auto', random_state=seed).fit_transform(X)\r\n        embedded\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                return results;\r\n            } else if (error) {\r\n                throw Error(\"Faced errot fitting PCA\")\r\n            }\r\n        } catch (e) {\r\n            throw Error(\"Failed to fit PCA\")\r\n        }\r\n    }\r\n\r\n}\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\nimport PCA from './dimensionality-reduction/pca';\r\nimport { binarize } from './utils'\r\nimport { equalIntervalBreaks, kernelDensityEstimation, standardDeviation, interquartileRange } from \"simple-statistics\"\r\nimport { schemeTableau10, interpolateBlues, interpolateRainbow } from 'd3-scale-chromatic';\r\nimport { FeatureCategories } from \"./settings\";\r\nimport { metrics as ClassificationMetric, encode_name } from './utils.js';\r\nimport { metrics } from '@tensorflow/tfjs-vis';\r\nimport { scale_data } from './utils';\r\nimport { corrcoeff } from 'jstat'\r\nimport { tensorflow, LabelEncoder } from 'danfojs';\r\nimport { MinMaxScaler } from 'danfojs';\r\nimport TSNE from './dimensionality-reduction/tsne';\r\nconst plotlyImageExportConfig = {\r\n    toImageButtonOptions: {\r\n        format: 'png', // one of png, svg, jpeg, webp\r\n        height: null,\r\n        width: null,\r\n        scale: 2\r\n    }\r\n};\r\nexport default class ChartController {\r\n    constructor() {\r\n        this.color_scheme = schemeTableau10;\r\n        this.color_scheme_sequential = interpolateRainbow;\r\n\r\n    }\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    classification_target_chart(values, labels, name, container, title = \"\") {\r\n        var uniqueLabels = [...new Set(labels)];\r\n        var colorIndices = labels.map(label => this.indexToColor(uniqueLabels.indexOf(label)));\r\n        var data = [];\r\n        data.push({\r\n            name: \"Count\",\r\n            data: values.map((item, i) => ({ y: item, color: colorIndices[i] }))\r\n        })\r\n\r\n        Highcharts.chart(container, {\r\n            credits: {\r\n                enabled: false\r\n            },\r\n            title: {\r\n                text: \"\"\r\n            },\r\n            chart: {\r\n                type: 'column'\r\n            },\r\n            xAxis: {\r\n                categories: uniqueLabels,\r\n            },\r\n            yAxis: {\r\n                min: 0,\r\n            },\r\n            plotOptions: {\r\n                column: {\r\n                    pointPadding: 0.1,\r\n                    borderWidth: 0\r\n                }\r\n            },\r\n            colors: colorIndices,\r\n            series: data\r\n        });\r\n    }\r\n    regression_target_chart(items, container, name) {\r\n        let kde_data = [];\r\n        let ys = [];\r\n        let items_range = items\r\n        var breaks = equalIntervalBreaks(items_range, 100);\r\n        let kde = kernelDensityEstimation(items, 'gaussian', 'nrd');\r\n        breaks.forEach((item) => {\r\n            ys.push(kde(item, 'nrd'));\r\n            kde_data.push([item, ys[ys.length - 1]]);\r\n        });\r\n\r\n\r\n        Highcharts.chart(container, {\r\n            credits: {\r\n                enabled: false\r\n            },\r\n            legend: {\r\n                enabled: false,\r\n                verticalAlign: 'top',\r\n            },\r\n            chart: {\r\n                height: '300',\r\n                type: \"spline\",\r\n                animation: true,\r\n            },\r\n            title: {\r\n                text: name // Assuming `column` is defined elsewhere\r\n            },\r\n            yAxis: {\r\n                title: { text: null }\r\n            },\r\n            tooltip: {\r\n                valueDecimals: 3\r\n            },\r\n            plotOptions: {\r\n                series: {\r\n                    marker: {\r\n                        enabled: false\r\n                    },\r\n                    dashStyle: \"shortdot\",\r\n                    area: true\r\n                }\r\n            },\r\n            series: [{\r\n                type: 'area',\r\n                dashStyle: \"solid\",\r\n                lineWidth: 2,\r\n                data: kde_data\r\n            }]\r\n        });\r\n    }\r\n    draw_categorical_barplot(column_values, target, title) {\r\n        const key = title + \"- barplot\";\r\n        $(\"#categories_barplots\").append(`<div class=\"column is-4\" style=\"height:40vh;\" id=\"${key}\"></div>`)\r\n        const countOccurrences = column_values.reduce((acc, val) => {\r\n            acc[val] = (acc[val] || 0) + 1;\r\n            return acc;\r\n        }, {});\r\n        const countArray = Object.entries(countOccurrences).map(([value, count]) => ({ value: value, count }));\r\n        countArray.sort((a, b) => b.count - a.count);\r\n        const top5 = countArray.slice(0, 5);\r\n        new Highcharts.Chart({\r\n            chart: {\r\n                renderTo: key,\r\n                type: 'column'\r\n            },\r\n            xAxis: {\r\n                categories: top5.map(m => m.value),\r\n            },\r\n            title: {\r\n                text: title\r\n            },\r\n            yAxis: {\r\n                min: 0,\r\n                labels: {\r\n                    overflow: 'justify'\r\n                }\r\n            },\r\n            credits: {\r\n                enabled: false\r\n            },\r\n            plotOptions: {\r\n                bar: {\r\n                    dataLabels: {\r\n                        enabled: true\r\n                    }\r\n                }\r\n            },\r\n            series: [{\r\n                showInLegend: false,\r\n                name: title,\r\n                data: top5.map(m => m.count)\r\n            }]\r\n        });\r\n\r\n    }\r\n    roc_chart(container, true_positive_rates, false_positive_rates) {\r\n        var trace = {\r\n            x: false_positive_rates,\r\n            y: true_positive_rates,\r\n            type: 'scatter',\r\n            mode: 'lines',\r\n            name: 'ROC Curve',\r\n        };\r\n        var trace2 = {\r\n            x: [0, 1],\r\n            y: [0, 1],\r\n            type: 'scatter',\r\n            name: 'diagonal',\r\n        };\r\n        var layout = {\r\n            showlegend: false,\r\n            title: 'ROC Curve',\r\n            xaxis: { title: 'False Positive Rate' },\r\n            yaxis: { title: 'True Positive Rate' },\r\n        };\r\n\r\n        var data = [trace, trace2];\r\n\r\n        Plotly.newPlot(container, data, layout);\r\n    }\r\n    falsePositives(yTrue, yPred) {\r\n        return tf.tidy(() => {\r\n            const one = tf.scalar(1);\r\n            const zero = tf.scalar(0);\r\n            return tf.logicalAnd(yTrue.equal(zero), yPred.equal(one))\r\n                .sum()\r\n                .cast('float32');\r\n        });\r\n    }\r\n    indexToColor(index, max) {\r\n        return this.color_scheme_sequential((index + 1) / max);\r\n    }\r\n    indexToColorSequential(value, min, max) {\r\n        let normalizer_value = (value - min) / (max - min)\r\n        return this.color_scheme_sequential(normalizer_value);\r\n    }\r\n    reshape(array, shape) {\r\n        if (shape.length === 0) return array[0];\r\n\r\n        const [size, ...restShape] = shape;\r\n        const result = [];\r\n        const restSize = restShape.reduce((a, b) => a * b, 1);\r\n        console.log(restSize);\r\n\r\n        for (let i = 0; i < size; i++) {\r\n            result.push(this.reshape(array.slice(i * restSize, (i + 1) * restSize), restShape));\r\n        }\r\n\r\n        return result;\r\n    }\r\n    async plot_tsne(data, is_classification, labels, seed, n) {\r\n        labels = labels.flat()\r\n        const tsne = new TSNE();\r\n        let Y = await tsne.predict(data, n, seed)\r\n        let tsneComponents = Y[0].length\r\n        let tsne_traces = []\r\n        let index = 1;\r\n        let colors = []\r\n        if (is_classification) {\r\n            var uniqueLabels = [...new Set(labels.flat())];\r\n            colors = labels.map(l => this.indexToColor(uniqueLabels.indexOf(l), uniqueLabels.length));\r\n        } else {\r\n            let max = Math.max(...labels)\r\n            let min = Math.min(...labels)\r\n            colors = labels.map(item => this.indexToColorSequential(item, min, max));\r\n        }\r\n        for (let i = 0; i < tsneComponents; i++) {\r\n            for (let j = 0; j < tsneComponents; j++) {\r\n                if (j < i) {\r\n                    let x = Y.map(values => values[j]);\r\n                    let y = Y.map(values => values[i]);\r\n                    tsne_traces.push({\r\n                        x: x,\r\n                        y: y,\r\n                        mode: 'markers',\r\n                        type: 'scatter',\r\n                        xaxis: 'x' + (index),\r\n                        yaxis: 'y' + (index),\r\n                        marker: {\r\n                            color: colors,\r\n                            size: 2,\r\n                        },\r\n                    })\r\n\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n        var layout = {\r\n            width: tsneComponents * 150,\r\n            height: tsneComponents * 150,\r\n            spacing: 0,\r\n            title: {\r\n                text: 'TSNE Matrix',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            showlegend: false,\r\n            boxmode: 'overlay',\r\n            grid: { rows: tsneComponents, xgap: 0.0, ygap: 0.0, columns: tsneComponents, pattern: 'independent' },\r\n            margin: { t: 30, r: 30, l: 30, b: 40 },\r\n        };\r\n        for (var i = 0; i < tsneComponents; i++) {\r\n            for (var j = 0; j < tsneComponents; j++) {\r\n                var xAxisKey = 'xaxis' + ((i * tsneComponents) + j + 1);\r\n                var yAxisKey = 'yaxis' + ((i * tsneComponents) + j + 1);\r\n                let fontSize = 10;\r\n                layout[xAxisKey] = {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    showgrid: false,\r\n                    showticklabels: false,\r\n                    tickfont: {\r\n                        size: fontSize\r\n                    },\r\n                };\r\n                layout[yAxisKey] = {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    showgrid: false,\r\n                    showticklabels: false,\r\n                    tickfont: {\r\n                        size: fontSize\r\n                    },\r\n                };\r\n                if (i === tsneComponents - 1) {\r\n                    layout[xAxisKey] = {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        mirror: true,\r\n                        tickfont: {\r\n                            size: fontSize\r\n                        },\r\n                        title: {\r\n                            text: 'Component-' + (j + 1), font: {\r\n                                size: fontSize\r\n                            },\r\n                        }\r\n                    };\r\n\r\n                }\r\n                if (j === 0) {\r\n                    layout[yAxisKey] = {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        mirror: true,\r\n                        tickfont: {\r\n                            size: fontSize\r\n                        },\r\n                        title: {\r\n                            text: 'Component-' + (i + 1), font: {\r\n                                size: fontSize\r\n                            },\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        Plotly.react('tsne', tsne_traces, layout, {\r\n            ...plotlyImageExportConfig,\r\n            staticPlot: true,\r\n        })\r\n\r\n    }\r\n    trueNegatives(yTrue, yPred) {\r\n        return tf.tidy(() => {\r\n            const zero = tf.scalar(0);\r\n            return tf.logicalAnd(yTrue.equal(zero), yPred.equal(zero))\r\n                .sum()\r\n                .cast('float32');\r\n        });\r\n    }\r\n\r\n    // TODO(cais): Use tf.metrics.falsePositiveRate when available.\r\n    falsePositiveRate(yTrue, yPred) {\r\n        return tf.tidy(() => {\r\n            const fp = this.falsePositives(yTrue, yPred);\r\n            const tn = this.trueNegatives(yTrue, yPred);\r\n            return fp.div(fp.add(tn));\r\n        });\r\n    }\r\n    drawROC(targets, probs) {\r\n\r\n        return tf.tidy(() => {\r\n            const thresholds = [\r\n                0.0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55,\r\n                0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.92, 0.94, 0.96, 0.98, 1.0\r\n            ];\r\n            const tprs = [];  // True positive rates.\r\n            const fprs = [];  // False positive rates.\r\n            let area = 0;\r\n            for (let i = 0; i < thresholds.length; ++i) {\r\n                const threshold = thresholds[i];\r\n                const threshPredictions = binarize(probs, threshold).as1D();\r\n\r\n                const fpr = this.falsePositiveRate(targets, threshPredictions).dataSync()[0];\r\n                const tpr = tf.metrics.recall(targets, threshPredictions).dataSync()[0];\r\n\r\n                fprs.push(fpr);\r\n                tprs.push(tpr);\r\n                // Accumulate to area for AUC calculation.\r\n                if (i > 0) {\r\n                    area += (tprs[i] + tprs[i - 1]) * (fprs[i - 1] - fprs[i]) / 2;\r\n                }\r\n            }\r\n            return [area, fprs, tprs];\r\n        });\r\n    }\r\n    nrd(x) {\r\n        let s = standardDeviation(x);\r\n        const iqr = interquartileRange(x);\r\n        if (typeof iqr === \"number\") {\r\n            s = Math.min(s, iqr / 1.34);\r\n        }\r\n        return 1.06 * s * Math.pow(x.length, -0.2);\r\n    }\r\n    hexToRgb(hex) {\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16),\r\n            a: 0.5\r\n        } : null;\r\n    }\r\n    kernelFunctions = {\r\n        gaussian: function (u) {\r\n            return Math.exp(-0.5 * u * u) / Math.sqrt(2 * Math.PI);\r\n        },\r\n        uniform: function (x) {\r\n            return Math.abs(x) <= 1 ? 0.5 : 0;\r\n        },\r\n        triangular: function (x) {\r\n            return Math.abs(x) <= 1 ? 1 - Math.abs(x) : 0;\r\n        },\r\n        biweight: function (x) {\r\n            return Math.abs(x) <= 1 ? 15 / 16 * Math.pow(1 - x * x, 2) : 0;\r\n        },\r\n        triweight: function (x) {\r\n            return Math.abs(x) <= 1 ? 35 / 32 * Math.pow(1 - x * x, 3) : 0;\r\n        },\r\n        Epanechnikov: function (x) {\r\n            return Math.abs(x) <= 1 ? 0.75 * (1 - x * x) : 0;\r\n        }\r\n    };\r\n\r\n    draw_kde(dataset, column, target_name, bandwidth = \"nrd\", is_classification = false, redrawing = false) {\r\n        try {\r\n\r\n\r\n            let items = dataset.column(column).values;\r\n            let default_bandwidth = this.nrd(items).toFixed(2);\r\n            let raw_values = dataset.loc({ columns: [column, target_name] });\r\n            let uniqueLabels = [...new Set(raw_values.column(target_name).values)];\r\n            if (uniqueLabels.length === 2) {\r\n                uniqueLabels.sort()\r\n            }\r\n            let column_values = raw_values.values;\r\n            let subsets = [];\r\n            var colorIndices = uniqueLabels.map(label => this.indexToColor(uniqueLabels.indexOf(label), uniqueLabels.legend));\r\n            if (!is_classification) {\r\n                subsets.push(dataset[column].values);\r\n            } else {\r\n                for (let i = 0; i < uniqueLabels.length; i++) {\r\n                    const label = uniqueLabels[i];\r\n                    let subset = [];\r\n                    for (let i = 0; i < column_values.length; i++) {\r\n                        const item = column_values[i];\r\n                        if (item[1] === label) {\r\n                            subset.push(item[0])\r\n                        }\r\n                    }\r\n                    subsets.push(subset);\r\n                }\r\n            }\r\n\r\n            document.getElementById(\"kde_panel\").style.display = \"block\";\r\n\r\n            var newColumn = document.createElement(\"div\");\r\n            newColumn.className = \"column is-3\";\r\n            newColumn.setAttribute(\"id\", column + '-kde-plot');\r\n            if (!redrawing) {\r\n                let key = encode_name(column)\r\n\r\n                $(\"#container\").append(\r\n                    `<div class=\"column is-4 is-size-6-tablet my-1\">\r\n                <div class=\"columns is-multiline\">\r\n                <div class=\"column is-12\" >\r\n                    <div id=\"${key + '-kde-plot'}\"> </div>\r\n                    <div id=\"${key + '-boxplot'}\" style=\"height:20vh;width: 100%\">\r\n                    </div>\r\n                    <div class=\"field has-addons has-addons-centered my-1\">\r\n                    <div class=\"control\">\r\n                    <span class=\"select is-small\">\r\n                      <select id=\"${key + '-kernel_type'}\">\r\n                      <option value=\"gaussian\">gaussian</option>\r\n                        <option value=\"uniform\">uniform</option>\r\n                        <option value=\"triangular\">triangular</option>\r\n                        <option value=\"biweight\">biweight</option>\r\n                        <option value=\"triweight\">triweight</option>\r\n                        <option value=\"Epanechnikov\">Epanechnikov</option>\r\n                      </select>\r\n                    </span>\r\n                    <p class=\"help is-success\">Kernel</p>\r\n                  </div>\r\n                  <div class=\"control\">\r\n                        <div class=\"select is-small\">\r\n                            <select id=\"${key + '--normal'}\">\r\n                                <option value=\"0\">No</option>\r\n                                <option value=\"1\">Scale</option>\r\n                                <option value=\"2\">x^2</option>\r\n                                <option value=\"3\">ln(x)</option>\r\n                                <option value=\"4\">Standardize </option>\r\n                            </select>\r\n                        </div>\r\n                    <p class=\"help is-success\">Normalization</p>\r\n                    </div>\r\n                        <div class=\"control\">\r\n                            <input class=\"input is-small\" type=\"number\"  min=\"0\" id=\"${key + '-kde'}\" value=\"${default_bandwidth}\">\r\n                            <p class=\"help is-success\">Bandwidth</p>\r\n                        </div>\r\n                        <p class=\"control\">\r\n                            <a class=\"button is-success is-small\" id=\"${key + '-kde-button'}\">\r\n                                Apply\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                  </div>\r\n                </div>`\r\n                );\r\n                document.getElementById(key + '--normal').addEventListener('change', function () {\r\n                    const target = document.getElementById(\"target\").value;\r\n                    let is_classification = document.getElementById(target).value !== FeatureCategories.Numerical;\r\n                    let data = dataset.loc({ columns: [column, target] });\r\n                    let normalization_type = document.getElementById(key + '--normal').value\r\n                    scale_data(data, column, normalization_type)\r\n                    data.dropNa({ axis: 1, inplace: true })\r\n                    var newBandwidth = parseFloat(document.getElementById(key + '-kde').value);\r\n                    current_class.draw_kde(data, column, target, newBandwidth, is_classification, true);\r\n                });\r\n            }\r\n            var current_class = this;\r\n            let key = encode_name(column)\r\n\r\n            document.getElementById(key + '-kde-button').addEventListener(\"click\", function () {\r\n                const target = document.getElementById(\"target\").value;\r\n                let is_classification = document.getElementById(target).value !== FeatureCategories.Numerical;\r\n                let data = dataset.loc({ columns: [column, target] });\r\n                let normalization_type = document.getElementById(key + '--normal').value\r\n                scale_data(data, column, normalization_type)\r\n                var newBandwidth = parseFloat(document.getElementById(key + '-kde').value);\r\n                data.dropNa({ axis: 1, inplace: true })\r\n                current_class.draw_kde(data, column, target, newBandwidth, is_classification, true);\r\n            });\r\n            let container_id = key + '-kde-plot';\r\n            let items_range = [...raw_values.column(column).values]\r\n            // let minValue = Math.min(...items_range);\r\n            // let maxValue = Math.max(...items_range);\r\n            // items_range.push(minValue - parseFloat(default_bandwidth))\r\n            // items_range.push(maxValue + parseFloat(default_bandwidth))\r\n            var breaks = equalIntervalBreaks(items_range, 100);\r\n            let allData = [];\r\n            let kernel_type = document.getElementById(key + \"-kernel_type\")?.value ?? \"gaussian\"\r\n            // Loop through subsets to generate data for all subsets\r\n            let traces = []\r\n            let kde;\r\n            if (is_classification) {\r\n                for (let i = 0; i < subsets.length; i++) {\r\n                    if (subsets[i].length > 2) {\r\n                        let ys = [];\r\n                        kde = kernelDensityEstimation(subsets[i], this.kernelFunctions[kernel_type], bandwidth);\r\n                        let data = [];\r\n                        breaks.forEach((item) => {\r\n                            ys.push(kde(item, bandwidth));\r\n                            data.push([item, ys[ys.length - 1]]);\r\n                        });\r\n                        allData.push(data);\r\n                    } else {\r\n                        allData.push([]);\r\n                    }\r\n                    traces.push({\r\n                        name: uniqueLabels[i],\r\n                        x: subsets[i],\r\n                        marker: {\r\n                            color: colorIndices[i]\r\n                        },\r\n                        type: 'box',\r\n                    })\r\n                }\r\n            } else {\r\n                for (let i = 0; i < subsets.length; i++) {\r\n                    if (subsets[i].length > 2) {\r\n                        let ys = [];\r\n                        kde = kernelDensityEstimation(subsets[i], this.kernelFunctions[kernel_type], bandwidth);\r\n                        let data = [];\r\n                        breaks.forEach((item) => {\r\n                            ys.push(kde(item, bandwidth));\r\n                            data.push([item, ys[ys.length - 1]]);\r\n                        });\r\n                        allData.push(data);\r\n                    } else {\r\n                        allData.push([]);\r\n                    }\r\n                }\r\n                traces.push({\r\n                    name: column,\r\n                    x: items,\r\n                    type: 'box',\r\n                })\r\n            }\r\n\r\n            let animationDuration = 4000;\r\n\r\n            var layout = {\r\n\r\n                yaxis: {\r\n                    visible: false,\r\n                },\r\n                showlegend: false,\r\n                margin: {\r\n                    l: 20,\r\n                    r: 10,\r\n                    b: 60,\r\n                    t: 10,\r\n                },\r\n                legend: {\r\n                    x: 1,\r\n                    xanchor: 'right',\r\n                    y: 1\r\n                },\r\n            };\r\n            Plotly.newPlot(key + '-boxplot', traces, layout, { autosize: true, responsive: true, modeBarButtonsToRemove: ['pan', 'resetScale2d', 'select2d', 'resetViews', 'sendDataToCloud', 'hoverCompareCartesian', 'lasso2d', 'drawopenpath '] });\r\n            Highcharts.chart(container_id, {\r\n                credits: {\r\n                    enabled: false\r\n                },\r\n                legend: {\r\n                    enabled: is_classification ? true : false, align: 'right',\r\n                    verticalAlign: 'top',\r\n                },\r\n                chart: {\r\n                    height: '300',\r\n                    type: \"spline\",\r\n                    animation: true,\r\n                },\r\n                title: {\r\n                    text: column // Assuming `column` is defined elsewhere\r\n                },\r\n                yAxis: {\r\n                    title: { text: null }\r\n                },\r\n                tooltip: {\r\n                    valueDecimals: 3\r\n                },\r\n                plotOptions: {\r\n                    series: {\r\n                        marker: {\r\n                            enabled: false\r\n                        },\r\n                        dashStyle: \"shortdot\",\r\n                        color: colorIndices,\r\n                        animation: {\r\n                            duration: animationDuration\r\n                        },\r\n                        area: true\r\n                    }\r\n                },\r\n                series: allData.map((data, index) => ({\r\n                    type: 'area',\r\n                    name: uniqueLabels[index],\r\n                    dashStyle: \"solid\",\r\n                    lineWidth: 2,\r\n                    color: colorIndices[index],\r\n                    data: data\r\n                }))\r\n            });\r\n            window.dispatchEvent(new Event('resize'));\r\n        } catch (error) {\r\n            throw new Error('falied at plotting kde.')\r\n        }\r\n    }\r\n    downloadPlot(container) {\r\n        Plotly.toImage(container, {\r\n            format: 'png',\r\n            width: null,\r\n            height: null,\r\n            scale: 2\r\n        }).then(function (dataUrl) {\r\n            const a = document.createElement('a');\r\n            a.href = dataUrl;\r\n            a.download = 'plot.png';\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        });\r\n    }\r\n    async classificationPCA(dataset, labels, missclassifications, uniqueLabels, index, n) {\r\n        labels = labels.flat()\r\n        const pca = new PCA();\r\n        var colorIndices = labels.map(label => this.indexToColor(uniqueLabels.indexOf(label), uniqueLabels.length));\r\n        const pca_data = await pca.predict(dataset, n)\r\n        let x = []\r\n        let y = []\r\n        let x_error = []\r\n        let y_error = []\r\n        let error_texts = []\r\n        let real_labels = []\r\n        let missclassificationColors = []\r\n        let truePredsColors = []\r\n        pca_data[0].forEach((element, i) => {\r\n            if (missclassifications['indexes'].includes(i)) {\r\n                let index = missclassifications['indexes'].findIndex(index => index == i)\r\n                error_texts.push(dataset[i].join())\r\n                real_labels.push([labels[i], missclassifications['mispredictions'][index]])\r\n                x_error.push(element[0])\r\n                y_error.push(element[1])\r\n                missclassificationColors.push(colorIndices[i])\r\n            } else {\r\n                x.push(element[0])\r\n                y.push(element[1])\r\n                truePredsColors.push(colorIndices[i])\r\n            }\r\n\r\n        });\r\n        var trace1 = {\r\n            x: x,\r\n            y: y,\r\n            name: 'Predictions',\r\n            text: labels,\r\n            mode: 'markers',\r\n            type: 'scatter',\r\n            marker: {\r\n                size: 4,\r\n                color: truePredsColors,\r\n                symbol: 'circle'\r\n            },\r\n        };\r\n        var trace2 = {\r\n            name: 'Missclassifications',\r\n            x: x_error,\r\n            y: y_error,\r\n            text: error_texts,\r\n            customdata: real_labels,\r\n            mode: 'markers',\r\n            type: 'scatter',\r\n            marker: {\r\n                size: 7,\r\n                color: missclassificationColors,\r\n                symbol: 'cross'\r\n            },\r\n            hovertemplate:\r\n                \"Features : %{text}<br>\" +\r\n                \"True class: %{customdata[0]}<br>\" +\r\n                \"Predited class: %{customdata[1]}\" +\r\n                \"<extra></extra>\"\r\n\r\n        };\r\n        var data = [trace1, trace2];\r\n\r\n        Plotly.newPlot('pca_results_' + index, data, {\r\n            title: {\r\n                text: 'Principle Component Analysis of Predictions'\r\n            },\r\n            hovermode: \"closest\",\r\n            hoverlabel: { bgcolor: \"#FFF\" },\r\n            showlegend: true,\r\n            legend: {\r\n                x: 1,\r\n                xanchor: 'right',\r\n                y: 1,\r\n                bgcolor: 'rgba(0,0,0,0)',\r\n\r\n            },\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: 'PC1'\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: 'PC2'\r\n            }\r\n        }, { ...plotlyImageExportConfig, staticPlot: false, responsive: true, modeBarButtonsToRemove: ['resetScale2d', 'select2d', 'resetViews', 'sendDataToCloud', 'hoverCompareCartesian', 'lasso2d', 'drawopenpath '] });\r\n\r\n    }\r\n    purge_charts(id) {\r\n        Plotly.purge(id)\r\n    }\r\n    async draw_pca(dataset, is_classification, labels, numberOfComponents, axes, columns, drawScreePlot = false) {\r\n        const pca = new PCA();\r\n        labels = labels.flat()\r\n        const [pca_data, _, explained_variances, circels, distances] = await pca.predict(dataset, numberOfComponents)\r\n        let pcaComponents = pca_data[0].length;\r\n\r\n        let x = []\r\n        let pca_traces = []\r\n        for (let i = 0; i < axes.length; i++) {\r\n            let principle_components = []\r\n            let axis = axes[i]\r\n            pca_data.forEach((element, i) => {\r\n                principle_components.push({\r\n                    x: element[axis[0] - 1],\r\n                    y: element[axis[1] - 1],\r\n                    label: labels[i]\r\n                })\r\n                x.push(labels[i][0])\r\n            });\r\n        }\r\n        pca_traces = []\r\n        let index = 1;\r\n        let colors = []\r\n        if (is_classification) {\r\n            var uniqueLabels = [...new Set(labels)];\r\n            colors = labels.map(l => this.indexToColor(uniqueLabels.indexOf(l), uniqueLabels.length));\r\n        } else {\r\n            let max = Math.max(...labels)\r\n            let min = Math.min(...labels)\r\n            colors = labels.map(item => this.indexToColorSequential(item, min, max));\r\n        }\r\n        for (let i = 0; i < pcaComponents; i++) {\r\n            for (let j = 0; j < pcaComponents; j++) {\r\n                if (j < i) {\r\n                    let x = pca_data.map(pca_values => pca_values[j]);\r\n                    let y = pca_data.map(pca_values => pca_values[i]);\r\n                    pca_traces.push({\r\n                        x: x,\r\n                        y: y,\r\n                        mode: 'markers',\r\n                        type: 'scatter',\r\n                        xaxis: 'x' + (index),\r\n                        yaxis: 'y' + (index),\r\n                        marker: {\r\n                            color: colors,\r\n                            size: 2,\r\n                        },\r\n                    })\r\n\r\n                } else if (j > i) {\r\n                    let x = pca_data.map(data => data[j]);\r\n                    let y = dataset.map(data => data[i]);\r\n                    pca_traces.push({\r\n                        x: x,\r\n                        y: y,\r\n                        mode: 'markers',\r\n                        type: 'scatter',\r\n                        xaxis: 'x' + (index),\r\n                        yaxis: 'y' + (index),\r\n                        marker: {\r\n                            color: colors,\r\n                            size: 2,\r\n                        },\r\n                    })\r\n                } else {\r\n                    let x = pca_data.map(data => data[j]);\r\n                    let y = dataset.map(data => data[i]);\r\n                    pca_traces.push({\r\n                        x: x,\r\n                        y: y,\r\n                        mode: 'markers',\r\n                        type: 'scattergl',\r\n                        xaxis: 'x' + (index),\r\n                        yaxis: 'y' + (index),\r\n                        marker: {\r\n                            color: colors,\r\n                            size: 2,\r\n                        },\r\n                    })\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n        var layout = {\r\n            width: pcaComponents * 150,\r\n            height: pcaComponents * 150,\r\n            spacing: 0,\r\n            title: {\r\n                text: 'PCA Matrix',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            showlegend: false,\r\n            boxmode: 'overlay',\r\n            grid: { rows: pcaComponents, xgap: 0.0, ygap: 0.0, columns: pcaComponents, pattern: 'independent' },\r\n            margin: { t: 30, r: 30, l: 30, b: 40 },\r\n        };\r\n        for (var i = 0; i < pcaComponents; i++) {\r\n            for (var j = 0; j < pcaComponents; j++) {\r\n                var xAxisKey = 'xaxis' + ((i * pcaComponents) + j + 1);\r\n                var yAxisKey = 'yaxis' + ((i * pcaComponents) + j + 1);\r\n                let fontSize = 10;\r\n                layout[xAxisKey] = {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    showgrid: false,\r\n                    showticklabels: false,\r\n                    tickfont: {\r\n                        size: fontSize\r\n                    },\r\n                };\r\n                layout[yAxisKey] = {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    showgrid: false,\r\n                    showticklabels: false,\r\n                    tickfont: {\r\n                        size: fontSize\r\n                    },\r\n                };\r\n                if (i === pcaComponents - 1) {\r\n                    layout[xAxisKey] = {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        mirror: true,\r\n                        tickfont: {\r\n                            size: fontSize\r\n                        },\r\n                        title: {\r\n                            text: 'PC-' + (j + 1), font: {\r\n                                size: fontSize\r\n                            },\r\n                        }\r\n                    };\r\n\r\n                }\r\n                if (j === 0) {\r\n                    layout[yAxisKey] = {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        mirror: true,\r\n                        tickfont: {\r\n                            size: fontSize\r\n                        },\r\n                        title: {\r\n                            text: 'PC-' + (i + 1), font: {\r\n                                size: fontSize\r\n                            },\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        Plotly.newPlot('pca_matrix', pca_traces, layout, {\r\n            ...plotlyImageExportConfig,\r\n            staticPlot: true,\r\n        })\r\n\r\n        let arrows = [];\r\n        let shapes = []\r\n\r\n        distances.forEach((distance, i) => {\r\n            arrows.push({\r\n                axref: 'x',\r\n                x: 0,\r\n                ayref: 'y',\r\n                y: 0,\r\n                arrowside: 'start',\r\n                arrowcolor: this.indexToColor(i, distances.length),\r\n                font: {\r\n                    color: this.indexToColor(i, distances.length),\r\n                    size: 8\r\n                },\r\n                xanchor: 'left',   // Align text properly\r\n                yanchor: 'top', // Align text properly\r\n                arrowwidth: 1.2,\r\n                arrowhead: 5,\r\n                text: columns[i],\r\n                hovertext: columns[i] + `(${circels[i][0].toFixed(2)},${circels[i][1].toFixed(2)})`,\r\n                ax: circels[i][0],\r\n                ay: circels[i][1],\r\n            });\r\n        })\r\n        shapes = [\r\n            {\r\n                type: 'circle',\r\n                xref: 'x',\r\n                yref: 'y',\r\n                x0: -1,\r\n                y0: -1,\r\n                x1: 1,\r\n                y1: 1,\r\n                line: {\r\n                    color: 'rgba(50, 171, 96, 1)'\r\n                }\r\n            },\r\n\r\n        ]\r\n\r\n        Plotly.newPlot('correlation_circle', [{\r\n            x: [],\r\n            y: [],\r\n            type: 'scattergl',\r\n            mode: 'markers'\r\n        }], {\r\n            title: {\r\n                text: 'Biplot',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            annotations: arrows,\r\n            shapes: shapes,\r\n            showlegend: true,\r\n            height: 300,\r\n            width: 300,\r\n            margin: {\r\n                l: 60,\r\n                r: 40,\r\n                b: 60,\r\n                t: 40,\r\n                pad: 10\r\n            },\r\n            legend: {\r\n                x: 1,\r\n                xanchor: 'right',\r\n                y: 1, bgcolor: 'rgba(0,0,0,0)',\r\n\r\n            },\r\n            xaxis: {\r\n                range: [-1.2, 1.2],\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: 'cor with PC1'\r\n            },\r\n            yaxis: {\r\n                range: [-1.2, 1.2],\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: 'cor with PC2'\r\n            }\r\n        }, { ...plotlyImageExportConfig, responsive: true });\r\n\r\n        let cumulatedExplainedVaraince = []\r\n        let sum = 0\r\n        let compnentsaxis = []\r\n        explained_variances.forEach((element, i) => {\r\n            sum = sum + element\r\n            compnentsaxis.push(i + 1)\r\n            cumulatedExplainedVaraince.push(sum)\r\n        });\r\n        var trace1 = {\r\n            name: 'Propotional',\r\n            x: compnentsaxis,\r\n            y: explained_variances,\r\n            type: 'scatter'\r\n        };\r\n\r\n        var trace2 = {\r\n            name: 'Cumulative',\r\n            x: compnentsaxis,\r\n            y: cumulatedExplainedVaraince,\r\n            type: 'scatter'\r\n        };\r\n        var trace3 = {\r\n            showlegend: false,\r\n            x: [1.1, 1.1],\r\n            y: [0.92, 0.82],\r\n            text: ['0.9', '0.8'],\r\n            mode: 'text'\r\n        };\r\n        var data = [trace1, trace2, trace3];\r\n        if (drawScreePlot) {\r\n            Plotly.newPlot('scree_plot', data, {\r\n                title: {\r\n                    text: 'Scree Plot',\r\n                    font: {\r\n                        size: 14\r\n                    },\r\n                    xref: 'paper',\r\n                    x: 0.05,\r\n                },\r\n                legend: {\r\n                    x: 0.1,\r\n                    y: 0.2,\r\n                    traceorder: 'normal',\r\n                    orientation: \"h\",\r\n                    font: {\r\n                        size: 8,\r\n                    },\r\n                    bgcolor: 'rgba(0,0,0,0)',\r\n                },\r\n                shapes: [\r\n                    {\r\n                        type: 'line',\r\n                        x0: 1,\r\n                        y0: 0.9,\r\n                        x1: Math.max(...compnentsaxis),\r\n                        y1: 0.9,\r\n                        line: {\r\n                            color: 'rgb(250, 0, 0)',\r\n                            width: 1.5,\r\n                            dash: 'dashdot'\r\n                        }\r\n                    }, {\r\n                        type: 'line',\r\n                        x0: 1,\r\n                        y0: 0.8,\r\n                        x1: Math.max(...compnentsaxis),\r\n                        y1: 0.8,\r\n                        line: {\r\n                            color: 'rgb(50, 171, 96)',\r\n                            width: 1.5,\r\n                            dash: 'dashdot'\r\n                        }\r\n                    }],\r\n                margin: {\r\n                    l: 60,\r\n                    r: 60,\r\n                    b: 40,\r\n                    t: 40,\r\n                    pad: 10\r\n                },\r\n                xaxis: {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    tickmode: 'linear',\r\n                    dtick: 1,\r\n                    mirror: true,\r\n                    zeroline: false,\r\n                    title: 'Number of PCs'\r\n                },\r\n                yaxis: {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    rang: [0, 1],\r\n                    zeroline: false,\r\n                    mirror: true,\r\n                    title: 'Explained variance'\r\n                }\r\n            }, { ...plotlyImageExportConfig, responsive: true });\r\n        }\r\n\r\n        // Highcharts.chart('scree_plot', {\r\n        //     credits: {\r\n        //         enabled: false\r\n        //     },\r\n\r\n        //     title: {\r\n        //         text: 'Explained Variance',\r\n        //     },\r\n        //     legend: {\r\n        //         verticalAlign: 'bottom',\r\n        //         align: 'left',\r\n        //         floating: true,\r\n        //     },\r\n        //     yAxis: {\r\n        //         linecolor: 'black',\r\n        //         linewidth: 2,\r\n        //         mirror: true,\r\n        //         min: 0,\r\n        //         max: 1,\r\n        //         title: {\r\n        //             text: 'Explained variance'\r\n        //         },\r\n        //         plotLines: [{\r\n        //             value: 0.9,\r\n        //             dashStyle: 'shortdash',\r\n        //             color: 'grey',\r\n        //             width: 1,\r\n        //             zIndex: 4,\r\n        //             label: {\r\n        //                 text: '0.9', align: \"right\",\r\n        //             }\r\n        //         }, {\r\n        //             value: 0.8,\r\n        //             dashStyle: 'shortdash',\r\n        //             color: 'darkgrey',\r\n        //             width: 1,\r\n        //             zIndex: 4,\r\n        //             label: {\r\n        //                 text: '0.8', align: \"right\",\r\n        //             }\r\n        //         }]\r\n\r\n        //     },\r\n        //     xAxis: {\r\n        //         linecolor: 'black',\r\n        //         linewidth: 2,\r\n        //         mirror: true,\r\n        //         labels: {\r\n        //             enabled: true,\r\n        //             formatter: function () {\r\n        //                 return this.value + 1;\r\n        //             }\r\n        //         },\r\n\r\n        //         title: {\r\n        //             text: 'Number of PCs'\r\n        //         },\r\n        //     },\r\n        //     series: [{\r\n        //         name: 'Propotional',\r\n        //         color: \"blue\",\r\n        //         data: explained_variances\r\n        //     },\r\n        //     {\r\n        //         name: 'Cumulative',\r\n        //         color: \"red\",\r\n        //         data: cumulatedExplainedVaraince\r\n        //     }],\r\n\r\n        // });\r\n        return [pca_data.map(item => Array.from(item)), cumulatedExplainedVaraince]\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    drawStackedHorizontalChart(categories, lable) {\r\n        var trace1 = {\r\n            x: [20, 14, 23],\r\n            y: ['giraffes', 'orangutans', 'monkeys'],\r\n            name: 'SF Zoo',\r\n            orientation: 'h',\r\n            marker: {\r\n                color: 'rgba(55,128,191,0.6)',\r\n                width: 1\r\n            },\r\n            type: 'bar'\r\n        };\r\n\r\n        var trace2 = {\r\n            x: [12, 18, 29],\r\n            y: ['giraffes', 'orangutans', 'monkeys'],\r\n            name: 'LA Zoo',\r\n            orientation: 'h',\r\n            type: 'bar',\r\n            marker: {\r\n                color: 'rgba(255,153,51,0.6)',\r\n                width: 1\r\n            }\r\n        };\r\n\r\n        var data = [trace1, trace2];\r\n\r\n        var layout = {\r\n            title: 'Colored Bar Chart',\r\n            barmode: 'stack'\r\n        };\r\n\r\n        Plotly.newPlot('myDiv', data, layout);\r\n\r\n    }\r\n    regularization_plot(xs, ys, labels) {\r\n        const traces = []\r\n        labels.forEach((element, i) => {\r\n            traces.push({\r\n                x: xs,\r\n                y: ys.map(m => m[i]),\r\n                type: 'scatter',\r\n                name: element,\r\n                mode: 'line'\r\n            })\r\n        });\r\n        var layout = {\r\n            colorway: ['#f3cec9', '#e7a4b6', '#cd7eaf', '#a262a9', '#6f4d96', '#3d3b72', '#182844'],\r\n            title: 'Lasso Coefficients as Alpha varies',\r\n            xaxis: {\r\n                type: 'log',\r\n                title: 'Alpha (Regularization Strength)'\r\n            },\r\n            yaxis: {\r\n                title: 'Coefficient Value'\r\n            }\r\n        };\r\n        Plotly.newPlot('lasso_plot', traces, layout);\r\n    }\r\n    argmax(array) {\r\n        return array.reduce((maxIndex, currentValue, currentIndex, array) => {\r\n            return currentValue > array[maxIndex] ? currentIndex : maxIndex;\r\n        }, 0);\r\n    }\r\n    probabilities_boxplot(probs, labels, uniqueLabels, index) {\r\n        let traces = [];\r\n        let probablitiesFormatted = []\r\n        let subsets = {};\r\n        labels.forEach((true_label, i) => {\r\n            if (!(true_label in subsets)) {\r\n                subsets[true_label] = [];\r\n            }\r\n            subsets[true_label].push(probs[i]);\r\n        });\r\n        for (const trueClass in subsets) {\r\n            const classProbas = subsets[trueClass];\r\n            classProbas.forEach((proba) => {\r\n                const max = Math.max(...proba)\r\n                probablitiesFormatted.push({\r\n                    trueClass: trueClass,\r\n                    predicted: proba.findIndex(prob => prob == max),\r\n                    probablity: proba\r\n                })\r\n            })\r\n        }\r\n        let i = 0;\r\n        let x = probablitiesFormatted.map(prob => prob.predicted);\r\n        for (let true_label in subsets) {\r\n            let classIndex = uniqueLabels.findIndex(m => m == true_label)\r\n            traces.push({\r\n                type: 'box',\r\n                name: true_label,\r\n                marker: {\r\n                    color: this.indexToColor(classIndex, uniqueLabels.length),\r\n                    size: 2,\r\n                    line: {\r\n                        outlierwidth: 0.3\r\n                    }\r\n                },\r\n                line: {\r\n                    width: 0.5\r\n                },\r\n                y: probablitiesFormatted.map(m => m.probablity[i]),\r\n                x: x\r\n            });\r\n            i++;\r\n        }\r\n        // traces.forEach(trace => {\r\n        //     trace['type'] = 'violin'\r\n        // })\r\n        // Plotly.newPlot(\"proba_violin_plot_\" + index, traces, {\r\n        //     xaxis: {\r\n        //         linecolor: 'black',\r\n        //         linewidth: 1,\r\n        //         mirror: true,\r\n        //     },\r\n        //     yaxis: {\r\n        //         title: 'Predicted Probability',\r\n        //         linecolor: 'black',\r\n        //         zeroline: false,\r\n        //         linewidth: 1,\r\n        //         mirror: true,\r\n        //     },\r\n        //     legend: {\r\n        //         x: 1,\r\n        //         xanchor: 'right',\r\n        //         y: 1\r\n        //     },\r\n        //     violinmode: 'group'\r\n        // }, { responsive: true });\r\n        // traces.forEach(trace => {\r\n        //     trace['type'] = 'box'\r\n        // })\r\n        Plotly.newPlot(\"proba_plot_\" + index, traces, {\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: 'class'\r\n            },\r\n            yaxis: {\r\n                title: 'Predicted Probability',\r\n                linecolor: 'black',\r\n                zeroline: false,\r\n                linewidth: 1,\r\n                mirror: true,\r\n            },\r\n            legend: {\r\n                x: 1,\r\n                xanchor: 'right',\r\n                y: 1,\r\n                bgcolor: 'rgba(0,0,0,0)',\r\n\r\n            },\r\n            boxmode: 'group'\r\n        }, { responsive: true });\r\n    }\r\n\r\n    async plotConfusionMatrix(y, predictedLabels, labels, uniqueClasses, tab_index) {\r\n\r\n        const confusionMatrix = await metrics.confusionMatrix(y, predictedLabels, uniqueClasses.length);\r\n        let metric = await ClassificationMetric(y.arraySync(), predictedLabels.arraySync(), uniqueClasses)\r\n        let accuracy = metric.accuracy.toFixed(2);\r\n        let f1Micro = metric.f1_micro.toFixed(2)\r\n        let f1Macro = metric.f1_macro.toFixed(2)\r\n\r\n        let len = confusionMatrix[0].length\r\n        let preceissions = [];\r\n        let recalls = [];\r\n        for (let j = 0; j < len; j++) {\r\n            preceissions.push(parseFloat(metric.precision[j].toFixed(2)))\r\n        }\r\n        for (let j = 0; j < len; j++) {\r\n            recalls.push(parseFloat(metric.recall[j].toFixed(2)))\r\n        }\r\n        tensorflow.dispose(y)\r\n        tensorflow.dispose(predictedLabels)\r\n        const metric_labels = [\"Precession\", \"Recall\", \"F1 score\", \"Support\"]\r\n        labels.push(\"Precession\")\r\n        recalls.push(0)\r\n        confusionMatrix.push(preceissions)\r\n        let items_labels = labels.filter(x => !metric_labels.includes(x))\r\n        let formatted_matrix = []\r\n        for (let i = 0; i < confusionMatrix.length; i++) {\r\n            const element = confusionMatrix[i];\r\n            if (i < confusionMatrix.length - 1) {\r\n                element.push(recalls[i])\r\n            }\r\n            for (let j = 0; j < element.length; j++) {\r\n                const item = element[j];\r\n                formatted_matrix.push([j, i, item])\r\n            }\r\n        }\r\n        items_labels.push(\"Recall\")\r\n\r\n        Highcharts.chart(\"confusion_matrix_\" + tab_index, {\r\n            credits: {\r\n                enabled: false\r\n            },\r\n            exporting: {\r\n                enabled: true\r\n            },\r\n            chart: {\r\n                type: 'heatmap',\r\n                plotBorderWidth: 1\r\n            },\r\n            title: {\r\n                text: '',\r\n                style: {\r\n                    fontSize: '0.75em'\r\n                }\r\n            },\r\n\r\n            xAxis: [{\r\n                categories: items_labels,\r\n                title: {\r\n                    text: 'Predicted Class'\r\n                }\r\n            }, {\r\n                linkedTo: 0,\r\n                opposite: true,\r\n                tickLength: 0,\r\n                labels: {\r\n                    formatter: function () {\r\n                        var chart = this.chart,\r\n                            each = Highcharts.each,\r\n                            series = chart.series[0],\r\n                            sum = 0,\r\n                            x = this.value;\r\n\r\n                        series.options.data.forEach(function (p, i) {\r\n                            if (p[0] === x) {\r\n                                if (p[1] < uniqueClasses.length) {\r\n                                    sum += p[2];\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        return +sum.toFixed(2);\r\n                    }\r\n                }\r\n            }],\r\n            yAxis: [{\r\n                categories: labels,\r\n                title: {\r\n                    text: 'Actual Class'\r\n                },\r\n                reversed: true, endOnTick: false\r\n            }, {\r\n                linkedTo: 0,\r\n                opposite: true,\r\n                tickLength: 0,\r\n                labels: {\r\n                    formatter: function () {\r\n                        var chart = this.chart,\r\n                            each = Highcharts.each,\r\n                            series = chart.series[0],\r\n                            sum = 0,\r\n                            x = this.value;\r\n                        series.options.data.forEach(function (p, i) {\r\n                            if (p[1] < uniqueClasses.length) {\r\n                                if (p[1] === x) {\r\n                                    if (p[0] < uniqueClasses.length) {\r\n                                        sum += p[2];\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n                        });\r\n                        return +sum.toFixed(2);\r\n                    }\r\n                },\r\n                title: null\r\n            }],\r\n            colorAxis: {\r\n                min: 0,\r\n                minColor: '#FFFFFF',\r\n                maxColor: Highcharts.getOptions().colors[0]\r\n            },\r\n            legend: {\r\n                enabled: false,\r\n                align: 'center',\r\n                layout: 'horizontal',\r\n                margin: 0,\r\n                verticalAlign: 'top',\r\n                y: 5,\r\n                symbolHeight: 10\r\n            },\r\n            series: [{\r\n                name: '',\r\n                borderWidth: 1,\r\n                data: formatted_matrix,\r\n                dataLabels: {\r\n                    enabled: true,\r\n                    useHTML: true,\r\n                    color: '#000000',\r\n                    formatter: function () {\r\n                        var totalCount = this.series.data.reduce(function (acc, cur, i) {\r\n                            if ((i + 1) % (uniqueClasses.length + 1) === 0) {\r\n                                return acc\r\n                            }\r\n                            return +(acc + cur?.value).toFixed(2);\r\n                        }, 0);\r\n                        var count = this.point.value;\r\n                        var skip = this.point.index >= this.series.data.length - (1 * (uniqueClasses.length + 1));\r\n\r\n                        if (!skip && !((this.point.index + 1) % (uniqueClasses.length + 1) === 0)) {\r\n                            var percentage = +((count / totalCount) * 100).toFixed(2);\r\n                            return '<p style=\"margin:auto; text-align:center;\">' + (+count.toFixed(2)) + '<br/>(' + (+percentage).toFixed(2) + '%)</p> ';\r\n                        } else {\r\n                            return '<p style=\"margin:auto; text-align:center;\">' + (+count.toFixed(2)) + '</p>';\r\n                        }\r\n                    }\r\n                }\r\n            }],\r\n            responsive: {\r\n                rules: [{\r\n                    condition: {\r\n                        maxWidth: 200\r\n                    },\r\n                    chartOptions: {\r\n                        yAxis: {\r\n                            labels: {\r\n                                format: '{substr value 0 1}',\r\n                                padding: 0,\r\n                                style: {\r\n                                    fontSize: '6px'\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }]\r\n            }\r\n        });\r\n        return [accuracy, f1Micro, f1Macro]\r\n    }\r\n\r\n\r\n\r\n\r\n    plot_regularization(weights, alphas, names, tab_index) {\r\n        let content = `\r\n                    <div class=\"column is-6\" id=\"regularization_${tab_index}\" style=\"height: 40vh;\">\r\n                    </div>\r\n    `\r\n        $(\"#tabs_info li[data-index='\" + tab_index + \"'] #results_\" + tab_index + \"\").append(content);\r\n\r\n        let serieses = []\r\n        for (let i = 0; i < names.length; i++) {\r\n            serieses.push({\r\n                name: names[i],\r\n                data: weights.map(m => m[i])\r\n            })\r\n        }\r\n        const alphas_formatted = [];\r\n        for (let i = 0; i < alphas.length; i++) {\r\n            alphas_formatted.push(alphas[i].toFixed(2));\r\n        }\r\n        Highcharts.chart(\"regularization_\" + tab_index, {\r\n\r\n            title: {\r\n                text: '',\r\n            },\r\n            yAxis: {\r\n                title: {\r\n                    text: 'Coefficients'\r\n                }\r\n            },\r\n            xAxis: {\r\n                title: {\r\n                    text: 'penalty weight'\r\n                },\r\n                categories: alphas_formatted,\r\n            },\r\n            legend: {\r\n                layout: 'vertical',\r\n                align: 'right',\r\n                verticalAlign: 'middle'\r\n            },\r\n\r\n            plotOptions: {\r\n                series: {\r\n                    label: {\r\n                        connectorAllowed: false\r\n                    },\r\n                }\r\n            },\r\n            series: serieses,\r\n            responsive: {\r\n                rules: [{\r\n                    condition: {\r\n                        maxWidth: 500\r\n                    },\r\n                    chartOptions: {\r\n                        legend: {\r\n                            layout: 'horizontal',\r\n                            align: 'center',\r\n                            verticalAlign: 'bottom'\r\n                        }\r\n                    }\r\n                }]\r\n            }\r\n        });\r\n    }\r\n    yhat_plot(y_test, predictions, container, title = '') {\r\n        Plotly.newPlot(container, [{\r\n            x: y_test,\r\n            y: predictions,\r\n            type: 'scatter',\r\n            name: \"y\",\r\n            mode: 'markers',\r\n            marker: {\r\n                color: 'blue',\r\n                size: 4\r\n            },\r\n        }, {\r\n            x: y_test,\r\n            y: y_test,\r\n            mode: 'lines',\r\n            type: 'scatter',\r\n            line: { color: 'red', dash: 'solid' },\r\n            name: 'y = x line'\r\n        }], {\r\n            height: 300,\r\n            width: 300,\r\n            title: {\r\n                text: title,\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            showlegend: false,\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: 'y',\r\n                    font: {\r\n                        size: 14,\r\n                    }\r\n                },\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: 'Predictions',\r\n                    font: {\r\n                        size: 14,\r\n                    }\r\n                }\r\n            },\r\n            margin: {\r\n                l: 40,\r\n                r: 10,\r\n                b: 40,\r\n                t: 40,\r\n                pad: 0\r\n            }\r\n        }, {\r\n            responsive: true, staticPlot: false, ...plotlyImageExportConfig\r\n        });\r\n    }\r\n    comparison(x, y, container, title = '', yLabel = '') {\r\n        Plotly.newPlot(container, [{\r\n            x: x,\r\n            y: y,\r\n            type: 'scatter',\r\n            name: \"y\",\r\n            mode: 'line',\r\n            marker: {\r\n                color: 'blue',\r\n                size: 4\r\n            },\r\n        }], {\r\n            height: 300,\r\n            width: 300,\r\n            title: {\r\n                text: title,\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            showlegend: false,\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                tickangle: -45,\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    font: {\r\n                        size: 14,\r\n                    }\r\n                },\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: yLabel,\r\n                    font: {\r\n                        size: 14,\r\n                    }\r\n                }\r\n            },\r\n            margin: {\r\n                l: 40,\r\n                r: 10,\r\n                b: 80,\r\n                t: 40,\r\n                pad: 0\r\n            }\r\n        }, {\r\n            responsive: true, staticPlot: false, ...plotlyImageExportConfig\r\n        });\r\n    }\r\n    residual_plot(y, residuals, container, title = '') {\r\n        Plotly.newPlot(container, [\r\n\r\n            {\r\n                x: y,\r\n                y: residuals,\r\n                type: 'scatter',\r\n                name: \"y\",\r\n                mode: 'markers',\r\n                marker: {\r\n                    color: 'blue',\r\n                    size: 4\r\n                },\r\n            },\r\n            {\r\n                x: y,\r\n                y: y.map(m => 0),\r\n                mode: 'lines',\r\n                type: 'scatter',\r\n                line: { color: 'red', dash: 'solid' },\r\n            }\r\n        ],\r\n            {\r\n                height: 300,\r\n                width: 300,\r\n                title: {\r\n                    text: title,\r\n                    font: {\r\n                        size: 14\r\n                    },\r\n                    xref: 'paper',\r\n                    x: 0.05,\r\n                },\r\n                showlegend: false,\r\n                xaxis: {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    title: {\r\n                        text: 'y',\r\n                        font: {\r\n                            size: 14,\r\n                        }\r\n                    },\r\n                },\r\n                yaxis: {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    title: {\r\n                        text: 'Residuals',\r\n                        font: {\r\n                            size: 14,\r\n                        }\r\n                    }\r\n                },\r\n                margin: {\r\n                    l: 40,\r\n                    r: 10,\r\n                    b: 40,\r\n                    t: 40,\r\n                    pad: 0\r\n                }\r\n            }, { responsive: true, ...plotlyImageExportConfig, staticPlot: false });\r\n    }\r\n\r\n    ScatterplotMatrix(items, features, labels, number_of_categoricals, is_classification = true, numeric_columns, categorical_columns, dataset) {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n\r\n                let unique_labels = [...new Set(labels)];\r\n                if (unique_labels.length === 2) {\r\n                    unique_labels.sort()\r\n                }\r\n                console.log('splom', unique_labels);\r\n\r\n                var colors = labels.map(label => this.indexToColor(unique_labels.indexOf(label), unique_labels.length));\r\n                let traces = []\r\n                let index = 1;\r\n                for (let i = 0; i < features.length; i++) {\r\n                    for (let j = 0; j < features.length; j++) {\r\n                        if (i === j) {\r\n                            let subsets = [];\r\n                            let kde;\r\n                            let breaks = []\r\n                            let allData = []\r\n                            if (is_classification) {\r\n\r\n                                if (i >= features.length - number_of_categoricals) {\r\n                                    if (i === features.length - 1) {\r\n                                        for (let k = 0; k < unique_labels.length; k++) {\r\n                                            subsets.push(items.filter(m => m[items[0].length - 1] === unique_labels[k]).map(m => m[i]));\r\n                                        }\r\n                                        traces.push({\r\n                                            x: unique_labels.map(label => '' + label),\r\n                                            y: subsets.map(set => set.length),\r\n                                            type: 'bar',\r\n                                            xaxis: 'x' + (index),\r\n                                            yaxis: 'y' + (index),\r\n                                            marker: {\r\n                                                color: unique_labels.map((_, z) => this.indexToColor(z, unique_labels.length))\r\n                                                , opacity: 0.7\r\n                                            }\r\n                                        })\r\n                                    } else {\r\n                                        let unique_labels_feature = [...new Set(items.map(m => m[i]))];\r\n                                        for (let k = 0; k < unique_labels.length; k++) {\r\n                                            let lablel_items = items.filter(m => m[items[0].length - 1] === unique_labels[k])\r\n                                            let counts = [];\r\n                                            unique_labels_feature.forEach(label =>\r\n                                                counts.push(lablel_items.filter(m => m[i] === label).length)\r\n                                            )\r\n                                            subsets.push({\r\n                                                items: lablel_items,\r\n                                                counts: counts\r\n                                            });\r\n                                        }\r\n                                        unique_labels.forEach((_, i) => {\r\n                                            traces.push({\r\n                                                x: unique_labels_feature,\r\n                                                y: subsets[i].counts,\r\n                                                type: 'bar',\r\n                                                xaxis: 'x' + (index),\r\n                                                yaxis: 'y' + (index),\r\n                                                marker: {\r\n                                                    color: this.indexToColor(i, unique_labels.length)\r\n                                                    , opacity: 0.7\r\n                                                }\r\n                                            })\r\n                                        })\r\n                                    }\r\n                                } else {\r\n                                    for (let k = 0; k < unique_labels.length; k++) {\r\n                                        subsets.push(items.filter(m => m[items[0].length - 1] === unique_labels[k]).map(m => m[i]));\r\n                                    }\r\n                                    for (let ii = 0; ii < subsets.length; ii++) {\r\n                                        if (subsets[ii].length > 2) {\r\n                                            let default_bandwidth = this.nrd(subsets[ii]).toFixed(2);\r\n                                            breaks = equalIntervalBreaks(subsets[ii], 100);\r\n\r\n                                            let ys = [];\r\n                                            kde = kernelDensityEstimation(subsets[ii], 'gaussian', 'nrd');\r\n                                            let data = [];\r\n                                            breaks.forEach((item) => {\r\n                                                ys.push(kde(item, default_bandwidth));\r\n                                                data.push([item, ys[ys.length - 1]]);\r\n                                            });\r\n                                            allData.push(data);\r\n                                        } else {\r\n                                            allData.push([]);\r\n                                        }\r\n                                    }\r\n                                    for (let i = 0; i < allData.length; i++) {\r\n                                        traces.push({\r\n                                            type: 'scatter',\r\n                                            x: allData[i].map(m => m[0]),\r\n                                            y: allData[i].map(m => m[1]),\r\n                                            xaxis: 'x' + (index),\r\n                                            yaxis: 'y' + (index),\r\n                                            mode: 'lines',\r\n                                            name: 'Red',\r\n                                            fill: 'tozeroy',\r\n                                            line: {\r\n                                                color: this.indexToColor(i, unique_labels.length),\r\n                                                opacity: 0.7,\r\n                                                width: 3\r\n                                            }\r\n                                        })\r\n\r\n                                    }\r\n                                }\r\n\r\n                            } else {\r\n                                if (categorical_columns.includes(features[i])) {\r\n                                    let column_items = items.map(m => m[i]);\r\n                                    let unique_classes = [...new Set(column_items)];\r\n                                    let class_frequencies = []\r\n                                    for (let i = 0; i < unique_classes.length; i++) {\r\n                                        const class_label = unique_classes[i];\r\n                                        class_frequencies.push(column_items.filter(m => m === class_label).length)\r\n                                    }\r\n                                    traces.push({\r\n                                        x: unique_classes,\r\n                                        y: class_frequencies,\r\n                                        type: 'bar',\r\n                                        name: 'Trace 1',\r\n                                        xaxis: 'x' + (index),\r\n                                        yaxis: 'y' + (index),\r\n                                    })\r\n                                } else {\r\n                                    subsets.push(items.map(m => m[i]));\r\n                                    for (let i = 0; i < subsets.length; i++) {\r\n                                        if (subsets[i].length > 2) {\r\n                                            let ys = [];\r\n                                            let default_bandwidth = this.nrd(subsets[i]).toFixed(2);\r\n                                            breaks = equalIntervalBreaks(subsets[i], 100);\r\n                                            kde = kernelDensityEstimation(subsets[i], 'gaussian', 'nrd');\r\n                                            let data = [];\r\n                                            breaks.forEach((item) => {\r\n                                                ys.push(kde(item, default_bandwidth));\r\n                                                data.push([item, ys[ys.length - 1]]);\r\n                                            });\r\n                                            allData.push(data);\r\n                                        } else {\r\n                                            allData.push([]);\r\n                                        }\r\n                                    }\r\n                                    traces.push({\r\n                                        type: 'scatter',\r\n                                        x: allData[0].map(m => m[0]),\r\n                                        y: allData[0].map(m => m[1]),\r\n                                        mode: 'lines',\r\n                                        fill: 'tozeroy',\r\n                                        xaxis: 'x' + (index),\r\n                                        yaxis: 'y' + (index),\r\n                                        name: 'Red',\r\n                                        line: {\r\n                                            color: 'rgb(219, 64, 82)',\r\n                                            opacity: 0.7,\r\n                                            width: 3\r\n                                        }\r\n                                    })\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                        else if (i === features.length - 1) {\r\n                            traces.push({\r\n                                y: items.map(m => m[i]),\r\n                                x: items.map(m => m[j]),\r\n                                color: colors,\r\n                                marker: {\r\n                                    colorscale: 'Portland',\r\n                                    color: is_classification ? colors : labels,\r\n                                    opacity: 0.7,\r\n                                    size: 2,\r\n                                },\r\n                                type: 'scattergl',\r\n                                mode: 'markers',\r\n                                xaxis: 'x' + (index),\r\n                                yaxis: 'y' + (index),\r\n                            })\r\n                        } else if (j >= features.length - number_of_categoricals) {\r\n                            if (!is_classification) {\r\n                                traces.push({\r\n                                    x: [],\r\n                                    y: [],\r\n                                    mode: 'lines',\r\n                                    name: 'Trace 1'\r\n                                })\r\n                            } else {\r\n\r\n                                let boxplot_labels = [...new Set(items.map(m => m[j]))].sort((a, b) => a - b)\r\n                                let boxtraces = []\r\n                                for (let m = 0; m < unique_labels.length; m++) {\r\n                                    for (let n = 0; n < boxplot_labels.length; n++) {\r\n\r\n                                        let box_items = items.filter(item => item[j] === boxplot_labels[n] && item[features.length - 1] === unique_labels[m])\r\n                                        if (box_items) {\r\n                                            boxtraces.push({\r\n                                                y: box_items.map(item => item[i]),\r\n                                                marker: {\r\n                                                    color: this.indexToColor(m, unique_labels.length),\r\n                                                    size: 2,\r\n                                                    line: {\r\n                                                        outlierwidth: 0.3\r\n                                                    }\r\n                                                },\r\n                                                type: 'box',\r\n                                                xaxis: 'x' + (index),\r\n                                                yaxis: 'y' + (index),\r\n                                                line: {\r\n                                                    width: 0.5\r\n                                                }\r\n                                            })\r\n                                        }\r\n                                    }\r\n                                }\r\n                                if (j < features.length - 1) {\r\n                                    for (let i = 0; i < (boxtraces.length) / 2; i++) {\r\n                                        boxtraces[i]['x'] = Array(boxtraces[i]['y'].length).fill(i);\r\n                                        if (boxtraces[((boxtraces.length) / 2) + i]) {\r\n                                            boxtraces[((boxtraces.length) / 2) + i]['x'] = Array(boxtraces[i]['y'].length).fill(i + 0.5);\r\n                                        }\r\n                                    }\r\n                                    traces = traces.concat(boxtraces)\r\n                                } else {\r\n                                    traces = traces.concat(boxtraces)\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (j > i) {\r\n                                let arr1 = items.map(m => m[i])\r\n                                let arr2 = items.map(m => m[j])\r\n                                traces.push({\r\n                                    x: [1.5],\r\n                                    y: [1.5],\r\n                                    text: [corrcoeff(arr1, arr2).toFixed(2)],\r\n                                    mode: 'text',\r\n                                    textfont: {\r\n                                        size: 12, // Font size for the text\r\n                                        color: 'black'\r\n                                    },\r\n                                    xaxis: 'x' + (index),\r\n                                    yaxis: 'y' + (index),\r\n                                    type: 'scatter'\r\n                                });\r\n\r\n                            } else {\r\n                                traces.push({\r\n                                    y: items.map(m => m[i]),\r\n                                    x: items.map(m => m[j]),\r\n                                    color: colors,\r\n\r\n                                    type: 'scattergl',\r\n                                    mode: 'markers',\r\n                                    marker: {\r\n                                        colorscale: 'Portland',\r\n                                        color: is_classification ? colors : labels,\r\n                                        size: 2,\r\n                                    },\r\n                                    xaxis: 'x' + (index),\r\n                                    yaxis: 'y' + (index),\r\n                                })\r\n                            }\r\n                        }\r\n                        index++\r\n                    }\r\n\r\n                }\r\n\r\n                var layout = {\r\n                    width: features.length * 100,\r\n                    height: features.length * 100,\r\n                    spacing: 0,\r\n                    showlegend: false,\r\n                    boxmode: 'overlay',\r\n                    grid: { rows: features.length, xgap: 0.0, ygap: 0.0, columns: features.length, pattern: 'independent' },\r\n                    margin: { t: 20, r: 20 },\r\n\r\n                };\r\n                for (var i = 0; i < features.length; i++) {\r\n                    for (var j = 0; j < features.length; j++) {\r\n                        var xAxisKey = 'xaxis' + ((i * features.length) + j + 1);\r\n                        var yAxisKey = 'yaxis' + ((i * features.length) + j + 1);\r\n                        let fontSize = 10;\r\n                        layout[xAxisKey] = {\r\n                            linecolor: 'black',\r\n                            linewidth: 1,\r\n                            mirror: true,\r\n                            showgrid: false,\r\n                            showticklabels: false,\r\n                            tickfont: {\r\n                                size: fontSize\r\n                            },\r\n                        };\r\n                        layout[yAxisKey] = {\r\n                            linecolor: 'black',\r\n                            linewidth: 1,\r\n                            mirror: true,\r\n                            showgrid: false,\r\n                            showticklabels: false,\r\n                            tickfont: {\r\n                                size: fontSize\r\n                            },\r\n                        };\r\n                        if (i === features.length - 1) {\r\n                            layout[xAxisKey] = {\r\n                                linecolor: 'black',\r\n                                linewidth: 1,\r\n                                mirror: true,\r\n                                tickfont: {\r\n                                    size: fontSize\r\n                                },\r\n                                title: {\r\n                                    text: features[j], font: {\r\n                                        size: fontSize\r\n                                    },\r\n                                }\r\n                            };\r\n\r\n                        }\r\n                        if (j === 0) {\r\n                            layout[yAxisKey] = {\r\n                                linecolor: 'black',\r\n                                linewidth: 1,\r\n                                mirror: true,\r\n                                tickfont: {\r\n                                    size: fontSize\r\n                                },\r\n                                title: {\r\n                                    text: features[i], font: {\r\n                                        size: fontSize\r\n                                    },\r\n                                }\r\n                            };\r\n                        }\r\n                    }\r\n                }\r\n\r\n                Plotly.react('scatterplot_mtx', traces, layout, {\r\n                    ...plotlyImageExportConfig,\r\n                    staticPlot: true,\r\n                    modeBarButtonsToRemove: ['resetScale2d', 'select2d', 'resetViews', 'sendDataToCloud', 'hoverCompareCartesian', 'lasso2d', 'drawopenpath ']\r\n                })\r\n                resolve()\r\n            }, 1000);\r\n        })\r\n    }\r\n\r\n    KNNPerformancePlot(results, best_n, id, label = \"Accuracy\") {\r\n        let traces = []\r\n        traces.push({\r\n            x: results.map(m => m[1]),\r\n            y: results.filter(n => n[0] === 'manhattan').map(m => Number(m[2])),\r\n            mode: 'lines',\r\n            name: 'manhattan test set',\r\n            line: {\r\n                color: 'rgb(55, 128, 191)',\r\n                width: 2\r\n            }\r\n        });\r\n\r\n        traces.push({\r\n            x: results.map(m => m[1]),\r\n            y: results.filter(n => n[0] === 'euclidean').map(m => Number(m[2])),\r\n            mode: 'lines',\r\n            name: 'euclidean test set',\r\n            line: {\r\n                color: 'rgb(219, 64, 82)',\r\n                width: 2\r\n            }\r\n        });\r\n\r\n        var layout = {\r\n            showlegend: true,\r\n            legend: {\r\n                x: 0.1,\r\n                y: 0.2,\r\n                traceorder: 'normal',\r\n                orientation: \"h\",\r\n                font: {\r\n                    size: 12,\r\n                },\r\n                bgcolor: 'rgba(0,0,0,0)',\r\n            },\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: 'K',\r\n                },\r\n            },\r\n            yaxis: {\r\n                range: [0, 1],\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: label,\r\n                }\r\n            },\r\n            shapes: [\r\n                {\r\n                    type: 'line',\r\n                    x0: best_n,\r\n                    y0: 0,\r\n                    x1: best_n,\r\n                    y1: 1,\r\n                    line: {\r\n                        dash: 'dot',\r\n                        color: 'rgb(55, 128, 191)',\r\n                        width: 1\r\n                    }\r\n                },]\r\n        };\r\n        Plotly.newPlot(\"knn_table_\" + id, traces, layout, { responsive: true });\r\n    }\r\n    KNNPerformancePlotRegression(results, optimalTrainSpec, optimalTestSpec, id) {\r\n        let traces = []\r\n        traces.push({\r\n            x: results.map(m => m.k),\r\n            y: results.filter(n => n.metric === 'manhattan').map(m => Number((m.evaluation).toFixed(2))),\r\n            mode: 'lines',\r\n            name: 'manhattan test set',\r\n            line: {\r\n                color: 'rgb(55, 128, 191)',\r\n                width: 2\r\n            }\r\n        });\r\n\r\n        traces.push({\r\n            x: results.map(m => m.k),\r\n            y: results.filter(n => n.metric === 'euclidean').map(m => Number((m.evaluation).toFixed(2))),\r\n            mode: 'lines',\r\n            name: 'euclidean test set',\r\n            line: {\r\n                color: 'rgb(219, 64, 82)',\r\n                width: 2\r\n            }\r\n        });\r\n        traces.push({\r\n            x: results.map(m => m.k),\r\n            y: results.filter(n => n.metric === 'manhattan').map(m => Number((m.evaluation_train).toFixed(2))),\r\n            mode: 'lines',\r\n            name: 'manhattan train set',\r\n            line: {\r\n                color: 'rgb(55, 128, 191)',\r\n                width: 1\r\n            }\r\n        });\r\n        traces.push({\r\n            x: results.map(m => m.k),\r\n            y: results.filter(n => n.metric === 'euclidean').map(m => Number((m.evaluation_train).toFixed(2))),\r\n            mode: 'lines',\r\n            name: 'euclidean train set',\r\n            line: {\r\n                color: 'rgb(219, 64, 82)',\r\n                width: 1\r\n            }\r\n        });\r\n        var min_y = Number.POSITIVE_INFINITY;\r\n        var max_y = Number.NEGATIVE_INFINITY;\r\n        traces.forEach(trace => {\r\n            let min = Math.min(...trace.y)\r\n            let max = Math.max(...trace.y)\r\n            if (min < min_y) {\r\n                min_y = min\r\n            }\r\n            if (max > max_y) {\r\n                max_y = max\r\n            }\r\n\r\n        })\r\n        var layout = {\r\n            showlegend: true,\r\n            legend: {\r\n                x: 0.1,\r\n                y: 0.2,\r\n                traceorder: 'normal',\r\n                orientation: \"h\",\r\n                font: {\r\n                    size: 10,\r\n                },\r\n                bgcolor: 'rgba(0,0,0,0)',\r\n            },\r\n            xaxis: {\r\n                title: {\r\n                    text: 'K',\r\n                },\r\n            },\r\n            yaxis: {\r\n                title: {\r\n                    text: 'MSE',\r\n                }\r\n            },\r\n            shapes: [\r\n                {\r\n                    type: 'line',\r\n                    x0: optimalTrainSpec.k,\r\n                    y0: min_y,\r\n                    x1: optimalTrainSpec.k,\r\n                    y1: max_y,\r\n                    line: {\r\n                        color: 'rgb(55, 128, 191)',\r\n                        width: 1\r\n                    }\r\n                }, {\r\n                    type: 'line',\r\n                    x0: optimalTestSpec.k,\r\n                    y0: min_y,\r\n                    x1: optimalTestSpec.k,\r\n                    y1: max_y,\r\n                    line: {\r\n                        color: 'rgb(55, 128, 191)',\r\n                        width: 1\r\n                    }\r\n                },]\r\n        };\r\n        Plotly.newPlot(\"knn_table_\" + id, traces, layout);\r\n    }\r\n    correaltoinMatrixColorscale(correlations) {\r\n        let featuresCount = correlations[0].length;\r\n        let corrs = [];\r\n\r\n        for (let i = 0; i < featuresCount; i++) {\r\n            corrs.push(...correlations[i])\r\n        }\r\n        corrs.sort()\r\n        let countNegatives = 0\r\n        for (let i = 0; i < corrs.length; i++) {\r\n            if (corrs[i] < 0) {\r\n                countNegatives += 1\r\n            } else {\r\n                break\r\n            }\r\n        }\r\n\r\n        let portionOfNegativeValues = Math.round(((countNegatives - 1) / corrs.length) * 100) / 100\r\n\r\n        let colorscale = [\r\n            [0, 'rgb(0, 0, 100)'],\r\n            [portionOfNegativeValues, 'rgb(161, 161, 255)'],\r\n            [portionOfNegativeValues + 0.001, 'rgb(253, 237, 237)'],\r\n            [1.0, 'rgb(255, 0, 0)']\r\n        ]\r\n        return colorscale\r\n    }\r\n    async correlationHeatmap(id, correlations, names) {\r\n\r\n        var data = [\r\n            {\r\n                z: correlations,\r\n                x: names,\r\n                y: names,\r\n                type: 'heatmap',\r\n                zmin: -1,\r\n                zmax: 1,\r\n                hoverongaps: false,\r\n                colorscale: [\r\n                    [0, 'rgb(74,141,255)'],\r\n                    [0.10, 'rgb(102,151,255)'],\r\n                    [0.20, 'rgb(121,170,255)'],\r\n                    [0.30, 'rgb(137,187,255)'],\r\n                    [0.40, 'rgb(205,221,255)'],\r\n                    [0.50, 'rgb(255,255,255)'],\r\n                    [0.51, 'rgb(253, 237, 237)'],\r\n                    [0.6, 'rgb(255,169,169)'],\r\n                    [0.75, 'rgb(249,100,100)'],\r\n                    [0.95, 'rgb(225,0,0)'],\r\n                    [1.0, 'rgb(165,0,0)']\r\n                ],\r\n                showscale: false,\r\n            }\r\n        ];\r\n        var layout = {\r\n\r\n            annotations: [],\r\n            font: {\r\n                size: 10\r\n            },\r\n            xaxis: {\r\n                ticks: '',\r\n                side: 'bottom',\r\n                tickangle: -90,\r\n            },\r\n            yaxis: {\r\n                autorange: \"reversed\",\r\n                tickangle: -45,\r\n                ticks: '',\r\n                ticksuffix: ' ',\r\n            },\r\n            autosize: true,\r\n\r\n        };\r\n        for (var i = 0; i < names.length; i++) {\r\n            for (var j = names.length - 1; j >= 0; j--) {\r\n                var currentValue = correlations[i][j];\r\n                let textColor\r\n                if (currentValue <= 0.0) {\r\n                    textColor = 'black';\r\n                } else {\r\n                    textColor = 'black';\r\n                }\r\n                var result = {\r\n                    xref: 'x1',\r\n                    yref: 'y1',\r\n                    x: names[i],\r\n                    y: names[j],\r\n                    text: currentValue.toFixed(2),\r\n                    font: {\r\n                        family: 'Arial',\r\n                        size: 8,\r\n                        color: textColor\r\n                    },\r\n                    showarrow: false,\r\n                };\r\n                layout.annotations.push(result);\r\n            }\r\n        }\r\n\r\n        await Plotly.newPlot(id, data, layout, { ...plotlyImageExportConfig, responsive: true });\r\n    }\r\n    async dendogramPlot(id, correlations, linkage, names, originalColumns) {\r\n\r\n        var trace4 = {\r\n            x: names,\r\n            y: names,\r\n            z: correlations,\r\n            type: 'heatmap',\r\n            zmin: -1,\r\n            zmax: 1,\r\n            hoverongaps: false,\r\n            colorscale: [\r\n                [0, 'rgb(74,141,255)'],\r\n                [0.10, 'rgb(102,151,255)'],\r\n                [0.20, 'rgb(121,170,255)'],\r\n                [0.30, 'rgb(137,187,255)'],\r\n                [0.40, 'rgb(205,221,255)'],\r\n                [0.50, 'rgb(255,255,255)'],\r\n                [0.51, 'rgb(253, 237, 237)'],\r\n                [0.6, 'rgb(255,169,169)'],\r\n                [0.75, 'rgb(249,100,100)'],\r\n                [0.95, 'rgb(225,0,0)'],\r\n                [1.0, 'rgb(165,0,0)']\r\n            ],\r\n            xaxis: 'x',\r\n            yaxis: 'y',\r\n            colorbar: {\r\n                thickness: 10,\r\n                len: 0.5,\r\n            }\r\n        };\r\n        let indices = []\r\n        let linksLength = linkage.length + 1;\r\n        let currentLimitY = 0;\r\n        let prevLimitY = 0;\r\n        let clusterY = 0\r\n        let clusterX = 0\r\n        for (let i = 0; i < originalColumns.length; i++) {\r\n            indices.push(names.findIndex(name => name == originalColumns[i]))\r\n        }\r\n        let tickValues = []\r\n        for (let i = 0; i < linksLength; i++) {\r\n            tickValues.push((i + 1) * 10)\r\n        }\r\n\r\n        let dendrogramUP = {\r\n            'data': [],\r\n            'layout': {\r\n                'width': '100%', 'showlegend': false,\r\n                'xaxis': {\r\n                    'showticklabels': true, 'tickmode': 'array', 'ticks': 'outside',\r\n                    'showgrid': false, 'mirror': 'allticks', 'zeroline': false, 'showline': true, 'rangemode': 'tozero',\r\n                    'type': 'linear'\r\n                }, 'yaxis': {\r\n                    'showticklabels': true, 'ticks': 'outside', 'showgrid': false, 'mirror': 'allticks', 'zeroline':\r\n                        false, 'showline': true, 'rangemode': 'tozero', 'type': 'linear'\r\n                }, 'hovermode': 'closest', 'autosize': false, 'height': '100%'\r\n            }\r\n        }\r\n\r\n        let dendrogramRIGHT = {\r\n            'data': [],\r\n            'layout': {\r\n                'width': '100%', 'showlegend': false,\r\n                'xaxis': {\r\n                    'showticklabels': true, 'ticks': 'outside', 'showgrid': false, 'mirror': 'allticks', 'zeroline': false, 'showline': true,\r\n                    'rangemode': 'tozero', 'type': 'linear'\r\n                }, 'yaxis': {\r\n                    'showticklabels': true, 'tickmode': 'array', 'ticks': 'outside', 'showgrid': false,\r\n                    'mirror': 'allticks', 'zeroline': false, 'showline': true, 'rangemode': 'tozero',\r\n                    'type': 'linear'\r\n                }, 'hovermode': 'closest', 'autosize': false,\r\n                'height': '100%'\r\n            }\r\n        }\r\n        let history = {}\r\n\r\n        linkage.forEach((link, i) => {\r\n            let l0, l1;\r\n            if (indices[link[0]] + 1) {\r\n                l0 = indices[link[0]] + 1 ?? link[0] + 1\r\n            }\r\n            if (indices[link[1]] + 1) {\r\n                l1 = indices[link[1]] + 1 ?? link[1] + 1\r\n            }\r\n            if (currentLimitY == 0) {\r\n                currentLimitY = (parseFloat(i + 1) / linksLength);\r\n            }\r\n            if (l0 <= linksLength && l1 <= linksLength) {\r\n                clusterX = ((l0 * (Math.max(...tickValues) / linksLength) + l1 * (Math.max(...tickValues) / linksLength)) / 2)\r\n                dendrogramUP.data.push({\r\n                    'yaxis': 'y2', 'x': [l0 * 10, l0 * 10, l1 * 10, l1 * 10],\r\n                    'mode': 'lines', 'xaxis': 'x', 'marker': { 'color': `${this.indexToColor(i)}` },\r\n                    'y': [\r\n                        prevLimitY, currentLimitY,\r\n                        currentLimitY, prevLimitY\r\n                    ],\r\n                    'type': 'scatter'\r\n                })\r\n\r\n            } else {\r\n                prevLimitY = l0 <= linksLength ? currentLimitY : history[link[0]]?.y_current;\r\n                currentLimitY = (parseFloat(i + 1) / linksLength);\r\n                let x = [\r\n                    (l0 <= linksLength ? l0 * 10. : history[link[0]]?.x),\r\n                    (l0 <= linksLength ? l0 * 10. : history[link[0]]?.x),\r\n                    (l1 <= linksLength ? l1 * 10. : history[link[1]]?.x),\r\n                    (l1 <= linksLength ? l1 * 10. : history[link[1]]?.x),\r\n                ]\r\n                let y = [\r\n                    history[link[0]]?.y_current ?? 0, currentLimitY,\r\n                    currentLimitY, history[link[1]]?.y_current ?? 0\r\n                ]\r\n                dendrogramUP.data.push({\r\n                    'yaxis': 'y2', 'x': x,\r\n                    'mode': 'lines', 'xaxis': 'x', 'marker': { 'color': `${this.indexToColor(i)}` },\r\n                    'y': y,\r\n                    'type': 'scatter'\r\n                })\r\n                clusterX = x.reduce((prev, curr) => prev + curr, 0) / 4;\r\n\r\n            }\r\n            history[linksLength + i] = { x: clusterX, y_current: currentLimitY }\r\n\r\n        })\r\n\r\n\r\n\r\n        let currentLimitX = 0;\r\n        let prevLimitX = 0;\r\n        history = []\r\n        linkage.forEach((link, i) => {\r\n            let l0 = indices[link[0]] + 1\r\n            let l1 = indices[link[1]] + 1\r\n\r\n            if (currentLimitX == 0) {\r\n                currentLimitX = (parseFloat(i + 1) / linksLength);\r\n            }\r\n            if (l0 <= linksLength && l1 <= linksLength) {\r\n                clusterY = ((l0 * -10 + l1 * -10) / 2) - 2\r\n                dendrogramRIGHT.data.push({\r\n                    'yaxis': 'y', 'y': [l0 * -10, l0 * -10, l1 * -10, l1 * -10],\r\n                    'mode': 'lines', 'xaxis': 'x2', 'marker': { 'color': `${this.indexToColor(i)}` },\r\n                    'x': [\r\n                        prevLimitX, currentLimitX,\r\n                        currentLimitX, prevLimitX\r\n                    ],\r\n                    'type': 'scatter'\r\n                })\r\n            } else {\r\n                prevLimitX = l0 <= linksLength ? currentLimitX : history[link[0]].x;\r\n                currentLimitX = (parseFloat(i + 1) / linksLength);\r\n                let y = [\r\n                    (l0 <= linksLength ? l0 * -10. : history[link[0]]?.y),\r\n                    (l0 <= linksLength ? l0 * -10. : history[link[0]]?.y),\r\n                    (l1 <= linksLength ? l1 * -10. : history[link[1]]?.y),\r\n                    (l1 <= linksLength ? l1 * -10. : history[link[1]]?.y),\r\n                ]\r\n                dendrogramRIGHT.data.push({\r\n                    'yaxis': 'y', 'y': y,\r\n                    'mode': 'lines', 'xaxis': 'x2', 'marker': { 'color': `${this.indexToColor(i)}` },\r\n                    'x': [\r\n                        history[link[0]]?.x ?? 0, currentLimitX,\r\n                        currentLimitX, history[link[1]]?.x ?? 0\r\n                    ],\r\n                    'type': 'scatter'\r\n                })\r\n                clusterY = y.reduce((prev, curr) => prev + curr, 0) / 4\r\n            }\r\n            history[linksLength + i] = { y: clusterY, x: currentLimitX }\r\n        })\r\n\r\n        var layout2 = {\r\n            annotations: [],\r\n            font: {\r\n                size: 10\r\n            },\r\n            autosize: true,\r\n\r\n            yaxis: {\r\n                domain: [0, 0.75],\r\n                mirror: false,\r\n                showgrid: false,\r\n                showline: false,\r\n                zeroline: false,\r\n                showticklabels: true,\r\n                ticks: \"\",\r\n                tickvals: tickValues.map(tick => -tick),\r\n                ticktext: names,\r\n                tickangle: -45,\r\n\r\n            },\r\n            xaxis: {\r\n                domain: [0, 0.75],\r\n                mirror: false,\r\n                showgrid: false,\r\n                showline: false,\r\n                zeroline: false,\r\n                showticklabels: true,\r\n                ticks: \"\",\r\n                tickvals: tickValues,\r\n                ticktext: names,\r\n                tickangle: -90,\r\n\r\n            },\r\n            xaxis2: {\r\n                domain: [0.75, 1],\r\n                mirror: false,\r\n                showgrid: false,\r\n                showline: false,\r\n                zeroline: false,\r\n                showticklabels: false,\r\n                ticks: \"\",\r\n                ticktext: names,\r\n            },\r\n            yaxis2: {\r\n                domain: [0.75, 1],\r\n                mirror: false,\r\n                showgrid: false,\r\n                showline: false,\r\n                zeroline: false,\r\n                showticklabels: false,\r\n                ticktext: names,\r\n            },\r\n            showlegend: false,\r\n            coloraxis: {\r\n                colorscale: 'YlGnBu',\r\n                showscale: true,\r\n                cmin: -1,\r\n                cmax: 1\r\n            },\r\n            margin: { l: 60, r: 30, b: 60, t: 30 },\r\n\r\n        };\r\n        for (var i = 0; i < names.length; i++) {\r\n            for (var j = names.length - 1; j >= 0; j--) {\r\n                var currentValue = correlations[i][j];\r\n                let textColor\r\n                if (currentValue <= 0.0) {\r\n                    textColor = 'black';\r\n                } else {\r\n                    textColor = 'black';\r\n                }\r\n                var result = {\r\n                    xref: 'x',\r\n                    yref: 'y',\r\n                    x: tickValues[i],\r\n                    y: -tickValues[j],\r\n                    text: currentValue.toFixed(2),\r\n                    font: {\r\n                        family: 'Arial',\r\n                        size: 8,\r\n                        color: textColor\r\n                    },\r\n                    showarrow: false,\r\n                };\r\n                layout2.annotations.push(result);\r\n            }\r\n        }\r\n        let data = dendrogramUP['data']\r\n        data = data.concat(dendrogramRIGHT['data'])\r\n\r\n        trace4['x'] = tickValues\r\n        trace4['y'] = tickValues.map(tick => -tick)\r\n\r\n        data = data.concat(trace4)\r\n\r\n        Plotly.newPlot(id, data, layout2, { ...plotlyImageExportConfig, responsive: true });\r\n    }\r\n    PFIBoxplot(id, importances, columns) {\r\n        let traces = []\r\n        let avgs = []\r\n        importances.forEach(importance => {\r\n            const importancesMean = importance.reduce((a, b) => a + b, 0)\r\n            avgs.push((importancesMean / importance.length))\r\n        });\r\n        let max = Math.max(...avgs)\r\n        let min = Math.min(...avgs)\r\n\r\n        importances.forEach((importance, index) => {\r\n\r\n            traces.push(\r\n                {\r\n                    x: Array.from(importance),\r\n                    type: 'box',\r\n                    name: columns[index],\r\n                    marker: { color: this.indexToColor(index, importances.length) },\r\n                }\r\n            )\r\n        });\r\n        var layout = {\r\n            title: {\r\n                text: 'Permutation Feature Importance',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            showlegend: false,\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                zeroline: false,\r\n\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                automargin: true,\r\n                zeroline: false,\r\n\r\n            },\r\n        };\r\n\r\n        Plotly.newPlot('pfi_boxplot_' + id, traces, layout, { responsive: true });\r\n    }\r\n    plotPDP(id, averages, grids, labels, columns, categorical_columns) {\r\n        let pfiChartId = 'pdp_containers_' + id;\r\n        id = 'pdp_plot_' + id\r\n\r\n        grids.forEach((grid, i) => {\r\n            let element = document.getElementById(pfiChartId);\r\n            let chartContainer = document.createElement(\"div\");\r\n            chartContainer.classList.add(\"column\", \"is-6\");\r\n            let chartId = id + '_' + i;\r\n            chartContainer.id = chartId\r\n            chartContainer.style.height = \"400px\";\r\n            element.after(chartContainer)\r\n            let traces = []\r\n            const isCategorical = categorical_columns.includes(columns[i])\r\n            averages[i].forEach((average, index) => {\r\n                if (isCategorical) {\r\n                    traces.push(\r\n                        {\r\n                            x: grid,\r\n                            y: Array.from(average),\r\n                            type: 'bar',\r\n                            name: labels[index],\r\n                            marker: { color: this.indexToColor(index, averages[i].length) }\r\n                        }\r\n                    )\r\n                } else {\r\n                    traces.push(\r\n                        {\r\n                            x: grid,\r\n                            y: Array.from(average),\r\n                            mode: 'line',\r\n                            name: labels[index],\r\n                            marker: { color: this.indexToColor(index, averages[i].length) }\r\n                        }\r\n                    )\r\n                }\r\n\r\n            });\r\n            var layout = {\r\n\r\n                title: {\r\n                    text: 'Partial Dependence Plot - ' + columns[i],\r\n                    font: {\r\n                        size: 14\r\n                    },\r\n                    xref: 'paper',\r\n                    x: 0.05,\r\n                },\r\n                legend: { \"orientation\": \"h\" },\r\n\r\n                font: {\r\n                    size: 10\r\n                },\r\n                autosize: true,\r\n                xaxis: {\r\n                    linecolor: 'black',\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    zeroline: false,\r\n                },\r\n                yaxis: {\r\n                    linecolor: 'black',\r\n                    zeroline: false,\r\n                    linewidth: 1,\r\n                    mirror: true,\r\n                    title: {\r\n                        text: 'Prediction',\r\n                    }\r\n                },\r\n            };\r\n\r\n            Plotly.newPlot(chartId, traces, layout, { ...plotlyImageExportConfig, responsive: true });\r\n        });\r\n    }\r\n    plotPDPRegression(id, averages, grids, labels, columns, categoricals) {\r\n        let pfiChartId = 'pfi_boxplot_' + id;\r\n        let element = document.getElementById(pfiChartId);\r\n        let chartContainer = document.createElement(\"div\");\r\n        chartContainer.classList.add(\"column\", \"is-6\");\r\n        const chartId = id + '_number';\r\n        chartContainer.id = chartId\r\n        chartContainer.style.height = \"400px\";\r\n        element.after(chartContainer);\r\n        element = document.getElementById(chartId);\r\n\r\n        chartContainer = document.createElement(\"div\");\r\n        chartContainer.classList.add(\"column\", \"is-6\");\r\n        const chartIdCategorical = id + '_class';\r\n        chartContainer.id = chartIdCategorical\r\n        chartContainer.style.height = \"400px\";\r\n        element.after(chartContainer);\r\n\r\n        let traces = []\r\n        let traces_categoricals = []\r\n        let allxs = []\r\n        // grids.forEach((grid, i) => {\r\n        //     if (!categoricals.includes(columns[i])) {\r\n        //         allxs = allxs.concat(grid)\r\n        //     }\r\n        // })\r\n        // scaler.fit(allxs)\r\n        grids.forEach((grid, i) => {\r\n            if (!categoricals.includes(columns[i])) {\r\n                averages[i].forEach((average, index) => {\r\n                    let scaler = new MinMaxScaler();\r\n                    scaler.fit(grid)\r\n                    // let xs = scaler.transform(grid)\r\n                    let xs = grid\r\n\r\n                    traces.push(\r\n                        {\r\n                            x: xs,\r\n                            y: Array.from(average),\r\n                            mode: 'line',\r\n                            name: columns[i],\r\n                            marker: { color: this.indexToColor(i, averages.length) }\r\n                        }\r\n                    )\r\n                });\r\n            } else {\r\n                averages[i].forEach((average, index) => {\r\n                    traces_categoricals.push(\r\n                        {\r\n                            x: grid,\r\n                            y: Array.from(average),\r\n                            type: 'bar',\r\n                            name: columns[i],\r\n                            marker: { color: this.indexToColor(i, averages.length), opacity: 0.7 }\r\n                        }\r\n                    )\r\n                });\r\n            }\r\n\r\n        });\r\n        var layout = {\r\n            title: {\r\n                text: 'Partial Dependence Plot',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            legend: {\r\n                x: 0.1,\r\n                y: 1,\r\n                orientation: \"h\",\r\n                font: {\r\n                    size: 8\r\n                },\r\n                bgcolor: 'rgba(0,0,0,0)',\r\n            },\r\n\r\n            font: {\r\n                size: 10\r\n            },\r\n            autosize: true,\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                zeroline: false,\r\n                title: {\r\n                    text: 'Feature',\r\n                }\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                zeroline: false,\r\n                title: {\r\n                    text: 'Prediction',\r\n                }\r\n            },\r\n        };\r\n        Plotly.newPlot(chartId, traces, layout, { ...plotlyImageExportConfig, responsive: true });\r\n        var layout2 = {\r\n            title: {\r\n                text: 'Partial Dependence Plot',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n\r\n            barmode: 'group',\r\n            font: {\r\n                size: 10\r\n            },\r\n            autosize: true,\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: 'Feature',\r\n                }\r\n            },\r\n            bargap: 0.05,\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                title: {\r\n                    text: 'Prediction',\r\n                }\r\n            },\r\n        };\r\n\r\n        Plotly.newPlot(chartIdCategorical, traces_categoricals, layout2);\r\n    }\r\n    drawAutoencoder(points, xIndex = 1, yIndex = 0, labels, is_classification) {\r\n        labels = labels.map(l => l[0])\r\n        let colors = [];\r\n        if (is_classification) {\r\n            var uniqueLabels = [...new Set(labels)];\r\n            colors = points.map((_, i) => this.indexToColor(uniqueLabels.indexOf(labels[i]), uniqueLabels.length))\r\n        } else {\r\n            let min = Math.min(...labels);\r\n            let max = Math.max(...labels);\r\n            colors = labels.map(label => this.indexToColorSequential(label, min, max))\r\n        }\r\n        var trace1 = {\r\n            x: points.map(point => point[xIndex]),\r\n            y: points.map(point => point[yIndex]),\r\n            mode: 'markers',\r\n            type: 'scatter',\r\n            marker: {\r\n                size: 3,\r\n                color: colors\r\n            }\r\n        };\r\n\r\n        var data = [trace1];\r\n\r\n        var layout = {\r\n            legend: {\r\n                y: 0.5,\r\n                yref: 'paper',\r\n                font: {\r\n                    family: 'Arial, sans-serif',\r\n                    size: 20,\r\n                    color: 'grey',\r\n                }\r\n            },\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                zeroline: false,\r\n\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                zeroline: false,\r\n                mirror: true,\r\n            },\r\n            margin: {\r\n                l: 50,\r\n                r: 40,\r\n                b: 50,\r\n                t: 40,\r\n                pad: 20\r\n            },\r\n        };\r\n\r\n        Plotly.newPlot('autoencoder', data, layout);\r\n    }\r\n    plotROC(id, fprs, tprs, labels, auc) {\r\n\r\n        let traces = []\r\n        fprs.forEach((fpr, index) => {\r\n            traces.push(\r\n                {\r\n                    x: fpr,\r\n                    y: tprs[index],\r\n                    mode: 'line',\r\n                    name: labels[index],\r\n                    marker: { color: this.indexToColor(index, labels.length) }\r\n                }\r\n            )\r\n        });\r\n        traces.push(\r\n            {\r\n                x: [0, 1],\r\n                y: [0, 1],\r\n                mode: 'line',\r\n                name: 'Chance Line',\r\n                marker: { color: 'black' },\r\n                line: {\r\n                    dash: 'dot',\r\n                    width: 1\r\n                }\r\n            }\r\n        )\r\n        var layout = {\r\n            title: {\r\n                text: (labels.length > 2 ? ' One-vs-Rest Strategy ROC Curve' : 'ROC Curve') + ' AUC: ' + (+auc).toFixed(2),\r\n                font: {\r\n                    size: 14\r\n                },\r\n            },\r\n            margin: {\r\n                b: 40,\r\n            },\r\n            legend: {\r\n                x: 1,\r\n                xanchor: 'right',\r\n                y: 0.1,\r\n                bgcolor: 'rgba(0,0,0,0)',\r\n\r\n            },\r\n            showlegend: true,\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                range: [-0.1, 1.1],\r\n                mirror: true,\r\n                title: {\r\n                    text: 'False positive rate',\r\n                },\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n                range: [-0.1, 1.1],\r\n                title: {\r\n                    text: 'True positive rate',\r\n                }\r\n            },\r\n        };\r\n\r\n        Plotly.newPlot('roc_plot_' + id, traces, layout, { responsive: true });\r\n    }\r\n\r\n    uniformSplist(n) {\r\n        let numbers = []\r\n        for (let i = 0; i < n; i++) {\r\n            numbers.push(i / (n - 1))\r\n        }\r\n        return numbers;\r\n    }\r\n    parallelCoordinatePlot(features, labels, column_names, is_classification) {\r\n        let labelEncoder = new LabelEncoder()\r\n        if (is_classification) {\r\n            labelEncoder.fit(labels)\r\n            labels = labelEncoder.transform(labels)\r\n        }\r\n        var uniqueLabels = [...new Set(labels)];\r\n        if (uniqueLabels.length === 2) {\r\n            uniqueLabels.sort()\r\n        }\r\n        console.log('pc labels', uniqueLabels);\r\n\r\n        let points = this.uniformSplist(uniqueLabels.length)\r\n        let colorMapping = uniqueLabels.map((label, i) => [points[i], this.indexToColor(uniqueLabels.indexOf(label), uniqueLabels.length)])\r\n\r\n        var data = [{\r\n            type: 'parcoords',\r\n            pad: [20, 20, 20, 20],\r\n            line: {\r\n                color: labels,\r\n                colorscale: is_classification ? colorMapping : 'jet',\r\n            },\r\n            dimensions: []\r\n        }];\r\n\r\n        column_names.forEach((column_name, i) => {\r\n            data[0].dimensions.push({\r\n                label: column_name,\r\n                values: features.map(m => m[i])\r\n            })\r\n\r\n        })\r\n        var layout = {\r\n            title: {\r\n                text: 'Parallel Coordinate Plot',\r\n                font: {\r\n                    size: 14\r\n                },\r\n                xref: 'paper',\r\n                x: 0.05,\r\n            },\r\n            xaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n            },\r\n            yaxis: {\r\n                linecolor: 'black',\r\n                linewidth: 1,\r\n                mirror: true,\r\n            },\r\n        };\r\n\r\n        Plotly.newPlot('parallel_coordinate_plot', data, layout, { ...plotlyImageExportConfig, responsive: true, modeBarButtonsToRemove: ['resetScale2d', 'select2d', 'resetViews', 'sendDataToCloud', 'hoverCompareCartesian', 'lasso2d', 'drawopenpath '] });\r\n    }\r\n}","/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-undef */\r\n\r\nimport { MinMaxScaler, StandardScaler } from 'danfojs';\r\nimport { encode_name } from './utils';\r\nimport { FeatureCategories, Settings } from \"./settings.js\";\r\nexport default class UI {\r\n    constructor(parser, chart_controller) {\r\n        this.data_parser = parser\r\n        this.chart_controller = chart_controller\r\n    }\r\n\r\n    get_model_settings() {\r\n        let model_settings = {};\r\n        let model_name = parseInt(document.getElementById('model_name').value);\r\n        const target = document.getElementById(\"target\").value;\r\n        let is_classification = document.getElementById(target).value !== FeatureCategories.Numerical;\r\n        var model;\r\n        if (is_classification) {\r\n            for (const m in Settings.classification) {\r\n                if (Settings.classification[m].value === model_name) {\r\n                    model_name = m\r\n                    model_settings.name = Settings.classification[m].label\r\n                    model = Settings.classification[model_name];\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            for (const m in Settings.regression) {\r\n                if (Settings.regression[m].value === model_name) {\r\n                    model_name = m\r\n                    model_settings.name = Settings.regression[m].label\r\n                    model = Settings.regression[model_name];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        model_name = parseInt(document.getElementById('model_name').value);\r\n        for (const option in model?.options) {\r\n            if (model.options[option].type === \"select\") {\r\n                let option_value = document.getElementById(option + \"_\" + model_name)?.value;\r\n                model_settings[option] = option_value ?? model.options[option].default\r\n            } else {\r\n                if (model.options[option].type === \"number\") {\r\n                    let option_value = document.getElementById(option + \"_\" + model_name)?.value;\r\n                    model_settings[option] = !option_value ? model.options[option].default : parseFloat(option_value)\r\n                } else {\r\n                    let option_value = document.getElementById(option + \"_\" + model_name)?.value;\r\n                    model_settings[option] = option_value ?? model.options[option].default\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return model_settings\r\n    }\r\n\r\n    scale_data(dataset, column, normalization_type) {\r\n        switch (normalization_type) {\r\n            case \"1\": {\r\n                let scaler = new MinMaxScaler()\r\n                scaler.fit(dataset[column])\r\n                dataset.addColumn(column, scaler.transform(dataset[column]), { inplace: true })\r\n                break;\r\n            }\r\n            case \"2\":\r\n                dataset.addColumn(column, dataset[column].apply((x) => x * x), { inplace: true })\r\n                break;\r\n            case \"3\":\r\n                dataset.addColumn(column, dataset[column].apply((x) => Math.log(x)), { inplace: true })\r\n                break;\r\n            case \"4\": {\r\n                let scaler = new StandardScaler()\r\n                scaler.fit(dataset[column])\r\n                dataset.addColumn(column, scaler.transform(dataset[column]), { inplace: true })\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    createAlgorithmsSelect(category) {\r\n        let result = '<div id=\"algorithm\" class=\"column is-9\"><div class=\"select is-small mb-1\"> <select id=\"model_name\" class=\"select\">'\r\n        const label = category == 1 ? \"regression\" : \"classification\"\r\n        for (const key in Settings[label]) {\r\n            if (Settings.hasOwnProperty.call(Settings[label], key)) {\r\n                const item = Settings[label][key];\r\n                result += `<option value=\"${item.value}\">${item.label}</option>`\r\n            }\r\n        }\r\n        result += '</select></div></div>'\r\n\r\n        return result\r\n    }\r\n    updateAlgorithmsSelect(category) {\r\n        let result = '<div class=\"select is-small mb-1\"> <select id=\"model_name\" class=\"select\">'\r\n        const label = category == 1 ? \"regression\" : \"classification\"\r\n        for (const key in Settings[label]) {\r\n            if (Settings.hasOwnProperty.call(Settings[label], key)) {\r\n                const item = Settings[label][key];\r\n                result += `<option value=\"${item.value}\">${item.label}</option>`\r\n            }\r\n        }\r\n        result += '</select></div>'\r\n        return result\r\n    }\r\n\r\n    find_selected_columns(columns, get_all = false) {\r\n        const selected_columns = [];\r\n        columns.forEach(column => {\r\n            let key = encode_name(column)\r\n            if (document.getElementById(key + '-checkbox').checked || get_all) {\r\n                selected_columns.push(column);\r\n            }\r\n        });\r\n        return selected_columns;\r\n    }\r\n    find_selected_columns_types(columns, include_target = true) {\r\n        if (include_target === false) {\r\n            const target = document.getElementById(\"target\").value;\r\n            columns = columns.filter(column => column !== target)\r\n        }\r\n        const column_types = []\r\n        columns.forEach(column => {\r\n            let key = encode_name(column)\r\n            column_types.push({\r\n                name: column,\r\n                type: document.getElementById(key).value\r\n            })\r\n        });\r\n        return column_types\r\n    }\r\n    createTargetDropdown(items) {\r\n        let result = '<div  class=\"column is-12\"><div class=\"label is-size-7\">Target</div><div class=\"select is-fullwidth is-small mb-1\"> <select id=\"target\">'\r\n        items.columns.forEach(column => {\r\n            let key = encode_name(column)\r\n            result += `<option value=\"${key}\">${key}</option>`\r\n\r\n        });\r\n        result += '</select></div></div>'\r\n        return result\r\n    }\r\n    createFeaturesDropdown(items) {\r\n        let result = '<div  class=\"column is-4\"><h4>Target</h4><div class=\"select mb-1\"> <select class=\"select\" id=\"kde_feature\">'\r\n        for (const key in items) {\r\n            result += `<option value=\"${key}\">${key}</option>`\r\n        }\r\n        result += '</select></div></div>'\r\n        return result\r\n    }\r\n    insertSpaces(string) {\r\n        string = string.replace(/([a-z])([A-Z])/g, '$1 $2');\r\n        string = string.replace(/([A-Z])([A-Z][a-z])/g, '$1 $2')\r\n        return string;\r\n    }\r\n    renderDatasetStats(data, continuousFeatures, categoricalFeatures) {\r\n        //build numerical feature table table\r\n        let continuousFeaturesStats = []\r\n        let categoricalFeaturesStats = []\r\n\r\n        const continuousHeaders =\r\n            [{ field: 'name', label: '#' }, { field: 'min', label: 'Min' }, { field: 'max', label: 'Max' },\r\n            { field: 'mean', label: 'Mean' },\r\n            { field: 'median', label: 'Median' }\r\n                , { field: 'std', label: 'std' }, { field: 'missingVlauesCount', label: '# NAs' }\r\n                , { field: 'type', label: 'type' }\r\n            ];\r\n        const categoricalHeaders =\r\n            [{ field: 'name', label: '#' }, { field: 'shape', label: 'Shape' }, { field: 'mode', label: 'Mode' }, { field: 'percentage', label: 'Mode Percentage' }\r\n                , { field: 'missingVlauesCount', label: '# NAs' }\r\n            ];\r\n\r\n        for (let i = 0; i < continuousFeatures.length; i++) {\r\n            const column = continuousFeatures[i].name;\r\n            continuousFeaturesStats.push({\r\n                name: column,\r\n                min: data.column(column).min().toFixed(2),\r\n                max: data.column(column).max().toFixed(2),\r\n                median: data.column(column).median().toFixed(2),\r\n                mean: data.column(column).mean().toFixed(2),\r\n                std: data.column(column).std().toFixed(2),\r\n                missingValuesCount: data.column(column).isNa().sum(),\r\n                type: 1,\r\n                selected: continuousFeatures[i].selected\r\n            })\r\n        }\r\n\r\n\r\n        categoricalFeatures.forEach((item) => {\r\n            let column = item.name\r\n            const shape = [...new Set(data.column(column).values)];\r\n            const category_info = this.getCategoricalMode(data.column(column).values)\r\n            categoricalFeaturesStats.push({\r\n                name: column,\r\n                shape: shape.length,\r\n                mode: category_info['mode'],\r\n                percentage: ((category_info[category_info['mode']] / category_info['total'])).toFixed(2),\r\n                missingValuesCount: data.column(column).isNa().sum(),\r\n                type: 2,\r\n                selected: item.selected\r\n            })\r\n\r\n        });\r\n        return [\r\n            continuousHeaders,\r\n            continuousFeaturesStats,\r\n            categoricalHeaders,\r\n            categoricalFeaturesStats,\r\n        ]\r\n\r\n    }\r\n    getCategoricalMode(arr) {\r\n        if (arr.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        const categoryCount = {};\r\n        categoryCount['total'] = 0\r\n        categoryCount['mode'] = ''\r\n        for (let i = 0; i < arr.length; i++) {\r\n            const category = arr[i];\r\n            if (category === null || category === undefined) {\r\n                continue\r\n            }\r\n            categoryCount['total']++\r\n            if (category in categoryCount) {\r\n                categoryCount[category]++;\r\n            } else {\r\n                categoryCount[category] = 1;\r\n            }\r\n        }\r\n\r\n        let modeCategory = null;\r\n        let modeCount = 0;\r\n        for (const category in categoryCount) {\r\n            if (category === 'total') {\r\n                continue\r\n            }\r\n            if (categoryCount[category] > modeCount) {\r\n                modeCategory = category;\r\n                modeCount = categoryCount[category];\r\n            }\r\n        }\r\n        categoryCount['mode'] = modeCategory;\r\n        return categoryCount;\r\n    }\r\n\r\n    get_numeric_columns(dataset, filter) {\r\n        let selected_columns = this.find_selected_columns(dataset.columns, !filter)\r\n        let selected_columns_types = this.find_selected_columns_types(selected_columns);\r\n        selected_columns = selected_columns.filter(column => {\r\n            let i = selected_columns_types.findIndex(col => col.name === column)\r\n            if (selected_columns_types[i]?.type === FeatureCategories.Numerical) {\r\n                return true;\r\n            }\r\n            return false;\r\n        })\r\n        let numericColumns = []\r\n        dataset.columns.forEach(column => {\r\n            if (dataset.column(column).dtype !== 'string' && column !== \"Id\" && selected_columns.includes(column)) {\r\n                numericColumns.push(column)\r\n            }\r\n        });\r\n        return numericColumns\r\n    }\r\n    get_categorical_columns(dataset, filter) {\r\n        let selected_columns = this.find_selected_columns(dataset.columns, !filter)\r\n        let selected_columns_types = this.find_selected_columns_types(selected_columns);\r\n        selected_columns = selected_columns.filter(column => {\r\n            let i = selected_columns_types.findIndex(col => col.name === column)\r\n            if (i !== -1 && selected_columns_types[i]?.type !== FeatureCategories.Numerical) {\r\n                return true;\r\n            }\r\n            return false;\r\n        })\r\n        let categorical_columns = []\r\n        dataset.columns.forEach(column => {\r\n            if (column !== \"Id\" && selected_columns.includes(column)) {\r\n                categorical_columns.push(column)\r\n            }\r\n        });\r\n        return categorical_columns\r\n    }\r\n    column_types(columns) {\r\n        let selected_columns = this.find_selected_columns(columns, false)\r\n        return this.find_selected_columns_types(selected_columns);\r\n    }\r\n    async visualize(dataset, file_name) {\r\n        this.renderDatasetStats(dataset);\r\n        let numericColumns = this.get_numeric_columns(dataset, true)\r\n        let categorical_columns = this.get_categorical_columns(dataset, true)\r\n        const target = document.getElementById(\"target\").value;\r\n        let columns = [...new Set(numericColumns.concat(categorical_columns))];\r\n\r\n        const filterd_dataset = dataset.loc({ columns: columns })\r\n        filterd_dataset.dropNa({ axis: 1, inplace: true })\r\n        numericColumns = numericColumns.filter(m => m !== target)\r\n        let is_classification = document.getElementById(target).value !== FeatureCategories.Numerical;\r\n        //draw kdes\r\n        let limit = 0\r\n        if (numericColumns.length > 0 && limit < 10) {\r\n            document.getElementById(\"container\").innerHTML = \"\";\r\n            numericColumns.forEach(col => {\r\n                if (col !== target) {\r\n                    this.chart_controller.draw_kde(filterd_dataset, col, target, \"nrd\", is_classification);\r\n                }\r\n            });\r\n            limit++;\r\n        }\r\n        limit = 0\r\n        //draw categories barplot\r\n        if (categorical_columns.length > 0 && limit < 10) {\r\n            document.getElementById(\"categories_barplots\").innerHTML = \"\";\r\n            categorical_columns.forEach(col => {\r\n                if (col !== target) {\r\n                    this.chart_controller.draw_categorical_barplot(filterd_dataset.loc({ columns: [col] }).values, target, col);\r\n                }\r\n            });\r\n            limit++;\r\n        }\r\n        if (is_classification) {\r\n            let labels = dataset.column(target).values;\r\n            let unique_labels = [...new Set(labels)];\r\n            let counts = [];\r\n            for (let i = 0; i < unique_labels.length; i++) {\r\n                counts.push(labels.filter(m => m === unique_labels[i]).length);\r\n            }\r\n            this.chart_controller.classification_target_chart(counts, unique_labels, file_name, \"target_chart\", target);\r\n        } else {\r\n            this.chart_controller.regression_target_chart(dataset.column(target).values, \"target_chart\", target);\r\n        }\r\n\r\n        numericColumns = this.get_numeric_columns(dataset, true)\r\n        categorical_columns = this.get_categorical_columns(dataset, true)\r\n        // features = Object.values(numericColumns).concat(Object.values(categorical_columns))\r\n\r\n        dataset = this.data_parser.handle_missing_values(dataset)\r\n        // this.chart_controller.ScatterplotMatrix(dataset.loc({ columns: features }).values, features, dataset.column(target).values, categorical_columns.length,\r\n        //     is_classification, numericColumns, categorical_columns, dataset).then(() => {\r\n        //         document.getElementById('splom_update').addEventListener('click', async function (e) {\r\n        //             console.log('update');\r\n        //             Plotly.purge('scatterplot_mtx');\r\n        //             $('#scatterplot_mtx').empty()\r\n        //             await current_class.visualize(dataset);\r\n        //         });\r\n        //     })\r\n\r\n    }\r\n\r\n\r\n    // async createSampleDataTable(dataset) {\r\n    //     let cols = []\r\n    //     let column_names = dataset.columns\r\n    //     for (let i = 0; i < column_names.length; i++) {\r\n    //         cols.push({ title: column_names[i] })\r\n    //     }\r\n    //     new DataTable('#sample_data_table', {\r\n    //         responsive: true,\r\n    //         columns: cols,\r\n    //         data: dataset.head(5).values,\r\n    //         info: false,\r\n    //         search: false,\r\n    //         ordering: false,\r\n    //         dom: '<\"my-class\">',\r\n    //         initComplete: function (settings, json) {\r\n    //             $('.my-class').html('Sample Data');\r\n    //         },\r\n    //         searching: false,\r\n    //         paging: false,\r\n    //         bDestroy: true,\r\n    //     });\r\n\r\n    // }\r\n    toggle_loading_progress(show = false) {\r\n        let element = document.getElementById(\"progress\");\r\n        if (!show) {\r\n            element.style.display = \"block\";\r\n        } else {\r\n            element.style.display = \"none\";\r\n        }\r\n\r\n    }\r\n    // show_settings(settings, numeric_columns, categorical_columns, target, dataset_name, i) {\r\n    //     let columns = numeric_columns.concat(categorical_columns)\r\n    //     let column_types = [];\r\n    //     for (let i = 0; i < columns.length; i++) {\r\n    //         const column = columns[i];\r\n    //         column_types.push({ column: column, type: document.getElementById(column + '--normal') })\r\n    //     }\r\n    //     let columns_transformation = '';\r\n    //     for (let i = 0; i < columns.length; i++) {\r\n    //         const column_name = encode_name(columns[i]);\r\n    //         let normalization_type = document.getElementById(column_name + '--normal')?.value;\r\n    //         if (normalization_type && normalization_type !== \"0\") {\r\n    //             columns_transformation += columns[i] + ': ' + normalization_type + ' '\r\n    //         }\r\n    //     }\r\n\r\n    //     let content = `\r\n    //     <div class=\"column is-12\">\r\n    //     <div class=\"notification\">\r\n    //     <p class=\"title my-1 is-5\">${settings.name}</p>\r\n    //     <div class=\"columns is-multiline is-gapless\">`;\r\n    //     for (const key in settings) {\r\n    //         if (key !== 'name') {\r\n    //             if (Object.hasOwnProperty.call(settings, key)) {\r\n    //                 const element = settings[key];\r\n    //                 content += `<div class=\"column is-12 \"><p><strong>${key}</strong>: ${element}</p></div>`\r\n    //             }\r\n    //         }\r\n\r\n    //     }\r\n    //     content += `<div class=\"column is-12 \"><p><strong>Dataset name :</strong> ${dataset_name}</p></div>`\r\n    //     content += `<div class=\"column is-12 \"><p><strong>Target :</strong> ${target}</p></div>`\r\n    //     content += `<div class=\"column is-12 \"><p><strong>Continuous featues :</strong> ${numeric_columns}</p></div>`\r\n    //     content += `<div class=\"column is-12 \"><p><strong>Categorical featues :</strong> ${categorical_columns}</p></div>`\r\n    //     content += `<div class=\"column is-12 \"><p><strong>Transformations :</strong> ${columns_transformation}</p></div>`\r\n    //     content += `<div class=\"column is-12 \">\r\n    //     <button class=\"button is-danger\" id=\"remove_${i}\"> Remove results </button>\r\n    //     </div>`\r\n\r\n    //     content += `</div></div></div>`\r\n    //     $(\"#tabs_info li[data-index='\" + i + \"'] #results_\" + i + \"\").append(content);\r\n\r\n    //     document.getElementById(\"remove_\" + i).addEventListener('click', () => {\r\n    //         $('#' + 'tab_' + i).remove();\r\n    //         if (document.getElementById(target).value !== FeatureCategories.Numerical) {\r\n    //             Plotly.purge('pca_results_' + i)\r\n    //             $('#predictions_table_' + i).DataTable().destroy();\r\n    //             $('#' + 'info_' + i).remove();\r\n    //         } else {\r\n    //             Plotly.purge('regression_y_yhat_' + i)\r\n    //             $('#predictions_table_' + i).DataTable().destroy();\r\n    //             $('#' + 'info_' + i).remove();\r\n    //         }\r\n\r\n    //     });\r\n    // }\r\n    // create_model_result_tab(index) {\r\n    //     $(\"#tabs_content\").append(`\r\n    //     <li data-index=\"${index}\" id=\"tab_${index}\">\r\n    //        <a>${index}</a>\r\n    //     </li>`)\r\n    //     $(\"#tabs_info\").append(`\r\n    //     <li data-index=\"${index}\" id=\"info_${index}\"  class=\" tabs-li\">\r\n    //     <div id=\"results_${index}\" class=\"columns is-multiline\"></div>\r\n    //     </li>`)\r\n    //     $(\"#tabs_content li\").removeClass(\"is-active\");\r\n    //     $(\"#tabs_info li\").removeClass(\"is-active\");\r\n    //     $(\"#tabs_info li[data-index='\" + index + \"']\").addClass(\"is-active\");\r\n    //     $(\"#tabs_content li[data-index='\" + index + \"']\").addClass(\"is-active\");\r\n    // }\r\n\r\n    init_tooltips(tippy) {\r\n        tippy('#kde_help', {\r\n            interactive: true,\r\n            popperOptions: {\r\n                positionFixed: true,\r\n            },\r\n            content: 'Default bandwidth method :Silvermans rule of thumb',\r\n        });\r\n        tippy('#normalization_help', {\r\n            interactive: true,\r\n            popperOptions: {\r\n                positionFixed: true,\r\n            },\r\n            content: '<p>not functional yet</p><p>standard scaler uses z = (x - u) / s</p><p>Transform features by scaling each feature to a given range</p>',\r\n            allowHTML: true,\r\n        });\r\n        tippy('#imputation_help', {\r\n            interactive: true,\r\n            popperOptions: {\r\n                positionFixed: true,\r\n            },\r\n            content: 'currently we are just deleting rows with missing values',\r\n            allowHTML: true,\r\n        });\r\n        tippy('#cv_help', {\r\n            interactive: true,\r\n            popperOptions: {\r\n                positionFixed: true,\r\n            },\r\n            content: 'option 1 and 2 are working',\r\n            allowHTML: true,\r\n        });\r\n    }\r\n\r\n    // init_tabs_events() {\r\n    //     $(\"#tabs_content\").on(\"click\", \"li\", function () {\r\n    //         var index = $(this).data(\"index\");\r\n    //         $(\"#tabs_content li\").not(this).removeClass(\"is-active\");\r\n    //         $(\"#tabs_info li\").removeClass(\"is-active\");\r\n    //         $(\"#tabs_info li[data-index='\" + index + \"']\").addClass(\"is-active\");\r\n    //         $(this).toggleClass(\"is-active \");\r\n    //     });\r\n    //     $(\".tabs ul li\").click(function () {\r\n    //         window.dispatchEvent(new Event('resize'));\r\n    //     });\r\n    // }\r\n    predictions_table_regression(x, y, predictions, tab_index) {\r\n        let table_columns = [];\r\n        x.addColumn(\"residuals: \", y.map((item, i) => item - predictions[i]), { inplace: true });\r\n        x.addColumn(\"predictions: \", predictions, { inplace: true });\r\n        x.addColumn(\"y\", y, { inplace: true });\r\n\r\n\r\n        x.columns.forEach(element => {\r\n            table_columns.push({ title: element });\r\n        });\r\n        let columns = x.columns.slice().reverse();\r\n        new DataTable('#predictions_table_' + tab_index, {\r\n            pageLength: 5,\r\n            responsive: false,\r\n            paging: true,\r\n            columnDefs: [\r\n                {\r\n                    render: function (data) {\r\n                        return data.toFixed(2);\r\n                    },\r\n                    targets: \"_all\",\r\n                }\r\n            ],\r\n            bPaginate: true,\r\n            columns: table_columns.reverse(),\r\n            data: x.loc({ columns: columns }).values,\r\n            bDestroy: true,\r\n        });\r\n    }\r\n    removeTable(tableId) {\r\n        $(tableId).DataTable().destroy()\r\n\r\n    }\r\n    predictions_table(x, y, predictions, probs = null, tab_index = 0) {\r\n        let table_columns = [];\r\n        if (probs !== null) {\r\n            x.addColumn(\"probs\", probs, { inplace: true });\r\n        }\r\n        x.addColumn(\"y\", y, { inplace: true });\r\n        x.addColumn(\"predictions\", predictions, { inplace: true });\r\n        x.columns.forEach(element => {\r\n            table_columns.push({ title: element });\r\n        });\r\n        let columns = x.columns.slice().reverse();\r\n        new DataTable('#predictions_table_' + tab_index, {\r\n            pageLength: 10,\r\n            responsive: false,\r\n            paging: true,\r\n            \"bPaginate\": true,\r\n            columns: table_columns.reverse(),\r\n            data: x.loc({ columns: columns }).values,\r\n            bDestroy: true,\r\n            columnDefs: [\r\n                {\r\n                    // render: function (data, type, row) {\r\n                    //     for (let i = 0; i < data.length; i++) {\r\n                    //         data[i] = data[i].toFixed(2);\r\n                    //     }\r\n                    //     return data\r\n                    // },\r\n                    // targets: [-3]\r\n                },\r\n                {\r\n                    render: function (data) {\r\n                        return data.toFixed(2);\r\n                    },\r\n                    targets: [...Array(table_columns.length).keys()].filter(m => m >= 2)\r\n                }\r\n            ],\r\n            rowCallback: function (row, data) {\r\n                var prediction = data[0];\r\n                var y = data[1];\r\n                if (prediction !== y) {\r\n                    $(row).addClass('is-danger');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n}","\r\nimport ChartController from '@/helpers/charts';\r\nimport {tensorflow } from 'danfojs';\r\nimport UI from '@/helpers/ui';\r\nimport { metrics } from './utils.js';\r\n\r\nexport class ClassificationModel {\r\n\r\n    constructor() {\r\n        this.chartController = new ChartController();\r\n        this.ui = new UI(null, null)\r\n        this.task = null;\r\n        this.predictions = [];\r\n        this.hasProbability = false;\r\n        this.plots = [];\r\n        this.tables = [];\r\n        this.seed = 1;\r\n        this.hasExplaination = true;\r\n        this.id = null;\r\n        this.helpSectionId = 'help';\r\n\r\n    }\r\n    async train(x, y, x_test, y_test) {\r\n        throw new Error('Not implemented', x, y, x_test, y_test)\r\n    }\r\n    async evaluateModel(y, predictions, uniqueClasses) {\r\n        return await metrics(y, predictions, uniqueClasses);\r\n    }\r\n    generatePythonCode(model_import, model_fit) {\r\n        return `\r\nfrom sklearn.datasets import load_iris\r\n${model_import}\r\nfrom sklearn.inspection import partial_dependence, PartialDependenceDisplay, permutation_importance\r\nfrom sklearn.model_selection import train_test_split\r\nfrom sklearn.metrics import confusion_matrix, ConfusionMatrixDisplay\r\nfrom sklearn.decomposition import PCA\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\n# Load the Iris dataset\r\niris = load_iris()\r\nX, y = iris.data, iris.target\r\nfeature_names = iris.feature_names\r\nclass_names = iris.target_names\r\n\r\n# Split the data into train and test sets\r\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\r\n\r\n# Fit the model\r\n${model_fit}\r\nmodel.fit(X_train,y_train)\r\n# Confusion Matrix\r\ny_pred = model.predict(X_test)\r\nconf_matrix = confusion_matrix(y_test, y_pred, labels=np.unique(y))\r\ndisp = ConfusionMatrixDisplay(confusion_matrix=conf_matrix, display_labels=class_names)\r\ndisp.plot(cmap=plt.cm.Blues, values_format=\"d\")\r\nplt.title(\"Confusion Matrix\")\r\nplt.show()\r\n\r\n# PCA of Results\r\npca = PCA(n_components=2)\r\nX_test_pca = pca.fit_transform(X_test)\r\n\r\n# Plot PCA results with true labels and predicted labels\r\nplt.figure(figsize=(12, 6))\r\n\r\n# Subplot 1: PCA with True Labels\r\nplt.subplot(1, 2, 1)\r\nscatter = plt.scatter(X_test_pca[:, 0], X_test_pca[:, 1], c=y_test, cmap='viridis', s=50)\r\nplt.colorbar(scatter, ticks=np.arange(len(class_names)), label=\"True Labels\")\r\nplt.title(\"PCA of Test Set (True Labels)\")\r\nplt.xlabel(\"Principal Component 1\")\r\nplt.ylabel(\"Principal Component 2\")\r\n\r\n\r\nplt.tight_layout()\r\nplt.show()\r\n# Compute and plot Partial Dependence Plot (PDP)\r\nfig, ax = plt.subplots(figsize=(12, 8))\r\nPartialDependenceDisplay.from_estimator(\r\n    model, X_train, [0, 1,2,3], feature_names=feature_names, ax=ax,target=0\r\n)\r\nplt.show()\r\n\r\n# Compute and plot Permutation Feature Importance (PFI)\r\npfi = permutation_importance(model, X_test, y_test, n_repeats=10, random_state=42)\r\n# Convert PFI results to a DataFrame for easier manipulation\r\npfi_df = pd.DataFrame({\r\n    \"Feature\": np.repeat(feature_names, repeats=pfi.importances.shape[1]),\r\n    \"Importance\": pfi.importances.ravel()\r\n})\r\n\r\n# Create boxplots for Permutation Feature Importance\r\nplt.figure(figsize=(10, 6))\r\npfi_df.boxplot(by=\"Feature\", column=\"Importance\", grid=False, vert=False, showmeans=False)\r\nplt.xlabel(\"Permutation Importance\")\r\nplt.ylabel(\"Feature\")\r\nplt.title(\"Permutation Feature Importance (PFI)\")\r\nplt.suptitle(\"\")  # Remove automatic suptitle from boxplot\r\nplt.show()\r\n        `.trim()\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder) {\r\n        // const evaluation_result = evaluate_classification(predictions, y_test, encoder);\r\n        const classes = Object.keys(encoder.$labels);\r\n\r\n        await this.chartController.plotConfusionMatrix(tensorflow.tensor(predictions), tensorflow.tensor(y_test), classes, Object.values(encoder.$labels), this.id);\r\n        // await this.chartController.classificationPCA(x_test.values, encoder.inverseTransform(y_test), evaluation_result, uniqueLabels, this.id, 2);\r\n        this.ui.predictions_table(x_test, encoder.inverseTransform(y_test), encoder.inverseTransform(predictions), null, this.id);\r\n        // this.plots.push('pca_results_' + this.id);\r\n        this.tables.push('#predictions_table_' + this.id);\r\n\r\n    }\r\n}","\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\n\r\nimport { ClassificationModel } from '../model';\r\n\r\nexport default class LogisticRegression extends ClassificationModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options;\r\n        this.model = null;\r\n        this.summary = null;\r\n        this.model_stats_matrix = null;\r\n\r\n    }\r\n\r\n    async train(x_train, y_train, x_test, y_test, labels, categorical_columns) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            y_test: y_test,\r\n            X_test: x_test,\r\n            seed: this.seed,\r\n            regularization_type: this.options.regularization.value === \"Lasso\" ? 1 : 0,\r\n            labels: labels\r\n        };\r\n\r\n        const webR = window.webr;\r\n        await webR.init();\r\n        await webR.installPackages(['jsonlite', 'ggplot2', 'plotly', 'nnet', 'purrr', 'dplyr', 'ggrepel', 'glmnet', 'modelsummary', 'broom'], { quiet: true });\r\n        await webR.objs.globalEnv.bind('xx', x_train);\r\n        await webR.objs.globalEnv.bind('random_seed', this.seed);\r\n        await webR.objs.globalEnv.bind('x_test', x_test);\r\n\r\n        await webR.objs.globalEnv.bind('y', y_train);\r\n        await webR.objs.globalEnv.bind('names', labels);\r\n        await webR.objs.globalEnv.bind('categorical_columns', categorical_columns?.length === 0 ? ['empty'] : categorical_columns);\r\n\r\n        await webR.objs.globalEnv.bind('is_lasso', this.context.regularization_type);\r\n\r\n\r\n        const plotlyData = await webR.evalR(`\r\n                    library(plotly)\r\n                    library(ggplot2)\r\n                    library(purrr)\r\n                    library(dplyr)\r\n                    library(ggrepel)\r\n                    library(modelsummary)\r\n                    library(jsonlite)\r\n                    library(glmnet)\r\n                    library(broom)\r\n                    set.seed(random_seed)\r\n                    # Select all columns except the first as predictors. \r\n                    x <- as.matrix(xx)  \r\n                    colnames(x) <- names\r\n                    scale_df <- as.data.frame(x)\r\n                    cols_to_scale <- setdiff(names, categorical_columns)\r\n                    scale_df[cols_to_scale] <- scale(scale_df[cols_to_scale])\r\n                    if(is_lasso){\r\n                        cvfit = cv.glmnet(as.matrix(scale_df), y, alpha = 1, family = \"multinomial\", type.measure = \"class\")\r\n                    }else{\r\n                       cvfit = cv.glmnet(as.matrix(scale_df), y, alpha = 0, family = \"multinomial\", type.measure = \"class\")\r\n                    }\r\n                    betas = as.matrix(cvfit$glmnet.fit$beta)\r\n                    lambdas = cvfit$lambda\r\n                    names(lambdas) = colnames(betas)\r\n                    \r\n                    df  <- data.frame(\r\n                        log_lambda = log(cvfit$lambda),       \r\n                        mean_cv_error = cvfit$cvm,                \r\n                        lower_error = cvfit$cvup,    \r\n                        upper_error = cvfit$cvlo    \r\n                        )\r\n                    lambda_min <- log(cvfit$lambda.min) \r\n                    lambda_1se <- log(cvfit$lambda.1se)  \r\n            \r\n                    p <-ggplot(df,aes(x=log_lambda,y=mean_cv_error)) + \r\n                    geom_point(col=\"#f05454\") + \r\n                    geom_errorbar(aes(ymin = lower_error,ymax=upper_error),col=\"#30475e\") + \r\n                    geom_vline(xintercept=c(lambda_1se,lambda_min),\r\n                                linetype=\"dashed\")+\r\n                    annotate(\"text\", x = lambda_min, y = max(df$mean_cv_error), \r\n                            label = \"Min\", color = \"black\", hjust = -0.1) +\r\n                    annotate(\"text\", x = lambda_1se, y = max(df$mean_cv_error) - 0.02, \r\n                            label = \"1-SE\", color = \"black\", hjust = -0.1) +\r\n                    xlab(\"log lambda\") +\r\n                    ylab(\"Error\")+\r\n                    theme_bw()\r\n\r\n\r\n                    colnames(x_test) <- names\r\n                    model <- nnet::multinom(y ~ . , data = as.data.frame(x))\r\n                    s <- summary(model)\r\n                    coefs <- s$coefficients\r\n                    stds <- s$standard.errors\r\n                    z_scores <- coefs / stds\r\n                    p_values <- 2 * (1 - pnorm(abs(z_scores)))\r\n                    preds <- predict(model,newdata=as.data.frame(x_test))\r\n                    preds_probs <- predict(model,type = 'probs',newdata=as.data.frame(x_test))\r\n                    # confidence interval\r\n                    z <- 1.96  \r\n                    conf_int <- list()\r\n\r\n                    for (class in rownames(coef(model))) {\r\n                    conf_int[[class]] <- cbind(\r\n                        class = class,\r\n                        Estimate = coefs[class, ],\r\n                        Lower = coefs[class, ] - z * stds[class, ],\r\n                        Upper = coefs[class, ] + z * stds[class, ]\r\n                    )\r\n                    }\r\n                    conf_int_df <- do.call(rbind, conf_int)\r\n                    best_model <- glmnet(x, y, alpha =is_lasso,family = \"multinomial\", type.measure = \"class\", lambda = cvfit$lambda.min)\r\n                    coefficients <- coef(best_model)\r\n\r\n                    non_zero_features <- list()\r\n                    for (class_name in names(coefficients)) {\r\n                    class_coefficients <- coefficients[[class_name]]\r\n                    dense_coefficients <- as.matrix(class_coefficients)\r\n                    non_zero_indices <- which(dense_coefficients != 0, arr.ind = TRUE)\r\n                    non_zero_features <- c(non_zero_features,rownames(dense_coefficients)[non_zero_indices[, 1]])\r\n                    }\r\n                    non_zero_features <- unique(non_zero_features)\r\n                    non_zero_features <- unlist(Filter(function(x) x != \"\", non_zero_features))\r\n                    x_filterd <- x[,unlist(non_zero_features)]\r\n                    x_test_filterd <- x_test[,unlist(non_zero_features)]\r\n\r\n\r\n                    model_lambda_min <- nnet::multinom(y ~ . , data = as.data.frame(x_filterd))\r\n                    s <- summary(model_lambda_min)\r\n                    coefs_lambda_min <- s$coefficients\r\n                    stds_lambda_min <- s$standard.errors\r\n                    z_scores_lambda_min <- coefs_lambda_min / stds_lambda_min\r\n                    p_values_lambda_min <- 2 * (1 - pnorm(abs(z_scores_lambda_min)))\r\n                    preds_lambda_min <- predict(model_lambda_min,newdata=as.data.frame(x_test_filterd))\r\n                    preds_probs_lambda_min <- predict(model_lambda_min,type = 'probs',newdata=as.data.frame(x_test_filterd))\r\n                    # confidence interval\r\n                    z <- 1.96  \r\n                    conf_int <- list()\r\n\r\n                    for (class in rownames(coef(model_lambda_min))) {\r\n                    conf_int[[class]] <- cbind(\r\n                        class = class,\r\n                        Estimate = coefs_lambda_min[class, ],\r\n                        Lower = coefs_lambda_min[class, ] - z * stds_lambda_min[class, ],\r\n                        Upper = coefs_lambda_min[class, ] + z * stds_lambda_min[class, ]\r\n                    )\r\n                    }\r\n\r\n\r\n                    \r\n                    conf_int_lambda_min_df <- do.call(rbind, conf_int)\r\n\r\n                    best_model <- glmnet(x, y, alpha =is_lasso,family = \"multinomial\", type.measure = \"class\", lambda = cvfit$lambda.1se)\r\n                    coefficients <- coef(best_model)\r\n                    print(\"got here\")\r\n                    non_zero_features <- list()\r\n                    for (class_name in names(coefficients)) {\r\n                    class_coefficients <- coefficients[[class_name]]\r\n                    dense_coefficients <- as.matrix(class_coefficients)\r\n                    non_zero_indices <- which(dense_coefficients != 0, arr.ind = TRUE)\r\n                    non_zero_features <- c(non_zero_features,rownames(dense_coefficients)[non_zero_indices[, 1]])\r\n                    }\r\n                    non_zero_features <- unique(non_zero_features)\r\n                    non_zero_features <- unlist(Filter(function(x) x != \"\", non_zero_features))\r\n\r\n                    x_filterd <- x[,unlist(non_zero_features)]\r\n                    x_test_filterd <- x_test[,unlist(non_zero_features)]\r\n                    model_lambda_1se <- nnet::multinom(y ~ . , data = as.data.frame(x_filterd))\r\n                    s <- summary(model_lambda_1se)\r\n                    coefs_lambda_1se <- s$coefficients\r\n                    stds_lambda_1se <- s$standard.errors\r\n                    z_scores_lambda_1se <- coefs_lambda_1se / stds_lambda_1se\r\n                    p_values_lambda_1se <- 2 * (1 - pnorm(abs(z_scores_lambda_1se)))\r\n                    preds_lambda_1se <- predict(model_lambda_1se,newdata=as.data.frame(x_test_filterd))\r\n                    preds_probs_lambda_1se <- predict(model_lambda_1se,type = 'probs',newdata=as.data.frame(x_test_filterd))\r\n                    # confidence interval\r\n                    z <- 1.96  \r\n                    conf_int <- list()\r\n\r\n                    for (class in rownames(coef(model_lambda_1se))) {\r\n                    conf_int[[class]] <- cbind(\r\n                        class = class,\r\n                        Estimate = coefs_lambda_1se[class, ],\r\n                        Lower = coefs_lambda_1se[class, ] - z * stds_lambda_1se[class, ],\r\n                        Upper = coefs_lambda_1se[class, ] + z * stds_lambda_1se[class, ]\r\n                    )\r\n                    }\r\n                    conf_int_lambda_1se_df <- do.call(rbind, conf_int)\r\n\r\n                    lambda_values <- cvfit$glmnet.fit$lambda\r\n\r\n                    coef_list <- coef(cvfit$glmnet.fit)\r\n\r\n                    cv_summary <- map_df(names(coef_list), function(class) {\r\n                    coef_matrix <- as.matrix(coef_list[[class]])[-1, ]  # Remove intercept\r\n                    data.frame(\r\n                        lambda = rep(lambda_values, each = nrow(coef_matrix)),\r\n                        predictor = rep(rownames(coef_matrix), length(lambda_values)),\r\n                        coefficient = as.vector(coef_matrix),\r\n                        class = class\r\n                    )\r\n                    })\r\n\r\n                    list(\r\n                    plotly_json(p, pretty = FALSE)\r\n                    ,rownames(coefs)\r\n                    ,toJSON(coefs,pretty = TRUE)\r\n                    ,toJSON(stds,pretty = TRUE)\r\n                    ,toJSON(z_scores,pretty = TRUE)\r\n                    ,toJSON(p_values,pretty = TRUE)\r\n                    ,preds_probs\r\n                    ,preds \r\n                    ,toJSON(conf_int_df)\r\n                    ,rownames(conf_int_df)\r\n\r\n                    ,rownames(conf_int_lambda_min_df)\r\n                    ,toJSON(coefs_lambda_min,pretty = TRUE)\r\n                    ,toJSON(stds_lambda_min,pretty = TRUE)\r\n                    ,toJSON(p_values_lambda_min,pretty = TRUE)\r\n\r\n                    ,rownames(conf_int_lambda_1se_df)\r\n                    ,toJSON(coefs_lambda_1se,pretty = TRUE)\r\n                    ,toJSON(stds_lambda_1se,pretty = TRUE)\r\n                    ,toJSON(p_values_lambda_1se,pretty = TRUE)\r\n                    ,model[[\"AIC\"]]\r\n                    ,model_lambda_min[[\"AIC\"]]\r\n                    ,model_lambda_1se[[\"AIC\"]]\r\n                    ,toJSON(cv_summary)\r\n                    ,toJSON(conf_int_lambda_min_df)\r\n                    ,toJSON(conf_int_lambda_1se_df)\r\n                    ,lambda_min\r\n                    ,lambda_1se\r\n                    )\r\n\r\n                    `);\r\n        let results = await plotlyData.toArray()\r\n\r\n        this.summary = {\r\n            regularization_plot: JSON.parse(await results[0].toString()),\r\n            classes: await results[1].toArray(),\r\n            coefs: JSON.parse(await results[2].toArray()),\r\n            stds: JSON.parse(await results[3].toArray()),\r\n            z_scores: JSON.parse(await results[4].toArray()),\r\n            p_values: JSON.parse(await results[5].toArray()),\r\n            probabities: await results[6].toArray(),\r\n            predictions: (await results[7].toArray()).map(pred => pred - 1),\r\n            confidence_intervals: JSON.parse(await results[8].toString()),\r\n            confidence_intervals_row_names: await results[9].toArray(),\r\n            aic: await results[18].toNumber(),\r\n            best_fit_min: {\r\n                names: await results[10].toArray(),\r\n                confidence_intervals: JSON.parse(await results[22].toString()),\r\n                coefs: JSON.parse(await results[11].toArray()),\r\n                stds: JSON.parse(await results[12].toArray()),\r\n                p_values: JSON.parse(await results[13].toArray()),\r\n                aic: await results[19].toNumber(),\r\n\r\n            },\r\n            best_fit_1se: {\r\n                names: await results[14].toArray(),\r\n                confidence_intervals: JSON.parse(await results[23].toString()),\r\n                coefs: JSON.parse(await results[15].toArray()),\r\n                stds: JSON.parse(await results[16].toArray()),\r\n                p_values: JSON.parse(await results[17].toArray()),\r\n                aic: await results[20].toNumber(),\r\n            },\r\n            fit: JSON.parse(await results[21].toArray()),\r\n            lambda_min: await results[24].toNumber(),\r\n            lambda_1se: await results[25].toNumber(),\r\n\r\n        };\r\n\r\n        this.model_stats_matrix = [];\r\n        let cols = [...labels]\r\n        cols.unshift(\"(Intercept)\")\r\n        let min_ols_columns = [...new Set(this.summary['best_fit_min'].names)].map(m => m.replace(/^`|`$/g, ''));\r\n        let se_ols_columns = [...new Set(this.summary['best_fit_1se'].names)].map(m => m.replace(/^`|`$/g, ''));\r\n\r\n\r\n\r\n        this.summary.regularization_plot.layout['showlegend'] = false;\r\n        this.summary.regularization_plot.layout['autosize'] = true;\r\n        this.summary.regularization_plot.layout.legend = {\r\n            font: {\r\n                size: 8,\r\n                color: '#000'\r\n            },\r\n        };\r\n\r\n\r\n        for (let j = 0; j < this.summary.classes.length; j++) {\r\n            for (let i = 0; i < cols.length; i++) {\r\n                let row = [];\r\n                row.push(cols[i])\r\n                row.push((isNaN(this.summary['coefs'][j][i]) ? ' ' : this.summary['coefs'][j][i].toFixed(2)))\r\n                row.push((isNaN(this.summary['stds'][j][i]) ? ' ' : this.summary['stds'][j][i].toFixed(2)))\r\n                row.push((isNaN(this.summary['p_values'][j][i]) ? ' ' : this.summary['p_values'][j][i].toFixed(2)))\r\n\r\n                let index = min_ols_columns.findIndex(m => m === cols[i])\r\n                if (index !== -1) {\r\n                    let coef = this.summary['best_fit_min']['coefs'][j][index]\r\n                    let std = this.summary['best_fit_min']['stds'][j][index]\r\n                    let pval = this.summary['best_fit_min']['p_values'][j][index]\r\n                    row.push(isNaN(coef) ? 0 : coef.toFixed(2))\r\n                    row.push(isNaN(std) ? 0 : std.toFixed(2))\r\n                    row.push(isNaN(pval) ? 0 : pval.toFixed(2))\r\n                } else {\r\n                    row.push(' ')\r\n                    row.push(' ')\r\n                    row.push(' ')\r\n                }\r\n                index = se_ols_columns.findIndex(m => m === cols[i])\r\n                if (index !== -1) {\r\n                    let coef = this.summary['best_fit_1se']['coefs'][j][index]\r\n                    let std = this.summary['best_fit_1se']['stds'][j][index]\r\n                    let pval = this.summary['best_fit_1se']['p_values'][j][index]\r\n                    row.push(isNaN(coef) ? 0 : coef.toFixed(2))\r\n                    row.push(isNaN(std) ? 0 : std.toFixed(2))\r\n                    row.push(isNaN(pval) ? 0 : pval.toFixed(2))\r\n                } else {\r\n                    row.push(' ')\r\n                    row.push(' ')\r\n                    row.push(' ')\r\n                }\r\n                this.model_stats_matrix.push(row)\r\n            }\r\n            if (j < this.summary.classes.length - 1) {\r\n                let placeholder_row = this.model_stats_matrix[0].map(m => '');\r\n                this.model_stats_matrix.push(placeholder_row)\r\n            }\r\n        }\r\n        return this.summary['predictions'];\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        setTimeout(async () => {\r\n            let current = this;\r\n            new DataTable('#metrics_table_' + current.id, {\r\n                responsive: false,\r\n                \"footerCallback\": function (row, data, start, end, display) {\r\n                    var api = this.api();\r\n                    $(api.column(2).footer()).html(\r\n                        'AIC : ' + current.summary.aic.toFixed(2)\r\n                    );\r\n                    $(api.column(5).footer()).html(\r\n                        'AIC : ' + current.summary[\"best_fit_min\"].aic.toFixed(2)\r\n                    );\r\n                    $(api.column(8).footer()).html(\r\n                        'AIC : ' + current.summary[\"best_fit_1se\"].aic.toFixed(2)\r\n                    );\r\n                },\r\n                data: current.model_stats_matrix,\r\n                info: false,\r\n                search: false,\r\n                ordering: false,\r\n                searching: false,\r\n                paging: false,\r\n                bDestroy: true,\r\n            });\r\n            await Plotly.newPlot('regularization_' + current.id, current.summary.regularization_plot, { autosize: true });\r\n            let y_classes = this.summary.confidence_intervals_row_names\r\n                .map((item, i) => item + '_' + this.summary.confidence_intervals[i][0]).reverse()\r\n            let conf_intervals = this.summary.confidence_intervals.reverse()\r\n            let traces_params = []\r\n            let ols_y = y_classes.map((m, i) => i);\r\n            traces_params.push({\r\n                name: 'OLS',\r\n                x: conf_intervals.map(item => item[1]),\r\n                y: ols_y,\r\n                error_x: {\r\n                    type: 'data',\r\n                    array: conf_intervals.map(item => Math.abs(item[3] - item[1])),\r\n                },\r\n                type: 'scatter', mode: 'markers',\r\n                showlegend: true,  // Make sure the trace appears in the legend\r\n            })\r\n            let y_classes_min = this.summary.best_fit_min.names\r\n                .map((item, i) => item + '_' + this.summary.best_fit_min.confidence_intervals[i][0]).reverse()\r\n            let conf_intervals_min = this.summary.best_fit_min.confidence_intervals.reverse()\r\n            let lasso_y = y_classes_min.map((m, i) => i + 0.2);\r\n            traces_params.push({\r\n                name: 'lasso min',\r\n                x: conf_intervals_min.map(item => item[1]),\r\n                y: lasso_y,\r\n                error_x: {\r\n                    type: 'data',\r\n                    array: conf_intervals_min.map(item => Math.abs(item[3] - item[1])),\r\n                },\r\n                type: 'scatter', mode: 'markers',\r\n                showlegend: true,  // Make sure the trace appears in the legend\r\n            })\r\n            let _1se_y = y_classes_min.map((m, i) => i + 0.4);\r\n            let y_classes_1se = this.summary.best_fit_1se.names\r\n                .map((item, i) => item + '_' + this.summary.best_fit_1se.confidence_intervals[i][0]).reverse()\r\n            let conf_intervals_1se = this.summary.best_fit_1se.confidence_intervals.reverse()\r\n            traces_params.push({\r\n                name: 'lasso 1se',\r\n                x: conf_intervals_1se.map(item => item[1]),\r\n                y: _1se_y,\r\n                error_x: {\r\n                    type: 'data',\r\n                    array: conf_intervals_1se.map(item => Math.abs(item[3] - item[1])),\r\n                },\r\n                type: 'scatter', mode: 'markers',\r\n                showlegend: true,  // Make sure the trace appears in the legend\r\n            })\r\n            await Plotly.newPlot('parameters_plot_' + current.id, {\r\n                'data': traces_params,\r\n                'layout': {\r\n                    margin: {\r\n                        l: 80,\r\n                        r: 40,\r\n                        b: 40,\r\n                        t: 40,\r\n                        pad: 10\r\n                    },\r\n                    showlegend: true,\r\n                    legend: {\r\n                        xanchor: 'left',\r\n                        yanchor: 'top',\r\n                        x: 0.02,\r\n                        y: 0.98,\r\n                        font: {\r\n                            size: 8,  // Set font size for legend\r\n                            color: \"black\" // Change font color if needed\r\n                        },\r\n                        bgcolor: \"rgba(0,0,0,0)\"\r\n                    },\r\n                    xaxis: {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        zeroline: true,\r\n                        mirror: true,\r\n                        title: 'Confidence interval',\r\n                    },\r\n                    yaxis: {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        zeroline: false,\r\n                        mirror: true,\r\n                        tickvals: lasso_y,\r\n                        ticktext: y_classes_1se,\r\n                        tickfont: { size: 10 }\r\n                    },\r\n                }\r\n            });\r\n\r\n            this.summary.fit.sort((a, b) => a.lambda - b.lambda);\r\n            let subset = this.summary.fit.filter(m => m.class == '1')\r\n            let params = new Set(...[subset.filter(m => !!m.predictor).map(m => m.predictor)])\r\n            let traces = []\r\n            let annotations = []\r\n            params.forEach(param => {\r\n                let coefs = subset.filter(m => m.predictor == param).map(m => m.coefficient)\r\n                let lambdas = subset.filter(m => m.predictor == param).map(m => Math.log(m.lambda))\r\n                traces.push({\r\n                    name: param,\r\n                    y: coefs,\r\n                    x: lambdas,\r\n                    mode: 'lines',\r\n                });\r\n                annotations.push({\r\n                    xref: 'paper',\r\n                    x: .01,\r\n                    y: coefs[0],\r\n                    xanchor: 'left',\r\n                    yanchor: 'middle',\r\n                    text: param,\r\n                    font: {\r\n                        family: 'Arial',\r\n                        size: 8,\r\n                        color: 'black'\r\n                    },\r\n                    showarrow: false\r\n                });\r\n                annotations = annotations.concat([\r\n                    {\r\n                        x: this.summary.lambda_min,\r\n                        y: 0.5, // Center the text along the line\r\n                        xref: 'x',\r\n                        yref: 'paper',\r\n                        text: \"Lambda min\",\r\n                        showarrow: false,\r\n                        font: {\r\n                            size: 8,\r\n                            color: \"black\"\r\n                        },\r\n                        textangle: -90, // Rotate text to be vertical\r\n                        align: \"center\"\r\n                    },\r\n                    {\r\n                        x: this.summary.lambda_1se,\r\n                        y: 0.5, // Center the text along the line\r\n                        xref: 'x',\r\n                        yref: 'paper',\r\n                        text: \"Lambda 1se\",\r\n                        showarrow: false,\r\n                        font: {\r\n                            size: 8,\r\n                            color: \"black\"\r\n                        },\r\n                        textangle: -90, // Rotate text to be vertical\r\n                        align: \"center\"\r\n                    }\r\n                ])\r\n            });\r\n\r\n            await Plotly.newPlot('errors_' + current.id, {\r\n\r\n                'data': traces,\r\n                'layout': {\r\n                    shapes: [\r\n                        {\r\n                            type: 'line',\r\n                            x0: this.summary.lambda_min,\r\n                            x1: this.summary.lambda_min,\r\n                            y0: 0,\r\n                            y1: 1,\r\n                            xref: 'x',\r\n                            yref: 'paper',\r\n                            line: {\r\n                                color: 'black',\r\n                                dash: 'dashdot',\r\n                                width: 1\r\n                            }\r\n                        },\r\n                        {\r\n                            type: 'line',\r\n                            x0: this.summary.lambda_1se,\r\n                            x1: this.summary.lambda_1se,\r\n                            y0: 0,\r\n                            y1: 1,\r\n                            xref: 'x',\r\n                            yref: 'paper',\r\n                            line: {\r\n                                color: 'black',\r\n                                dash: 'dashdot',\r\n                                width: 1\r\n                            }\r\n                        },\r\n                    ],\r\n                    annotations: annotations,\r\n                    showlegend: false,\r\n                    margin: {\r\n                        l: 40,\r\n                        r: 40,\r\n                        b: 40,\r\n                        t: 40,\r\n                        pad: 10\r\n                    },\r\n                    autosize: true,\r\n                    xaxis: {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        zeroline: false,\r\n                        mirror: true,\r\n                        title: 'log lambda'\r\n                    },\r\n                    yaxis: {\r\n                        linecolor: 'black',\r\n                        linewidth: 1,\r\n                        zeroline: false,\r\n                        mirror: true,\r\n                        title: 'coefficient'\r\n                    }\r\n                }\r\n            });\r\n            window.dispatchEvent(new Event('resize'));\r\n        }, 500);\r\n\r\n    }\r\n}","\r\nimport ChartController from '@/helpers/charts';\r\nimport UI from '@/helpers/ui';\r\nimport { calculateMSE, calculateRSquared } from './utils.js';\r\n\r\nexport class RegressionModel {\r\n\r\n    constructor() {\r\n        this.chartController = new ChartController();\r\n        this.ui = new UI(null, null)\r\n        this.task = null;\r\n        this.predictions = [];\r\n        this.id = null;\r\n        this.plots = [];\r\n        this.tables = [];\r\n        this.helpSectionId = 'help';\r\n        this.hasExplaination = true;\r\n        this.seed = 123;\r\n\r\n    }\r\n    async train(x, y, x_test, y_test) {\r\n        throw new Error('Not implemented', x, y, x_test, y_test)\r\n    }\r\n    async evaluateModel(y, predictions) {\r\n        return { mse: calculateMSE(y, predictions), rsquared: calculateRSquared(y, predictions) };\r\n    }\r\n    async visualize(x_test, y_test, _, predictions) {\r\n        let current = this;\r\n        return new Promise((resolve) => {\r\n            setTimeout(() => {\r\n                let y = y_test\r\n                let residuals = [];\r\n                predictions.forEach((element, i) => {\r\n                    residuals.push(y[i] - element)\r\n                });\r\n                current.chartController.yhat_plot(y, predictions, 'regression_y_yhat_' + current.id, 'Predictions vs y')\r\n                current.chartController.residual_plot(predictions, residuals, 'errors_' + current.id, 'Residuals vs y')\r\n                this.ui.predictions_table_regression(x_test, y_test, predictions, this.id);\r\n                this.plots.push('regression_y_yhat_' + current.id);\r\n                this.plots.push('errors_' + current.id);\r\n                this.tables.push('#predictions_table_' + this.id);\r\n                resolve('resolved');\r\n            }, 500);\r\n        });\r\n    }\r\n}","\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\n\r\nimport { RegressionModel } from '../regression_model';\r\n\r\nexport default class LinearRegression extends RegressionModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options;\r\n        this.model = null;\r\n        this.summary = null;\r\n        this.model_stats_matrix = null;\r\n        this.hasExplaination = false;\r\n\r\n    }\r\n\r\n    async train(x_train, y_train, x_test, y_test, labels, categorical_columns) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            y_test: y_test,\r\n            X_test: x_test,\r\n            regularization_type: this.options.regularization.value === \"Lasso\" ? 1 : 0,\r\n            labels: labels\r\n        };\r\n\r\n        const webR = window.webr;\r\n        await webR.init();\r\n        await webR.installPackages(['jsonlite', 'iml', 'ggplot2', 'plotly', 'tidyr', 'dplyr', 'ggrepel', 'glmnet', 'modelsummary'], { quiet: true });\r\n        await webR.objs.globalEnv.bind('xx', x_train);\r\n        await webR.objs.globalEnv.bind('x_test', x_test);\r\n        await webR.objs.globalEnv.bind('random_seed', this.seed);\r\n        await webR.objs.globalEnv.bind('y', y_train);\r\n        await webR.objs.globalEnv.bind('names', labels);\r\n        await webR.objs.globalEnv.bind('categorical_columns', categorical_columns?.length === 0 ? ['empty'] : categorical_columns);\r\n\r\n        await webR.objs.globalEnv.bind('is_lasso', this.context.regularization_type);\r\n\r\n\r\n        const plotlyData = await webR.evalR(`\r\n                    library(plotly)\r\n                    library(ggplot2)\r\n                    library(tidyr)\r\n                    library(iml)\r\n                    library(dplyr)\r\n                    library(ggrepel)\r\n                    library(modelsummary)\r\n                    library(glmnet)\r\n                    set.seed(random_seed)\r\n\r\n                    # Select all columns except the first as predictors. \r\n                    x <- as.matrix(xx)  \r\n                    colnames(x) <- names\r\n                    scale_df <- as.data.frame(x)\r\n\r\n                    cols_to_scale <- setdiff(names, categorical_columns)\r\n                    scale_df[cols_to_scale] <- scale(scale_df[cols_to_scale])\r\n                    scaled_y <- scale(y)\r\n                    base_model = cv.glmnet(as.matrix(scale_df), scaled_y)\r\n                    weights <- 1 / abs(coef(base_model)[-1])\r\n                    if(is_lasso){\r\n                        cvfit = cv.glmnet(as.matrix(scale_df), scaled_y, alpha = 1,penalty.factor = weights)\r\n                    }else{\r\n                       cvfit = cv.glmnet(as.matrix(scale_df), scaled_y, alpha = 0)\r\n                    }\r\n                    betas = as.matrix(cvfit$glmnet.fit$beta)\r\n                    lambdas = cvfit$lambda\r\n                    names(lambdas) = colnames(betas)\r\n                    \r\n                    \r\n                    p <- as.data.frame(betas) %>% \r\n                      tibble::rownames_to_column(\"variable\") %>% \r\n                      pivot_longer(-variable) %>% \r\n                      mutate(lambda=lambdas[name]) %>% \r\n                    ggplot(aes(x=lambda,y=value,col=variable)) + \r\n                      geom_line() + \r\n                      geom_label_repel(data=~subset(.x,lambda==min(lambda)),\r\n                                       aes(label=variable),nudge_x=-0.5) +\r\n                      geom_vline(xintercept=c(cvfit$lambda.1se,cvfit$lambda.min),\r\n                                linetype=\"dashed\")+\r\n                      scale_x_log10()+ labs(y = \"Coefficients\") + theme_bw()\r\n                    df = with(cvfit,\r\n                            data.frame(lambda = lambdas,MSE = cvm,MSEhi=cvup,MSElow=cvlo))\r\n\r\n                    p2<-ggplot(df,aes(x=lambda,y=MSE)) + \r\n                    geom_point(col=\"#f05454\") + \r\n                    scale_x_log10(\"lambda\") + \r\n                    geom_errorbar(aes(ymin = MSElow,ymax=MSEhi),col=\"#30475e\") + \r\n                    geom_vline(xintercept=c(cvfit$lambda.1se,cvfit$lambda.min),\r\n                                linetype=\"dashed\")+\r\n                    theme_bw()\r\n\r\n                    # Get lambda.min and lambda.1se\r\n                    lambda_min = cvfit$lambda.min\r\n                    lambda_1se = cvfit$lambda.1se\r\n\r\n                    # Get the coefficients at lambda.min and lambda.1se\r\n                    coef_lambda_min = coef(cvfit, s = \"lambda.min\")\r\n                    coef_lambda_1se = coef(cvfit, s = \"lambda.1se\")\r\n\r\n                    # Convert the sparse matrix to a regular matrix to make indexing easier\r\n                    coef_lambda_min_matrix = as.matrix(coef_lambda_min)\r\n                    coef_lambda_1se_matrix = as.matrix(coef_lambda_1se)\r\n                    coef_lambda_min_matrix = coef_lambda_min_matrix[-1, , drop = FALSE]\r\n                    coef_lambda_1se_matrix = coef_lambda_1se_matrix[-1, , drop = FALSE]\r\n                    # Find the non-zero features at lambda.min and lambda.1se\r\n                    non_zero_features_min = rownames(coef_lambda_min_matrix)[coef_lambda_min_matrix != 0]\r\n                    non_zero_features_1se = rownames(coef_lambda_1se_matrix)[coef_lambda_1se_matrix != 0]\r\n\r\n                    print(non_zero_features_min)\r\n                    print(non_zero_features_1se)\r\n\r\n                    model <- lm(y ~ ., data = as.data.frame(x))\r\n                    x <- as.matrix(x_test)  \r\n                    colnames(x) <- names\r\n                    predictions <- predict(model, newdata = as.data.frame(x))\r\n                    # Get coefficients, p-values, and standard errors\r\n                    coefs <- coef(model)\r\n                    pvals <- summary(model)$coefficients[,4]\r\n                    std_error <- summary(model)$coefficients[,2]\r\n                    aic_value <- AIC(model)\r\n                    bic_value <- BIC(model)\r\n                    rsquared <- summary(model)$r.squared\r\n                    residuals_ols <- resid(model)\r\n                    fitted_values_ols <- fitted(model)\r\n\r\n                    x <- as.matrix(xx)  \r\n                    colnames(x) <- names\r\n                    X_reduced <- x[, non_zero_features_min]\r\n                    linear_model_min_features <- non_zero_features_min\r\n\r\n                    # Fit a linear regression model using the non-zero features\r\n                    linear_model_min <- lm(y ~ ., data = as.data.frame(X_reduced))\r\n                    coefs_min <- coef(linear_model_min)\r\n                    pvals_min <- summary(linear_model_min)$coefficients[,4]\r\n                    std_error_min <- summary(linear_model_min)$coefficients[,2]\r\n                    aic_min <- AIC(linear_model_min)\r\n                    rsquared_min <- summary(linear_model_min)$r.squared\r\n                    best_lambda <- cvfit$lambda.1se\r\n                    best_model <- glmnet(x, y, alpha =is_lasso, lambda = best_lambda)\r\n                    coefficients <- as.matrix(coef(best_model))\r\n                    residuals_min <- resid(linear_model_min)\r\n                    fitted_values_min <- fitted(linear_model_min)\r\n\r\n\r\n                    x <- as.matrix(x_test)  \r\n                    colnames(x) <- names\r\n                    x <- x[, non_zero_features_min]\r\n                    predictions_min <- predict(linear_model_min, newdata = as.data.frame(x))\r\n\r\n\r\n\r\n                    x <- as.matrix(xx)  \r\n                    colnames(x) <- names\r\n\r\n                    X_reduced <- x[, non_zero_features_1se]\r\n                    linear_model_1se_features <- non_zero_features_1se\r\n                    linear_model_1se <- lm(y ~ ., data = as.data.frame(X_reduced))\r\n                    coefs_1se <- coef(linear_model_1se)\r\n                    print(coefs_1se)\r\n                    pvals_1se <- summary(linear_model_1se)$coefficients[,4]\r\n                    aic_1se<- AIC(linear_model_1se)\r\n                    rsquared_1se <- summary(linear_model_1se)$r.squared\r\n                    std_error_1se <- summary(linear_model_1se)$coefficients[,2]\r\n                    residuals_1se <- resid(linear_model_1se)\r\n                    fitted_values_1se <- fitted(linear_model_1se)\r\n                    \r\n                    x <- as.matrix(x_test)  \r\n                    colnames(x) <- names\r\n                    x <- x[, non_zero_features_1se]\r\n                    predictions_1se <- predict(linear_model_1se, newdata = as.data.frame(x))\r\n\r\n\r\n                    models <- list(\r\n                        \"OLS\" = model,\r\n                        \"Lasso Min \" = linear_model_min,\r\n                        \"Lasso 1se \" = linear_model_1se\r\n                        )\r\n                    z <- modelplot(models =models,coef_omit = 'Interc')\r\n                    qqplot_ols <-ggplot(data.frame(residuals = residuals_ols), aes(sample = residuals_ols)) +\r\n                        stat_qq(color = \"blue\") +\r\n                        stat_qq_line(col = \"red\") +\r\n                        labs(title = \"QQ Plot of Residuals\",\r\n                            x = \"Theoretical Quantiles\",\r\n                            y = \"Sample Quantiles\") +\r\n                        theme_bw()\r\n                    qqplot_1se <-ggplot(data.frame(residuals = residuals_1se), aes(sample = residuals_1se)) +\r\n                        stat_qq(color = \"blue\") +\r\n                        stat_qq_line(col = \"red\") +\r\n                        labs(title = \"QQ Plot of Residuals\",\r\n                            x = \"Theoretical Quantiles\",\r\n                            y = \"Sample Quantiles\") +\r\n                        theme_bw()\r\n                    qqplot_min <-ggplot(data.frame(residuals = residuals_min), aes(sample = residuals_min)) +\r\n                        stat_qq(color = \"blue\") +\r\n                        stat_qq_line(col = \"red\") +\r\n                        labs(title = \"QQ Plot of Residuals\",\r\n                            x = \"Theoretical Quantiles\",\r\n                            y = \"Sample Quantiles\") +\r\n                        theme_bw()\r\n                        \r\n\r\n\r\n\r\n                    list(plotly_json(p, pretty = FALSE),plotly_json(p2, pretty = FALSE),coefs,\r\n                    pvals,std_error,predictions,aic_value,bic_value,rsquared\r\n                    ,coefs_min,pvals_min,std_error_min\r\n                    ,coefs_1se,pvals_1se,std_error_1se,plotly_json(z, pretty = FALSE),linear_model_min_features,linear_model_1se_features\r\n                    ,residuals_ols,residuals_1se,residuals_min,predictions_1se,predictions_min,rsquared_1se,aic_1se,rsquared_min,aic_min\r\n                    ,plotly_json(qqplot_ols, pretty = FALSE)\r\n                    ,plotly_json(qqplot_1se, pretty = FALSE)\r\n                    ,plotly_json(qqplot_min, pretty = FALSE)\r\n                    \r\n                    )\r\n                    `);\r\n        let results = await plotlyData.toArray()\r\n\r\n        this.summary = {\r\n            params: await results[2].toArray(),\r\n            bse: await results[4].toArray(),\r\n            pvalues: await results[3].toArray(),\r\n            predictions: await results[5].toArray(),\r\n            predictions1se: await results[21].toArray(),\r\n            predictionsmin: await results[22].toArray(),\r\n            residuals_ols: await results[18].toArray(),\r\n            residuals_1se: await results[19].toArray(),\r\n            residuals_min: await results[20].toArray(),\r\n            aic: await results[6].toNumber(),\r\n            bic: await results[7].toNumber(),\r\n            r2: await results[8].toNumber(),\r\n            best_fit_min: {\r\n                r2: await results[25].toNumber(),\r\n                aic: await results[26].toNumber(),\r\n                names: await results[16].toArray(),\r\n                coefs: await results[9].toArray(),\r\n                bse: await results[11].toArray(),\r\n                pvalues: await results[10].toArray(),\r\n            },\r\n            best_fit_1se: {\r\n                r2: await results[23].toNumber(),\r\n                aic: await results[24].toNumber(),\r\n                names: await results[17].toArray(),\r\n                coefs: await results[12].toArray(),\r\n                bse: await results[14].toArray(),\r\n                pvalues: await results[13].toArray(),\r\n            },\r\n        };\r\n        this.model_stats_matrix = [];\r\n        let cols = [...labels]\r\n        cols.unshift(\"intercept\")\r\n        let min_ols_columns = this.summary['best_fit_min'].names;\r\n\r\n        min_ols_columns.unshift('intercept');\r\n        let se_ols_columns = this.summary['best_fit_1se'].names;\r\n        se_ols_columns.unshift('intercept');\r\n\r\n        for (let i = 0; i < cols.length; i++) {\r\n            let row = [];\r\n            row.push(cols[i])\r\n            row.push(this.summary['params'][i]?.toFixed(2) ?? ' ')\r\n            row.push(this.summary['bse'][i]?.toFixed(2) ?? ' ')\r\n            row.push(this.summary['pvalues'][i]?.toFixed(2) ?? ' ')\r\n            let index = min_ols_columns.findIndex(m => m === cols[i])\r\n            if (index !== -1) {\r\n                row.push(this.summary['best_fit_min']['coefs'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_min']['bse'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_min']['pvalues'][index]?.toFixed(2) ?? ' ')\r\n            } else {\r\n                row.push(' ')\r\n                row.push(' ')\r\n                row.push(' ')\r\n            }\r\n            index = se_ols_columns.findIndex(m => m === cols[i])\r\n            if (index !== -1) {\r\n                row.push(this.summary['best_fit_1se']['coefs'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_1se']['bse'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_1se']['pvalues'][index]?.toFixed(2) ?? ' ')\r\n            } else {\r\n                row.push(' ')\r\n                row.push(' ')\r\n                row.push(' ')\r\n            }\r\n            this.model_stats_matrix.push(row)\r\n        }\r\n        this.model_stats_matrix.reverse()\r\n        let reg_plot = JSON.parse(await results[0].toString())\r\n\r\n        reg_plot.layout['showlegend'] = false;\r\n        reg_plot.layout.legend = {\r\n            font: {\r\n\r\n                size: 8,\r\n                color: '#000'\r\n            },\r\n        };\r\n        let coefs_plot = JSON.parse(await results[15].toString())\r\n        coefs_plot.layout.legend = {\r\n            x: 0,\r\n            y: 1,\r\n            traceorder: 'normal',\r\n            font: {\r\n                size: 8,\r\n                color: '#000'\r\n            },\r\n            bgcolor: 'rgba(0,0,0,0)',\r\n        };\r\n        coefs_plot.layout.xaxis.title.font = {\r\n            size: 10\r\n        };\r\n\r\n        coefs_plot.layout.xaxis.linecolor = 'rgba(235, 235, 235, 1)';\r\n        coefs_plot.layout.xaxis.linewidth = 3;\r\n        coefs_plot.layout.xaxis.mirror = true;\r\n        coefs_plot.layout.xaxis.zeroline = true;\r\n\r\n        coefs_plot.layout.yaxis.linecolor = 'rgba(235, 235, 235, 1)';\r\n        coefs_plot.layout.yaxis.linewidth = 2;\r\n        coefs_plot.layout.yaxis.mirror = true;\r\n        coefs_plot.layout.yaxis.zeroline = true;\r\n\r\n        this.summary.coefs_plot = coefs_plot;\r\n\r\n        this.summary.regularization_plot = reg_plot;\r\n        this.summary.errors_plot = JSON.parse(await results[1].toString());\r\n        this.summary.qqplot_ols_plot = JSON.parse(await results[27].toString());\r\n        this.summary.qqplot_1se_plot = JSON.parse(await results[28].toString());\r\n        this.summary.qqplot_min_plot = JSON.parse(await results[29].toString());\r\n        this.summary.qqplot_ols_plot.layout.title.font = {\r\n\r\n            size: 10\r\n        };\r\n\r\n\r\n\r\n        this.summary.qqplot_ols_plot.data[0].marker.size = 3;\r\n        this.summary.qqplot_ols_plot.data[0].marker.color = \"blue\";\r\n        this.summary.qqplot_ols_plot.layout.height = 300\r\n        this.summary.qqplot_ols_plot.layout.width = 300\r\n\r\n        this.summary.qqplot_ols_plot.layout.xaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_ols_plot.layout.yaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n\r\n        this.summary.qqplot_1se_plot.layout.height = 300\r\n        this.summary.qqplot_1se_plot.layout.width = 300\r\n        this.summary.qqplot_1se_plot.layout.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_1se_plot.data[0].marker.size = 3;\r\n\r\n        this.summary.qqplot_1se_plot.layout.xaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_1se_plot.layout.yaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n\r\n\r\n        this.summary.qqplot_min_plot.layout.height = 300\r\n        this.summary.qqplot_min_plot.layout.width = 300\r\n        this.summary.qqplot_min_plot.layout.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_min_plot.layout.xaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_min_plot.layout.yaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n\r\n\r\n        this.summary.qqplot_min_plot.data[0].marker.size = 1;\r\n        return this.summary['predictions'];\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions)\r\n        let current = this;\r\n        new DataTable('#metrics_table_' + current.id, {\r\n            responsive: false,\r\n            \"footerCallback\": function (row, data, start, end, display) {\r\n                var api = this.api();\r\n                $(api.column(2).footer()).html(\r\n                    'R2 : ' + current.summary.r2.toFixed(2) + ' AIC: ' + current.summary.aic.toFixed(2)\r\n                );\r\n                $(api.column(5).footer()).html(\r\n                    'R2 : ' + current.summary['best_fit_min'].r2.toFixed(2) + ' AIC: ' + current.summary['best_fit_min'].aic.toFixed(2)\r\n                );\r\n                $(api.column(8).footer()).html(\r\n                    'R2 : ' + current.summary['best_fit_1se'].r2.toFixed(2) + ' AIC: ' + current.summary['best_fit_1se'].aic.toFixed(2)\r\n                );\r\n            },\r\n            data: current.model_stats_matrix,\r\n            info: false,\r\n            search: false,\r\n            ordering: false,\r\n            searching: false,\r\n            paging: false,\r\n            bDestroy: true,\r\n            columnDefs: [\r\n                {\r\n                    \"targets\": 3,\r\n                    \"createdCell\": function (td, cellData, rowData, row, col) {\r\n                        if (rowData[3] <= 0.05) {\r\n                            $(td).css('color', 'red')\r\n                            $(td).css('font-weight', '700')\r\n\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"targets\": 6,\r\n                    \"createdCell\": function (td, cellData, rowData, row, col) {\r\n                        if (rowData[6] <= 0.05) {\r\n                            $(td).css('color', 'red')\r\n                            $(td).css('font-weight', '700')\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"targets\": 9,\r\n                    \"createdCell\": function (td, cellData, rowData, row, col) {\r\n                        if (rowData[9] <= 0.05) {\r\n                            $(td).css('color', 'red')\r\n                            $(td).css('font-weight', '700')\r\n                        }\r\n                    }\r\n                }\r\n            ],\r\n        });\r\n\r\n        await Plotly.newPlot('parameters_plot_' + current.id, current.summary.coefs_plot, { autosize: true, responsive: true });\r\n        await Plotly.newPlot('regularization_' + current.id, current.summary.regularization_plot, { autosize: true, responsive: true });\r\n        await Plotly.newPlot('errors_' + current.id, current.summary.errors_plot, { autosize: true, responsive: true });\r\n        await Plotly.newPlot('qqplot_ols_' + current.id, current.summary.qqplot_ols_plot, { autosize: true, staticPlot: true, });\r\n        await Plotly.newPlot('qqplot_min_' + current.id, current.summary.qqplot_min_plot, { autosize: true, staticPlot: true, });\r\n        await Plotly.newPlot('qqplot_1se_' + current.id, current.summary.qqplot_1se_plot, { autosize: true, staticPlot: true, });\r\n        current.chartController.yhat_plot(y_test, this.summary['predictions'], 'regression_y_yhat_' + current.id, 'OLS predictions')\r\n        current.chartController.yhat_plot(y_test, this.summary['predictionsmin'], 'regression_y_yhat_min_' + current.id, 'lasso min predictions')\r\n        current.chartController.yhat_plot(y_test, this.summary['predictions1se'], 'regression_y_yhat_1se_' + current.id, 'lasso 1se predictions')\r\n        current.chartController.residual_plot(y_test, this.summary['residuals_ols'], 'regression_residual_' + current.id, 'OLS residuals')\r\n        current.chartController.residual_plot(y_test, this.summary['residuals_min'], 'regression_residual_min_' + current.id, 'lasso min residuals')\r\n        current.chartController.residual_plot(y_test, this.summary['residuals_1se'], 'regression_residual_1se_' + current.id, 'lasso 1se residuals')\r\n        this.ui.predictions_table_regression(x_test, y_test, predictions, this.id);\r\n        window.dispatchEvent(new Event('resize'));\r\n\r\n    }\r\n}","import { asyncRun } from \"@/helpers/py-worker\";\r\nimport { RegressionModel } from \"../regression_model\";\r\n\r\n\r\nexport default class BSplineRegression extends RegressionModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options;\r\n        this.model = null;\r\n        this.hasExplaination = false;\r\n\r\n    }\r\n    async train(x_train, y_train, x_test, y_test, columns) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            knots: +this.options.knots.value,\r\n            explain: this.hasExplaination,\r\n            degree: +this.options.degree.value,\r\n            features: [...Array(columns.length).keys()]\r\n\r\n\r\n        };\r\n        const script = `\r\n        from sklearn.preprocessing import SplineTransformer\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        from sklearn.ensemble import GradientBoostingRegressor\r\n        import pandas as pd\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from sklearn import linear_model\r\n        from sklearn.metrics import mean_squared_error\r\n        from sklearn.pipeline import make_pipeline\r\n        from js import X_train,y_train,X_test,knots,degree,y_test,features,explain\r\n\r\n\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n        \r\n        model = make_pipeline(\r\n            SplineTransformer(n_knots=knots, degree=degree), \r\n            linear_model.LinearRegression()\r\n            )\r\n        model.fit(X_train, y_train)\r\n        pred_train = model.predict(X_train)\r\n        rmse_train = mean_squared_error(y_train, pred_train, squared=True)\r\n        y_pred = model.predict(X_test)\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,method ='brute')\r\n            fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance\r\n\r\n        `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDPRegression(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n    }\r\n}","import { ClassificationModel } from \"../model\";\r\nimport { asyncRun } from \"@/helpers/py-worker\";\r\n\r\nexport default class SupportVectorMachine extends ClassificationModel {\r\n    constructor(opt) {\r\n        super();\r\n        // eslint-disable-next-line no-unused-vars\r\n        this.options = {\r\n            kernel: opt.kernel.value.toLowerCase(),\r\n            coef: opt.bias.value,\r\n            degree: opt.degree.value,\r\n            c: opt.c.value,\r\n            quiet: true\r\n        };\r\n        this.helpSectionId = 'svm_help';\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    async train(x_train, y_train, x_test, y_test, columns, __, pdpIndex) {\r\n\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            pdpIndex: pdpIndex,\r\n            explain: this.hasExplaination,\r\n            kernel: this.options.kernel,\r\n            coef: this.options.coef,\r\n            c: +this.options.c,\r\n            degree: this.options.degree,\r\n            seed: this.seed,\r\n            features: [...Array(columns.length).keys()]\r\n\r\n        };\r\n        const script = `\r\n        from sklearn import svm\r\n        from js import X_train,y_train,X_test,y_test,kernel,coef,degree,features,seed,c,explain\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n\r\n        model = svm.SVC(kernel=kernel,random_state = seed,C=c,degree=degree)\r\n        model.fit(X_train, y_train)\r\n        y_pred = model.predict(X_test)\r\n\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,target=0,method ='brute')\r\n            fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids,features_importance\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    generatePythonCode() {\r\n        let model_import = \"from sklearn import svm\"\r\n        let model_fit = `\r\nmodel = model = svm.SVC(kernel=\"${this.options.kernel}\",random_state = ${this.seed})`\r\n        return super.generatePythonCode(model_import, model_fit)\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDP(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n    }\r\n}","import { RegressionModel } from \"../regression_model\";\r\nimport { asyncRun } from \"@/helpers/py-worker\";\r\nexport default class SupportVectorMachineRegression extends RegressionModel {\r\n    constructor(opt, chartControler) {\r\n        super(chartControler);\r\n        let options = {\r\n            kernel: opt.kernel.value ?? \"linear\",\r\n            gamma: opt.gamma.value,\r\n            degree: opt.degree.value,\r\n        }\r\n        this.options = options;\r\n        this.helpSectionId = 'svm_help';\r\n\r\n    }\r\n    async train(x_train, y_train, x_test, y_test, columns) {\r\n\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            kernel: this.options.kernel,\r\n            gamma: this.options.gamma,\r\n            degree: this.options.degree,\r\n            explain: this.hasExplaination,\r\n            seed: this.seed,\r\n            features: [...Array(columns.length).keys()]\r\n        };\r\n        const script = `\r\n        from sklearn import svm\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from js import X_train,y_train,X_test,y_test,kernel,gamma,degree,seed,features,explain\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n\r\n        \r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n        model = svm.SVR(kernel=kernel)\r\n        model.fit(X_train, y_train)\r\n        y_pred = model.predict(X_test)\r\n\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(model, X_train, features)\r\n            fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDPRegression(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n    }\r\n}","\r\nimport { ClassificationModel } from '../model';\r\nimport { asyncRun } from \"@/helpers/py-worker\";\r\n\r\nexport default class KNNModel extends ClassificationModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options\r\n        this.model = null;\r\n        this.helpSectionId = 'knn_help';\r\n\r\n\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    async train(x, y, x_test, y_test, columns, __, pdpIndex) {\r\n        this.context = {\r\n            X_train: x,\r\n            y_train: y,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            min: +this.options.min.value,\r\n            max: +this.options.max.value,\r\n            explain: this.hasExplaination,\r\n            features: [...Array(columns.length).keys()]\r\n        };\r\n        const script = `\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from js import X_train,y_train,X_test,y_test,features,min,max,explain\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        from sklearn.neighbors import KNeighborsClassifier\r\n        from sklearn.metrics import accuracy_score\r\n\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n\r\n        k_neighbor_results=[]\r\n        best_model = None\r\n        best_accuracy = 0\r\n        best_preds = []\r\n        for i,metric in enumerate(['manhattan','euclidean']):\r\n            for n in range(min,max+1):\r\n                model = KNeighborsClassifier(n_neighbors=n,metric=metric)\r\n                model.fit(X_train, y_train)\r\n                preds = model.predict(X_test)\r\n                accuracy = accuracy_score(y_test,preds)\r\n                k_neighbor_results.append([metric,n,accuracy])\r\n                if accuracy > best_accuracy:\r\n                    best_accuracy = accuracy\r\n                    best_model = model\r\n                    best_n = n\r\n                    best_preds = preds\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(best_model, X_train, features,target=0,method ='brute')\r\n            fi = permutation_importance(best_model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        best_preds,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance,k_neighbor_results,best_n\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                this.k_neighbor_results = Array.from(results[4]);\r\n                this.best_n = results[5];\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    generatePythonCode() {\r\n        let model_import = `\r\nfrom sklearn.neighbors import KNeighborsClassifier\r\nfrom sklearn.metrics import accuracy_score`.trim();\r\n        let model_fit = `\r\nbest_model = None\r\nbest_accuracy = 0\r\nbest_preds = []\r\nfor i,metric in enumerate(['manhattan','euclidean']):\r\n    for n in range(${+this.options.min.value},${+this.options.max.value + 1}):\r\n        model = KNeighborsClassifier(n_neighbors=n,metric=metric)\r\n        model.fit(X_train, y_train)\r\n        preds = model.predict(X_test)\r\n        accuracy = accuracy_score(y_test,preds)\r\n        if accuracy > best_accuracy:\r\n            best_accuracy = accuracy\r\n            best_model = model\r\n            best_n = n\r\n            best_preds = preds\r\nmodel = best_model\r\n`.trim();\r\n        return super.generatePythonCode(model_import, model_fit)\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        this.chartController.KNNPerformancePlot(this.k_neighbor_results, this.best_n, this.id);\r\n        this.plots.push('knn_table_' + this.id);\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDP(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n\r\n    }\r\n\r\n}","\r\nimport { RegressionModel } from '../regression_model'\r\nimport { asyncRun } from \"@/helpers/py-worker\";\r\n\r\nexport default class KNNRegressor extends RegressionModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options\r\n        this.model = null;\r\n        this.helpSectionId = 'knn_help';\r\n\r\n\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    async train(x, y, x_test, y_test, columns, __, pdpIndex) {\r\n        this.context = {\r\n            X_train: x,\r\n            y_train: y,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            min: +this.options.min.value,\r\n            max: +this.options.max.value,\r\n            explain: this.hasExplaination,\r\n            features: [...Array(columns.length).keys()]\r\n        };\r\n        const script = `\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from js import X_train,y_train,X_test,y_test,features,min,max,explain\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        from sklearn.neighbors import KNeighborsRegressor\r\n\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n        k_neighbor_results=[]\r\n        best_model = None\r\n        best_r2 = 0\r\n        best_preds = []\r\n\r\n        for i,metric in enumerate(['manhattan','euclidean']):\r\n            for n in range(min,max+1):\r\n                model = KNeighborsRegressor(n_neighbors=n,metric=metric)\r\n                model.fit(X_train, y_train)\r\n                preds = model.predict(X_test)\r\n                r2 = model.score(X_test,y_test)\r\n                k_neighbor_results.append([metric,n,r2])\r\n                if r2 > best_r2:\r\n                    best_r2 = r2\r\n                    best_model = model\r\n                    best_n = n\r\n                    best_preds = preds\r\n\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(best_model, X_train, features)\r\n            fi = permutation_importance(best_model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        best_preds,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance,k_neighbor_results,best_n\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                this.k_neighbor_results = Array.from(results[4]);\r\n                this.best_n = results[5];\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        this.chartController.KNNPerformancePlot(this.k_neighbor_results, this.best_n, this.id, \"MSE\");\r\n        this.plots.push('knn_table_' + this.id);\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDPRegression(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n    }\r\n}","import { asyncRun } from \"@/helpers/py-worker\";\r\nimport { ClassificationModel } from \"../model\";\r\n\r\n\r\nexport default class RandomForest extends ClassificationModel {\r\n    constructor(options, chartController) {\r\n        super(chartController)\r\n        this.helpSectionId = 'cart_help';\r\n        this.options = options;\r\n        this.model = null;\r\n        this.predictions = [];\r\n        this.hasProbability = true;\r\n\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    async train(x_train, y_train, x_test, y_test, columns, __, pdpIndex) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            pdpIndex: pdpIndex,\r\n            explain: this.hasExplaination,\r\n            rf_type: this.options.criteria.value,\r\n            max_features: this.options.features.value,\r\n            num_estimators: this.options.estimators.value <= 0 || !this.options.estimators.value ? 100 : +this.options.estimators.value,\r\n            max_depth: this.options.depth.value <= 0 ? 5 : +this.options.depth.value,\r\n            seed: this.seed,\r\n            features: [...Array(columns.length).keys()],\r\n            num_classes: [...new Set(y_train)].length,\r\n\r\n\r\n        };\r\n        const script = `\r\n            from sklearn.model_selection import train_test_split\r\n            from sklearn.ensemble import RandomForestClassifier\r\n            from sklearn.metrics import accuracy_score\r\n            import matplotlib\r\n            matplotlib.use(\"AGG\")\r\n            from sklearn.inspection import PartialDependenceDisplay\r\n            from sklearn.inspection import permutation_importance\r\n            from js import seed,X_train,y_train,X_test,y_test,rf_type,max_features,num_estimators,max_depth, features,explain,num_classes\r\n            from sklearn.metrics import roc_auc_score\r\n            from sklearn.metrics import roc_curve\r\n            from sklearn.preprocessing import LabelBinarizer\r\n\r\n\r\n            features_importance = []\r\n            partial_dependence_plot_grids = []\r\n            partial_dependence_plot_avgs = []\r\n            model = RandomForestClassifier(criterion=rf_type,max_features = max_features,n_estimators=num_estimators,max_depth = max_depth, random_state=seed)\r\n            model.fit(X_train, y_train)\r\n            y_pred = model.predict(X_test)\r\n            \r\n            probas = model.predict_proba(X_test)\r\n            tprs=[]\r\n            fprs=[]\r\n            aucs=[]\r\n            label_binrize = LabelBinarizer().fit(y_train)\r\n            y_test_one_hot = label_binrize.transform(y_test)\r\n            \r\n            try:\r\n                fpr,tpr,_  = roc_curve(y_test,probas[:,1])\r\n                fprs.append(fpr)\r\n                tprs.append(tpr)\r\n                auc = roc_auc_score(y_test,probas[:,1])\r\n                aucs.append(auc)\r\n            except Exception as e:\r\n                auc = roc_auc_score(y_test,probas,multi_class = 'ovr')\r\n                aucs.append(auc)\r\n                for i in range(num_classes):\r\n                    fpr,tpr,_ = roc_curve(y_test_one_hot[:,i],probas[:,i])\r\n                    fprs.append(fpr)\r\n                    tprs.append(tpr)\r\n\r\n            if explain:\r\n                pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,target=0,method ='brute')\r\n                fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n                partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n                grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n                features_importance = list(fi.importances)\r\n                partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n            y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids,features_importance,fprs,tprs,aucs,probas\r\n        `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                this.fpr = Array.from(results[4]);\r\n                this.tpr = Array.from(results[5]);\r\n                this.auc = Array.from(results[6]);\r\n                this.probas = Array.from(results[7]);\r\n\r\n            } else if (error) {\r\n                throw Error(\"Faced errot fitting Random Forest\")\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n        }\r\n        return this.predictions\r\n    }\r\n    generatePythonCode() {\r\n        let model_import = \"from sklearn.ensemble import RandomForestClassifier\"\r\n        let model_fit = `\r\nmodel = RandomForestClassifier(criterion=\"${this.options.criteria.value}\",max_features = ${this.options.features.value},n_estimators=${this.options.estimators.value},max_depth = ${this.options.depth.value}, random_state=${this.seed})`\r\n        return super.generatePythonCode(model_import, model_fit)\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDP(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n        this.chartController.plotROC(this.id, this.fpr, this.tpr, uniqueLabels, this.auc);\r\n        this.chartController.probabilities_boxplot(this.probas, encoder.inverseTransform(predictions), uniqueLabels, this.id);\r\n    }\r\n    predict() {\r\n        return this.predictions;\r\n    }\r\n}","\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\nimport { asyncRun } from \"@/helpers/py-worker\";\r\nimport { RegressionModel } from \"../regression_model\";\r\n\r\n\r\nexport default class RandomForestRegressor extends RegressionModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options;\r\n        this.model = null;\r\n        this.helpSectionId = 'cart_help';\r\n\r\n    }\r\n    async train(x_train, y_train, x_test, y_test, columns, __, pdpIndex) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            rf_type: this.options.criteria.value,\r\n            max_features: this.options.features.value,\r\n            num_estimators: this.options.estimators.value <= 0 || !this.options.estimators.value ? 100 : +this.options.estimators.value,\r\n            max_depth: this.options.depth.value <= 0 ? 5 : +this.options.depth.value,\r\n            seed: this.seed,\r\n            explain: this.hasExplaination,\r\n            features: [...Array(columns.length).keys()]\r\n        };\r\n        const script = `\r\n            from sklearn.model_selection import train_test_split\r\n            from sklearn.ensemble import RandomForestRegressor\r\n            import matplotlib\r\n            matplotlib.use(\"AGG\")\r\n            from sklearn.metrics import accuracy_score\r\n            from js import X_train,y_train,X_test,y_test,rf_type,max_features,num_estimators,max_depth,seed,features,explain\r\n            from sklearn.inspection import PartialDependenceDisplay\r\n            from sklearn.inspection import permutation_importance\r\n\r\n            features_importance = []\r\n            partial_dependence_plot_grids = []\r\n            partial_dependence_plot_avgs = []\r\n            model = RandomForestRegressor(criterion=rf_type,max_features = max_features,n_estimators=num_estimators,max_depth = max_depth, random_state=seed)\r\n            model.fit(X_train, y_train)\r\n            y_pred = model.predict(X_test)\r\n\r\n            if explain:\r\n                pdp = PartialDependenceDisplay.from_estimator(model, X_train, features)\r\n                fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n                partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n                grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n                features_importance = list(fi.importances)\r\n                partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n            y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance           \r\n        `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n\r\n    }\r\n\r\n    predict(x_test) {\r\n        const result = this.model.predict(x_test);\r\n        return result\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDPRegression(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n    }\r\n}","import { asyncRun } from \"@/helpers/py-worker\";\r\nimport { ClassificationModel } from '../model';\r\n\r\nexport default class NaiveBayes extends ClassificationModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options\r\n        this.model = null;\r\n        this.helpSectionId = 'naive_bayes_help';\r\n        this.hasProbability = true;\r\n\r\n\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    async train(x_train, y_train, x_test, y_test, columns, __, pdpIndex) {\r\n        // const priors = this.options.priors.value ? this.options.priors?.value.split(',').map((m) => parseFloat(m)) : undefined\r\n        this.context = {\r\n            nb_type: this.options.type.value === \"Multinomial\" ? 0 : this.options.type.value === \"Gaussian\" ? 1 : 2,\r\n            priors: this.options.priors.value,\r\n            smoothing: +this.options.laplace.value,\r\n            num_classes: [...new Set(y_train)].length,\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            y_test: y_test,\r\n            explain: this.hasExplaination,\r\n            X_test: x_test,\r\n\r\n            pdpIndex: pdpIndex,\r\n            features: [...Array(columns.length).keys()]\r\n\r\n        };\r\n        const script = `\r\n            from sklearn.naive_bayes import BernoulliNB\r\n            from sklearn.naive_bayes import MultinomialNB\r\n            import matplotlib\r\n            matplotlib.use(\"AGG\")\r\n            from js import X_train,y_train,X_test,nb_type,priors,smoothing,y_test,num_classes,features,explain\r\n            from sklearn.naive_bayes import GaussianNB\r\n            from sklearn.inspection import PartialDependenceDisplay\r\n            from sklearn.inspection import permutation_importance\r\n            from sklearn.metrics import roc_auc_score\r\n            from sklearn.metrics import roc_curve\r\n            from sklearn.preprocessing import LabelBinarizer\r\n\r\n            features_importance = []\r\n            partial_dependence_plot_grids = []\r\n            partial_dependence_plot_avgs = []\r\n            if priors is not None and priors.strip():\r\n                priors = [float(x) for x in priors.split(',')]\r\n            else:\r\n                priors = None\r\n            print(\"priors\",priors)\r\n            if nb_type == 0:\r\n                model = MultinomialNB(class_prior=priors , alpha = smoothing)\r\n            if nb_type == 1:\r\n                model = GaussianNB(priors=priors)\r\n            else:\r\n                model = BernoulliNB(class_prior=priors , alpha = smoothing)\r\n            model.fit(X_train, y_train)\r\n            y_pred = model.predict(X_test)\r\n            probas = model.predict_proba(X_test)\r\n            tprs=[]\r\n            fprs=[]\r\n            aucs = []\r\n\r\n            label_binrize = LabelBinarizer().fit(y_train)\r\n            y_test_one_hot = label_binrize.transform(y_test)\r\n            \r\n            try:\r\n                fpr,tpr,_  = roc_curve(y_test,probas[:,1])\r\n                auc = roc_auc_score(y_test,probas[:,1])\r\n                aucs.append(auc)\r\n                fprs.append(fpr)\r\n                tprs.append(tpr)\r\n\r\n            except Exception as e:\r\n                print(e)\r\n                auc = roc_auc_score(y_test,probas,multi_class = 'ovr')\r\n                aucs.append(auc)\r\n                for i in range(num_classes):\r\n                    fpr,tpr,_ = roc_curve(y_test_one_hot[:,i],probas[:,i])\r\n                    fprs.append(fpr)\r\n                    tprs.append(tpr)\r\n\r\n            if explain:\r\n                pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,target=0,method ='brute')\r\n                fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n                partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n                grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n                features_importance = list(fi.importances)\r\n                partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n            y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance,fprs,tprs,aucs,probas\r\n        `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                this.fpr = Array.from(results[4]);\r\n                this.tpr = Array.from(results[5]);\r\n                this.auc = Array.from(results[6]);\r\n                this.probas = Array.from(results[7]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n        return this.predictions;\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDP(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n        this.chartController.plotROC(this.id, this.fpr, this.tpr, uniqueLabels, this.auc);\r\n        this.chartController.probabilities_boxplot(this.probas, encoder.inverseTransform(predictions), uniqueLabels, this.id);\r\n    }\r\n}","import { asyncRun } from \"@/helpers/py-worker\";\r\nimport { ClassificationModel } from \"../model\";\r\nexport default class DiscriminantAnalysis extends ClassificationModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options\r\n        this.hasProbability = true;\r\n        this.helpSectionId = 'discriminant_analysis_help';\r\n\r\n    }\r\n    async train(x, y, x_test, y_test, columns, __, pdpIndex) {\r\n        this.context = {\r\n            lda_type: this.options.type.value,\r\n            priors: this.options.priors.value,\r\n            X_train: x,\r\n            y_train: y,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            pdpIndex: pdpIndex,\r\n            explain: this.hasExplaination,\r\n            features: [...Array(columns.length).keys()],\r\n            num_classes: [...new Set(y)].length,\r\n\r\n\r\n        };\r\n        const script = `\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from sklearn.discriminant_analysis import QuadraticDiscriminantAnalysis\r\n        from sklearn.discriminant_analysis import LinearDiscriminantAnalysis\r\n        from js import X_train,y_train,X_test,lda_type,priors,y_test,features,explain,num_classes\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        from sklearn.metrics import roc_auc_score\r\n        from sklearn.metrics import roc_curve\r\n        from sklearn.preprocessing import LabelBinarizer\r\n\r\n\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n        if priors is not None and priors.strip():\r\n            priors = [float(x) for x in priors.split(',')]\r\n        else:\r\n            priors = None\r\n        print(\"priors\",priors)\r\n        if lda_type == 0:\r\n            model = LinearDiscriminantAnalysis(priors=priors)\r\n        else:\r\n            model = QuadraticDiscriminantAnalysis(priors=priors)\r\n        model.fit(X_train, y_train)\r\n        y_pred = model.predict(X_test)\r\n        probas = model.predict_proba(X_test)\r\n        tprs=[]\r\n        fprs=[]\r\n        aucs = []\r\n        label_binrize = LabelBinarizer().fit(y_train)\r\n        y_test_one_hot = label_binrize.transform(y_test)\r\n        \r\n        try:\r\n            fpr,tpr,_  = roc_curve(y_test,probas[:,1])\r\n            auc = roc_auc_score(y_test,probas[:,1])\r\n            aucs.append(auc)\r\n            fprs.append(fpr)\r\n            tprs.append(tpr)\r\n\r\n        except Exception as e:\r\n            auc = roc_auc_score(y_test,probas,multi_class = 'ovr')\r\n            aucs.append(auc)\r\n            for i in range(num_classes):\r\n                fpr,tpr,_ = roc_curve(y_test_one_hot[:,i],probas[:,i])\r\n                fprs.append(fpr)\r\n                tprs.append(tpr)\r\n\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,target=0,method ='brute')\r\n            fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance,fprs,tprs,aucs,probas\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                this.fpr = Array.from(results[4]);\r\n                this.tpr = Array.from(results[5]);\r\n                this.auc = Array.from(results[6]);\r\n                this.probas = Array.from(results[7]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDP(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n        this.chartController.plotROC(this.id, this.fpr, this.tpr, uniqueLabels, this.auc);\r\n        this.chartController.probabilities_boxplot(this.probas,  encoder.inverseTransform(predictions), uniqueLabels, this.id);\r\n    }\r\n\r\n}\r\n","\r\n/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\n\r\n\r\nimport { RegressionModel } from '../regression_model';\r\n\r\nexport default class PolynomialRegression extends RegressionModel {\r\n    constructor(options) {\r\n        super();\r\n        this.options = options;\r\n        this.model = null;\r\n        this.hasExplaination = false\r\n        this.summary = null;\r\n        this.model_stats_matrix = null;\r\n\r\n    }\r\n\r\n    async train(x_train, y_train, x_test, y_test, labels, categorical_columns) {\r\n\r\n        let regularization_type = this.options?.regularization?.value === \"Lasso\" ? 1 : 0;\r\n        let degree = +this.options?.degree?.value;\r\n\r\n        const webR = window.webr;\r\n        await webR.init();\r\n        await webR.installPackages(['jsonlite', 'ggplot2', 'plotly', 'tidyr', 'broom', 'dplyr', 'ggrepel', 'glmnet', 'modelsummary'], { quiet: true });\r\n        await webR.objs.globalEnv.bind('xx', x_train);\r\n        await webR.objs.globalEnv.bind('x_test', x_test);\r\n        await webR.objs.globalEnv.bind('random_seed', this.seed);\r\n\r\n        await webR.objs.globalEnv.bind('y', y_train);\r\n        await webR.objs.globalEnv.bind('degree', degree);\r\n        await webR.objs.globalEnv.bind('names', labels);\r\n        await webR.objs.globalEnv.bind('categorical_columns', categorical_columns?.length === 0 ? ['empty'] : categorical_columns);\r\n\r\n        await webR.objs.globalEnv.bind('is_lasso', regularization_type);\r\n\r\n\r\n        const plotlyData = await webR.evalR(`\r\n                    library(plotly)\r\n                    library(ggplot2)\r\n                    library(tidyr)\r\n                    library(dplyr)\r\n                    library(broom)\r\n\r\n                    library(ggrepel)\r\n                    library(modelsummary)\r\n                    library(glmnet)\r\n                    set.seed(random_seed)\r\n\r\n                    # Select all columns except the first as predictors. \r\n                    add_powers <- function(df, degree,columns) {\r\n                            new_df <- df  # Copy the original data frame\r\n                            for (col in columns) {\r\n                                for (d in 2:degree){\r\n                                    new_col_name <- paste0(col, \"_\", d)\r\n                                    new_df[[new_col_name]] <- df[[col]]^d\r\n                                }\r\n                            }\r\n                            return(new_df)\r\n                        }\r\n                        \r\n                    x <- as.matrix(xx)  \r\n                    colnames(x) <- names\r\n                    cols_numerical <- setdiff(names, categorical_columns)\r\n                    df_main <- add_powers(as.data.frame(x), degree,cols_numerical)\r\n                    scale_df <- add_powers(as.data.frame(x), degree,cols_numerical)\r\n                    all_column_names <- colnames(scale_df)\r\n                    cols_to_scale <- setdiff(all_column_names, categorical_columns)\r\n                    scale_df[cols_to_scale] <- scale(scale_df[cols_to_scale])\r\n                    \r\n                    x <- as.matrix(x_test)  \r\n                    colnames(x) <- names\r\n                    df_test <- add_powers(as.data.frame(x), degree,cols_numerical)\r\n                    base_model = cv.glmnet(as.matrix(scale_df), y)\r\n                    weights <- 1 / abs(coef(base_model)[-1])\r\n\r\n                    if(is_lasso){\r\n                        cvfit = cv.glmnet(as.matrix(scale_df), y, alpha = 1)\r\n                    }else{\r\n                       cvfit = cv.glmnet(as.matrix(scale_df), y, alpha = 0)\r\n                    }\r\n                    betas = as.matrix(cvfit$glmnet.fit$beta)\r\n                    lambdas = cvfit$lambda\r\n                    names(lambdas) = colnames(betas)\r\n                    \r\n                    p <- as.data.frame(betas) %>% \r\n                      tibble::rownames_to_column(\"variable\") %>% \r\n                      pivot_longer(-variable) %>% \r\n                      mutate(lambda=lambdas[name]) %>% \r\n                      mutate(variable = factor(variable, levels = sort(unique(variable)))) %>%\r\n\r\n                    ggplot(aes(x=lambda,y=value,col=variable)) + \r\n                      geom_line() + \r\n                      geom_label_repel(data=~subset(.x,lambda==min(lambda)),\r\n                                       aes(label=variable),nudge_x=-0.5) +\r\n                      geom_vline(xintercept=c(cvfit$lambda.1se,cvfit$lambda.min),\r\n                                linetype=\"dashed\")+\r\n                      scale_x_log10() +\r\n                      labs(y = \"Coefficient\") +\r\n                    theme_bw()\r\n                    \r\n                    df = with(cvfit,\r\n                            data.frame(lambda = lambdas,MSE = cvm,MSEhi=cvup,MSElow=cvlo))\r\n\r\n                    p2<-ggplot(df,aes(x=lambda,y=MSE)) + \r\n                    geom_point(col=\"#f05454\") + \r\n                    scale_x_log10(\"lambda\") + \r\n                    geom_errorbar(aes(ymin = MSElow,ymax=MSEhi),col=\"#30475e\") + \r\n                    geom_vline(xintercept=c(cvfit$lambda.1se,cvfit$lambda.min),\r\n                                linetype=\"dashed\")+\r\n                    theme_bw()\r\n\r\n                     # Get lambda.min and lambda.1se\r\n                    lambda_min = cvfit$lambda.min\r\n                    lambda_1se = cvfit$lambda.1se\r\n\r\n                    # Get the coefficients at lambda.min and lambda.1se\r\n                    coef_lambda_min = coef(cvfit, s = \"lambda.min\")\r\n                    coef_lambda_1se = coef(cvfit, s = \"lambda.1se\")\r\n\r\n                    # Convert the sparse matrix to a regular matrix to make indexing easier\r\n                    coef_lambda_min_matrix = as.matrix(coef_lambda_min)\r\n                    coef_lambda_1se_matrix = as.matrix(coef_lambda_1se)\r\n                    coef_lambda_min_matrix = coef_lambda_min_matrix[-1, , drop = FALSE]\r\n                    coef_lambda_1se_matrix = coef_lambda_1se_matrix[-1, , drop = FALSE]\r\n                    # Find the non-zero features at lambda.min and lambda.1se\r\n                    non_zero_features_min = rownames(coef_lambda_min_matrix)[coef_lambda_min_matrix != 0]\r\n                    non_zero_features_1se = rownames(coef_lambda_1se_matrix)[coef_lambda_1se_matrix != 0]\r\n                    print(non_zero_features_min)\r\n                    print(non_zero_features_1se)\r\n                    x <- as.matrix(df_main)\r\n                    colnames(x) <- all_column_names\r\n\r\n                    model <- lm(y ~ ., data = as.data.frame(x))\r\n\r\n                    x <- as.matrix(df_test)  \r\n                    colnames(x) <- all_column_names\r\n\r\n                    predictions <- predict(model, newdata = as.data.frame(x))\r\n                    # Get coefficients, p-values, and standard errors\r\n                    coefs <- coef(model)\r\n                    pvals <- summary(model)$coefficients[,4]\r\n                    std_error <- summary(model)$coefficients[,2]\r\n                    aic_value <- AIC(model)\r\n                    bic_value <- BIC(model)\r\n                    rsquared <- summary(model)$r.squared\r\n                    residuals_ols <- resid(model)\r\n                    fitted_values_ols <- fitted(model)\r\n\r\n                    x <- as.matrix(df_main)  \r\n                    colnames(x) <- all_column_names\r\n                    X_reduced <- x[, non_zero_features_min]\r\n                    linear_model_min_features <- non_zero_features_min\r\n                    # Fit a linear regression model using the non-zero features\r\n                    print(colnames(X_reduced))\r\n                    linear_model_min <- lm(y ~ ., data = as.data.frame(X_reduced))\r\n                    coefs_min <- coef(linear_model_min)\r\n                    pvals_min <- summary(linear_model_min)$coefficients[,4]\r\n                    std_error_min <- summary(linear_model_min)$coefficients[,2]\r\n                    aic_min <- AIC(linear_model_min)\r\n                    rsquared_min <- summary(linear_model_min)$r.squared\r\n                    best_lambda <- cvfit$lambda.1se\r\n                    best_model <- glmnet(x, y, alpha =is_lasso, lambda = best_lambda)\r\n                    coefficients <- as.matrix(coef(best_model))\r\n                    residuals_min <- resid(linear_model_min)\r\n                    fitted_values_min <- fitted(linear_model_min)\r\n                    x <- as.matrix(df_test)  \r\n                    colnames(x) <- all_column_names\r\n                    predictions_min <- predict(linear_model_min, newdata = as.data.frame(x))\r\n\r\n\r\n\r\n\r\n\r\n                    x <- as.matrix(df_main)  \r\n                    colnames(x) <- all_column_names\r\n                    \r\n                    X_reduced <- x[, non_zero_features_1se]\r\n                    linear_model_1se_features <- non_zero_features_1se\r\n                    print(colnames(X_reduced))\r\n                    linear_model_1se <- lm(y ~ ., data = as.data.frame(X_reduced))\r\n                    coefs_1se <- coef(linear_model_1se)\r\n                    print(coefs_1se)\r\n                    pvals_1se <- summary(linear_model_1se)$coefficients[,4]\r\n                    aic_1se<- AIC(linear_model_1se)\r\n                    rsquared_1se <- summary(linear_model_1se)$r.squared\r\n                    std_error_1se <- summary(linear_model_1se)$coefficients[,2]\r\n                    residuals_1se <- resid(linear_model_1se)\r\n                    fitted_values_1se <- fitted(linear_model_1se)\r\n                    x <- as.matrix(df_test) \r\n                    colnames(x) <- all_column_names \r\n                    x <- x[, linear_model_1se_features]\r\n                    predictions_1se <- predict(linear_model_1se, newdata = as.data.frame(x))\r\n                    models <- list(\r\n                        \"OLS\" = model,\r\n                        \"Lasso Min \" = linear_model_min,\r\n                        \"Lasso 1se \" = linear_model_1se\r\n                        )\r\n\r\n                    z <- modelplot(models =models,coef_omit = 'Interc')\r\n                    qqplot_ols <-ggplot(data.frame(residuals = residuals_ols), aes(sample = residuals_ols)) +\r\n                        stat_qq(color = \"blue\") +\r\n                        stat_qq_line(col = \"red\") +\r\n                        labs(title = \"QQ Plot of Residuals\",\r\n                            x = \"Theoretical Quantiles\",\r\n                            y = \"Sample Quantiles\") +\r\n                        theme_bw()\r\n                    qqplot_1se <-ggplot(data.frame(residuals = residuals_1se), aes(sample = residuals_1se)) +\r\n                        stat_qq(color = \"blue\") +\r\n                        stat_qq_line(col = \"red\") +\r\n                        labs(title = \"QQ Plot of Residuals\",\r\n                            x = \"Theoretical Quantiles\",\r\n                            y = \"Sample Quantiles\") +\r\n                        theme_bw()\r\n                    qqplot_min <-ggplot(data.frame(residuals = residuals_min), aes(sample = residuals_min)) +\r\n                        stat_qq(color = \"blue\") +\r\n                        stat_qq_line(col = \"red\") +\r\n                        labs(title = \"QQ Plot of Residuals\",\r\n                            x = \"Theoretical Quantiles\",\r\n                            y = \"Sample Quantiles\") +\r\n                        theme_bw()\r\n                    list(plotly_json(p, pretty = FALSE),plotly_json(p2, pretty = FALSE),coefs,\r\n                    pvals,std_error,predictions,aic_value,bic_value,rsquared\r\n                    ,coefs_min,pvals_min,std_error_min\r\n                    ,coefs_1se,pvals_1se,std_error_1se,plotly_json(z, pretty = FALSE),linear_model_min_features,linear_model_1se_features\r\n                    ,residuals_ols,residuals_1se,residuals_min,predictions_1se,predictions_min,rsquared_1se,aic_1se,rsquared_min,aic_min\r\n                    ,plotly_json(qqplot_ols, pretty = FALSE)\r\n                    ,plotly_json(qqplot_1se, pretty = FALSE)\r\n                    ,plotly_json(qqplot_min, pretty = FALSE)\r\n                    ,all_column_names\r\n                    )\r\n                    `);\r\n        let results = await plotlyData.toArray()\r\n\r\n        this.summary = {\r\n            params: await results[2].toArray(),\r\n            bse: await results[4].toArray(),\r\n            pvalues: await results[3].toArray(),\r\n            predictions: await results[5].toArray(),\r\n            predictions1se: await results[21].toArray(),\r\n            predictionsmin: await results[22].toArray(),\r\n            residuals_ols: await results[18].toArray(),\r\n            residuals_1se: await results[19].toArray(),\r\n            residuals_min: await results[20].toArray(),\r\n            aic: await results[6].toNumber(),\r\n            bic: await results[7].toNumber(),\r\n            r2: await results[8].toNumber(),\r\n            best_fit_min: {\r\n                r2: await results[25].toNumber(),\r\n                aic: await results[26].toNumber(),\r\n                names: await results[16].toArray(),\r\n                coefs: await results[9].toArray(),\r\n                bse: await results[11].toArray(),\r\n                pvalues: await results[10].toArray(),\r\n            },\r\n            best_fit_1se: {\r\n                r2: await results[23].toNumber(),\r\n                aic: await results[24].toNumber(),\r\n                names: await results[17].toArray(),\r\n                coefs: await results[12].toArray(),\r\n                bse: await results[14].toArray(),\r\n                pvalues: await results[13].toArray(),\r\n            },\r\n            columnNames: await results[30].toArray()\r\n        };\r\n        this.model_stats_matrix = [];\r\n        let cols = this.summary.columnNames\r\n        cols.unshift(\"intercept\")\r\n        let min_ols_columns = this.summary['best_fit_min'].names;\r\n\r\n        min_ols_columns.unshift('intercept');\r\n        let se_ols_columns = this.summary['best_fit_1se'].names;\r\n        se_ols_columns.unshift('intercept');\r\n        function isNumeric(value) {\r\n            return /^-?\\d+$/.test(value);\r\n        }\r\n\r\n        for (let i = 0; i < cols.length; i++) {\r\n            let row = [];\r\n            row.push(cols[i])\r\n            row.push(this.summary['params'][i]?.toFixed(2) ?? ' ')\r\n            row.push(this.summary['bse'][i]?.toFixed(2) ?? ' ')\r\n            row.push(this.summary['pvalues'][i]?.toFixed(2) ?? ' ')\r\n            let index = min_ols_columns.findIndex(m => m === cols[i])\r\n            if (index !== -1) {\r\n                row.push(this.summary['best_fit_min']['coefs'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_min']['bse'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_min']['pvalues'][index]?.toFixed(2) ?? ' ')\r\n            } else {\r\n                row.push(' ')\r\n                row.push(' ')\r\n                row.push(' ')\r\n            }\r\n            index = se_ols_columns.findIndex(m => m === cols[i])\r\n            if (index !== -1) {\r\n                row.push(this.summary['best_fit_1se']['coefs'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_1se']['bse'][index]?.toFixed(2) ?? ' ')\r\n                row.push(this.summary['best_fit_1se']['pvalues'][index]?.toFixed(2) ?? ' ')\r\n            } else {\r\n                row.push(' ')\r\n                row.push(' ')\r\n                row.push(' ')\r\n            }\r\n            this.model_stats_matrix.push(row)\r\n        }\r\n        this.model_stats_matrix = this.model_stats_matrix.sort(function (a, b) {\r\n            if (a[0] > b[0]) {\r\n                return 1\r\n            }\r\n            if (a[0] < b[0]) {\r\n                return -1\r\n            }\r\n            return 0\r\n        })\r\n        this.model_stats_matrix.reverse()\r\n        let reg_plot = JSON.parse(await results[0].toString())\r\n        reg_plot.layout['showlegend'] = true;\r\n        reg_plot.layout['autosize'] = true;\r\n        reg_plot.layout['responsive'] = true;\r\n        reg_plot.layout.xaxis['side'] = 'top';\r\n        reg_plot.layout.legend = {\r\n            orientation: 'h',\r\n            font: {\r\n\r\n                size: 8,\r\n                color: '#000'\r\n            },\r\n        };\r\n        let coefs_plot = JSON.parse(await results[15].toString())\r\n        coefs_plot.layout.legend = {\r\n            x: 0,\r\n            y: 1,\r\n            traceorder: 'normal',\r\n            font: {\r\n\r\n                size: 8,\r\n                color: '#000'\r\n            },\r\n        };\r\n        this.summary.coefs_plot = coefs_plot;\r\n        this.summary.coefs_plot.layout['autosize'] = true;\r\n        this.summary.coefs_plot.layout['responsive'] = true;\r\n        this.summary.coefs_plot.layout.xaxis.title.font = {\r\n            size: 10\r\n        };\r\n        this.summary.regularization_plot = reg_plot;\r\n        this.summary.errors_plot = JSON.parse(await results[1].toString());\r\n        this.summary.qqplot_ols_plot = JSON.parse(await results[27].toString());\r\n        this.summary.qqplot_1se_plot = JSON.parse(await results[28].toString());\r\n        this.summary.qqplot_min_plot = JSON.parse(await results[29].toString());\r\n\r\n        this.summary.qqplot_ols_plot.layout.height = 300\r\n        this.summary.qqplot_ols_plot.layout.width = 300\r\n        this.summary.qqplot_ols_plot.layout.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_ols_plot.data[0].marker.size = 3;\r\n        this.summary.qqplot_ols_plot.layout.xaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_ols_plot.layout.yaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n\r\n        this.summary.qqplot_1se_plot.layout.height = 300\r\n        this.summary.qqplot_1se_plot.layout.width = 300\r\n        this.summary.qqplot_1se_plot.layout.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_1se_plot.data[0].marker.size = 3;\r\n\r\n        this.summary.qqplot_1se_plot.layout.xaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_1se_plot.layout.yaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n\r\n        this.summary.qqplot_min_plot.layout.height = 300\r\n        this.summary.qqplot_min_plot.layout.width = 300\r\n        this.summary.qqplot_min_plot.layout.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_min_plot.layout.xaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_min_plot.layout.yaxis.title.font = {\r\n\r\n            size: 10\r\n        };\r\n        this.summary.qqplot_min_plot.data[0].marker.size = 3;\r\n        return this.summary['predictions'];\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions)\r\n        let current = this;\r\n\r\n        new DataTable('#metrics_table_' + current.id, {\r\n            responsive: false,\r\n            \"footerCallback\": function (row, data, start, end, display) {\r\n                var api = this.api();\r\n                $(api.column(2).footer()).html(\r\n                    'R2 : ' + current.summary.r2.toFixed(2) + ' AIC: ' + current.summary.aic.toFixed(2)\r\n                );\r\n                $(api.column(5).footer()).html(\r\n                    'R2 : ' + current.summary['best_fit_min'].r2.toFixed(2) + ' AIC: ' + current.summary['best_fit_min'].aic.toFixed(2)\r\n                );\r\n                $(api.column(8).footer()).html(\r\n                    'R2 : ' + current.summary['best_fit_1se'].r2.toFixed(2) + ' AIC: ' + current.summary['best_fit_1se'].aic.toFixed(2)\r\n                );\r\n            },\r\n            data: current.model_stats_matrix,\r\n            info: false,\r\n            search: false,\r\n            ordering: false,\r\n            searching: false,\r\n            paging: false,\r\n            bDestroy: true,\r\n            columnDefs: [\r\n                {\r\n                    \"targets\": 3,\r\n                    \"createdCell\": function (td, cellData, rowData, row, col) {\r\n                        if (rowData[3] <= 0.05) {\r\n                            $(td).css('color', 'red')\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"targets\": 6,\r\n                    \"createdCell\": function (td, cellData, rowData, row, col) {\r\n                        if (rowData[6] <= 0.05) {\r\n                            $(td).css('color', 'red')\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    \"targets\": 9,\r\n                    \"createdCell\": function (td, cellData, rowData, row, col) {\r\n                        if (rowData[9] <= 0.05) {\r\n                            $(td).css('color', 'red')\r\n                        }\r\n                    }\r\n                }\r\n            ],\r\n        });\r\n\r\n        Plotly.newPlot('regularization_' + current.id, current.summary.regularization_plot, { autosize: true, responsive: true });\r\n        Plotly.newPlot('parameters_plot_' + current.id, current.summary.coefs_plot, { autosize: true, responsive: true });\r\n        Plotly.newPlot('errors_' + current.id, current.summary.errors_plot, { autosize: true, responsive: true });\r\n        Plotly.newPlot('qqplot_ols_' + current.id, current.summary.qqplot_ols_plot);\r\n        Plotly.newPlot('qqplot_min_' + current.id, current.summary.qqplot_min_plot);\r\n        Plotly.newPlot('qqplot_1se_' + current.id, current.summary.qqplot_1se_plot);\r\n        current.chartController.yhat_plot(y_test, this.summary['predictions'], 'regression_y_yhat_' + + current.id, 'OLS predictions')\r\n        current.chartController.yhat_plot(y_test, this.summary['predictionsmin'], 'regression_y_yhat_min_' + + current.id, 'lasso min predictions')\r\n        current.chartController.yhat_plot(y_test, this.summary['predictions1se'], 'regression_y_yhat_1se_' + + current.id, 'lasso 1se predictions')\r\n        current.chartController.residual_plot(y_test, this.summary['residuals_ols'], 'regression_residual_' + + current.id, 'OLS residuals')\r\n        current.chartController.residual_plot(y_test, this.summary['residuals_min'], 'regression_residual_min_' + + current.id, 'lasso min residuals')\r\n        current.chartController.residual_plot(y_test, this.summary['residuals_1se'], 'regression_residual_1se_' + + current.id, 'lasso 1se residuals')\r\n        this.ui.predictions_table_regression(x_test, y_test, predictions, this.id);\r\n    }\r\n\r\n}","import { asyncRun } from \"@/helpers/py-worker\";\r\n\r\n\r\nexport default class KernelRegression {\r\n    constructor(options) {\r\n        this.options = options;\r\n        this.model = null;\r\n        this.hasExplaination = false;\r\n\r\n    }\r\n    async train(x_train, y_train, x_test, _, labels) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            y_train: y_train,\r\n            X_test: x_test,\r\n            types: this.options.types,\r\n            labels: labels\r\n        };\r\n        const script = `\r\n        import numpy as np\r\n        import statsmodels.api as sm\r\n        from js import X_train,y_train,X_test,labels,types\r\n        from statsmodels.nonparametric.kernel_regression import KernelReg\r\n        import pandas as pd\r\n\r\n        df_test = pd.DataFrame(X_test,columns=labels)\r\n        x_test = df_test.iloc[:,:]\r\n\r\n        df_train = pd.DataFrame(X_train,columns=labels)\r\n        x_train = df_train.iloc[:,:]\r\n\r\n        model = KernelReg(endog=np.array(y_train), exog=x_train, var_type=types)\r\n        \r\n        preds = model.fit(x_test)\r\n\r\n        \r\n        preds\r\n        `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                return results;\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n\r\n    }\r\n    predict(x_test) {\r\n        const result = this.model.predict(x_test);\r\n        return result\r\n    }\r\n}","import { asyncRun } from \"@/helpers/py-worker\";\r\nimport { ClassificationModel } from '../model';\r\nexport default class Boosting extends ClassificationModel {\r\n    constructor(opt, chartControler) {\r\n        super(chartControler);\r\n        let options = {\r\n            booster: opt.booster.value ?? \"gbtree\",\r\n            objective: \"multi:softmax\",\r\n            max_depth: +opt.depth.value,\r\n            eta: +opt.eta.value,\r\n            estimators: opt.estimators.value ?? 200\r\n        }\r\n        this.options = options;\r\n        this.helpSectionId = 'cart_help';\r\n\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    async train(x, y, x_test, y_test, columns, __, pdpIndex) {\r\n        this.context = {\r\n            X_train: x,\r\n            y_train: y,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            objective: this.options.objective,\r\n            max_depth: this.options.max_depth,\r\n            eta: this.options.eta,\r\n            estimators: this.options.estimators,\r\n            seed: this.seed,\r\n            pdpIndex: pdpIndex,\r\n            features: [...Array(columns.length).keys()],\r\n            explain: this.hasExplaination\r\n        };\r\n        const script = `\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        from js import X_train,y_train,X_test,y_test,objective,max_depth,eta,estimators,seed,features,explain\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        from sklearn.ensemble import GradientBoostingClassifier\r\n\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n\r\n        model = GradientBoostingClassifier(learning_rate = eta,n_estimators = estimators,max_depth =max_depth,random_state = seed )\r\n        model.fit(X_train, y_train)\r\n        y_pred = model.predict(X_test)\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,target=0,method ='brute')\r\n            fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    generatePythonCode() {\r\n        let model_import = \"from sklearn.ensemble import GradientBoostingClassifier\"\r\n        let model_fit =\r\n            `model = GradientBoostingClassifier(learning_rate = ${this.options.eta} ,n_estimators = ${this.options.estimators} ,max_depth =${this.options.max_depth} ,random_state = ${this.seed} )`;\r\n        return super.generatePythonCode(model_import, model_fit)\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDP(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n    }\r\n}\r\n","\r\nimport { RegressionModel } from '../regression_model';\r\nimport { asyncRun } from \"@/helpers/py-worker\";\r\n\r\n\r\nexport default class BoostingRegression extends RegressionModel {\r\n    constructor(opt, chartControler) {\r\n        super(chartControler);\r\n        let options = {\r\n            booster: opt.booster.value ?? \"gbtree\",\r\n            objective: \"multi:softmax\",\r\n            max_depth: +opt.depth.value,\r\n            eta: +opt.eta.value,\r\n            estimators: opt.estimators.value ?? 200\r\n        }\r\n        this.options = options;\r\n        this.helpSectionId = 'cart_help';\r\n\r\n    }\r\n    async train(x, y, x_test, y_test, columns) {\r\n        this.context = {\r\n            X_train: x,\r\n            y_train: y,\r\n            X_test: x_test,\r\n            y_test: y_test,\r\n            objective: this.options.objective,\r\n            max_depth: this.options.max_depth,\r\n            eta: this.options.eta,\r\n            estimators: this.options.estimators,\r\n            seed: this.seed,\r\n            explain: this.hasExplaination,\r\n            features: [...Array(columns.length).keys()]\r\n        };\r\n        const script = `\r\n\r\n        from js import X_train,y_train,X_test,y_test,objective,max_depth,eta,estimators,seed,features,explain\r\n        from sklearn.inspection import PartialDependenceDisplay\r\n        from sklearn.inspection import permutation_importance\r\n        from sklearn.ensemble import GradientBoostingRegressor\r\n        import pandas as pd\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n\r\n        features_importance = []\r\n        partial_dependence_plot_grids = []\r\n        partial_dependence_plot_avgs = []\r\n        model = GradientBoostingRegressor(learning_rate = eta,n_estimators = estimators,max_depth =max_depth,random_state = seed)\r\n        model.fit(X_train, y_train)\r\n        y_pred = model.predict(X_test)\r\n\r\n\r\n\r\n        if explain:\r\n            pdp = PartialDependenceDisplay.from_estimator(model, X_train, features,method ='brute')\r\n            fi = permutation_importance(model,X_test,y_test,n_repeats=10)\r\n            partial_dependence_plot_avgs = list(map(lambda item:item['average'],pdp.pd_results))\r\n            grids = list(map(lambda item:item['grid_values'],pdp.pd_results))\r\n            features_importance = list(fi.importances)\r\n            partial_dependence_plot_grids = [item[0].tolist() for item in grids ]\r\n        y_pred,partial_dependence_plot_avgs,partial_dependence_plot_grids, features_importance\r\n\r\n    `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                this.predictions = Array.from(results[0]);\r\n                this.pdp_averages = Array.from(results[1]);\r\n                this.pdp_grid = Array.from(results[2]);\r\n                this.importances = Array.from(results[3]);\r\n                return Array.from(results[0]);\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n    }\r\n    async visualize(x_test, y_test, uniqueLabels, predictions, encoder, columns, categorical_columns) {\r\n        await super.visualize(x_test, y_test, uniqueLabels, predictions, encoder)\r\n        if (this.hasExplaination) {\r\n            this.chartController.PFIBoxplot(this.id, this.importances, columns);\r\n            this.chartController.plotPDPRegression(this.id, this.pdp_averages, this.pdp_grid, uniqueLabels, columns, categorical_columns);\r\n        }\r\n\r\n    }\r\n\r\n}","import { Settings } from \"@/helpers/settings\";\r\nimport LogisticRegression from \"./classification/logistic_regression\";\r\nimport LinearRegression from \"./regression/linear_regression\";\r\nimport BSplineRegression from \"./regression/bspline_regression\";\r\nimport SupportVectorMachine from './classification/svm';\r\nimport SupportVectorMachineRegression from './regression/svm';\r\n\r\nimport KNNModel from './classification/knn';\r\nimport KNNRegressor from './regression/knn_regressor';\r\nimport RandomForest from \"./classification/random_forest\";\r\nimport RandomForestRegressor from \"./regression/random_forest\";\r\nimport NaiveBayes from \"./classification/NaiveBayes\";\r\nimport DiscriminantAnalysis from \"./classification/lda\";\r\nimport PolynomialRegression from \"./regression/polynomial_regression\";\r\nimport KernelRegression from \"./regression/kernel_regression\";\r\nimport Boosting from \"./classification/boosting\";\r\nimport BoostingRegression from \"./regression/boosting\";\r\n\r\n\r\n\r\nexport var ModelFactory = function () {\r\n    this.createModel = (modelName, options) => {\r\n        switch (modelName) {\r\n            case Settings.classification.logistic_regression.value:\r\n                return new LogisticRegression(options);\r\n            case Settings.classification.k_nearest_neighbour.value:\r\n                return new KNNModel(options);\r\n            case Settings.classification.random_forest.value:\r\n                return new RandomForest(options);\r\n            case Settings.classification.support_vector_machine.value:\r\n                return new SupportVectorMachine(options);\r\n            case Settings.classification.boosting.value:\r\n                return new Boosting(options);\r\n            case Settings.regression.boosting.value:\r\n                return new BoostingRegression(options);\r\n            case Settings.classification.discriminant_analysis.value:\r\n                return new DiscriminantAnalysis(options);\r\n            case Settings.classification.naive_bayes.value:\r\n                return new NaiveBayes(options);\r\n            case Settings.regression.linear_regression.value:\r\n                return new LinearRegression(options);\r\n            case Settings.regression.k_nearest_neighbour.value:\r\n                return new KNNRegressor(options);\r\n            case Settings.regression.support_vector_machine.value:\r\n                return new SupportVectorMachineRegression(options);\r\n            case Settings.regression.random_forest.value:\r\n                return new RandomForestRegressor(options);\r\n            case Settings.regression.polynomial_regression.value:\r\n                return new PolynomialRegression(options);\r\n            case Settings.regression.kernel_regression.value:\r\n                return new KernelRegression(options);\r\n            case Settings.regression.bspline_regression.value:\r\n                return new BSplineRegression(options);\r\n            default:\r\n                throw new Error(\"Model not supported.\");\r\n        }\r\n    }\r\n}","<!-- eslint-disable no-unused-vars -->\r\n<template>\r\n    <div class=\"column is-2  has-background-info-light\t\" style=\"height: 100%;\">\r\n        <!-- <button @click=\"impute()\">Impute</button> -->\r\n        <figure class=\"image is-96x96\">\r\n            <img src=\"/logo.png\" />\r\n        </figure>\r\n        <section>\r\n            <upload-component @uploaded=\"generateTargetDropdown\" @uploaded-file=\"setFile\"></upload-component>\r\n            <div class=\"column is-12\">\r\n                <b-field label=\"Seed\" :label-position=\"'on-border'\">\r\n                    <b-input v-model=\"seed\" size=\"is-small\" placeholder=\"Seed\" type=\"number\" min=\"0\">\r\n                    </b-input>\r\n                </b-field>\r\n                <b-field label=\"Target\" :label-position=\"'on-border'\">\r\n                    <b-select :expanded=\"true\" v-model=\"modelTarget\" @input=\"checkmodelTask\" size=\"is-small\">\r\n                        <option v-for=\"option in columns\" :value=\"option\" :key=\"option\">\r\n                            {{ option }}\r\n                        </option>\r\n                    </b-select>\r\n                </b-field>\r\n                <b-field label=\"Imputation\" :label-position=\"'on-border'\">\r\n                    <b-select :expanded=\"true\" v-model=\"imputationOption\" size=\"is-small\">\r\n                        <option v-for=\"option in imputationOptions\" :value=\"option.id\" :key=\"option.id\">\r\n                            {{ option.label }}\r\n                        </option>\r\n                    </b-select>\r\n                </b-field>\r\n                <b-field label=\"Cross Validation\" :label-position=\"'on-border'\">\r\n                    <b-select :expanded=\"true\" v-model=\"crossValidationOption\" size=\"is-small\">\r\n                        <option v-for=\"option in crossValidationOptions\" :value=\"option.id\" :key=\"option.id\">\r\n                            {{ option.label }}\r\n                        </option>\r\n                    </b-select>\r\n                </b-field>\r\n                <b-field label=\"Model\" :label-position=\"'on-border'\">\r\n                    <b-select :disabled=\"tuneModel\" :expanded=\"true\" v-model=\"modelOption\" size=\"is-small\">\r\n                        <option v-for=\"option in modelOptions\" :value=\"option.id\" :key=\"option.id\">\r\n                            {{ option.title }}\r\n                        </option>\r\n                    </b-select>\r\n                    <b-button @click=\"configureModel\" size=\"is-small\" icon-pack=\"fas\"\r\n                        :icon-left=\"!this.tuneModel ? 'cog' : 'arrow-left'\"></b-button>\r\n                </b-field>\r\n                <section v-if=\"tuneModel\" class=\"mx-1\">\r\n                    <b-field v-for=\"(option, i) in modelConfigurations\" :key=\"i\" :label=\"option.label\"\r\n                        :label-position=\"'on-border'\">\r\n                        <b-select v-model=\"option.value\" :expanded=\"true\" size=\"is-small\"\r\n                            v-if=\"option.type === 'select'\">\r\n                            <option v-for=\"(item, index) in option.values\" :value=\"item.value\" :key=\"index\">\r\n                                {{ item.label }}\r\n                            </option>\r\n                        </b-select>\r\n                        <b-input size=\"is-small\" v-model=\"option.value\" type=\"number\"\r\n                            v-else-if=\"option.type === 'number'\"></b-input>\r\n                        <b-input size=\"is-small\" v-model=\"option.value\" type=\"text\"\r\n                            v-else-if=\"option.type === 'text'\"></b-input>\r\n                    </b-field>\r\n                </section>\r\n                <b-field>\r\n                    <b-checkbox v-model=\"dataScalingBehavior\" size=\"is-small\">Standardize by default</b-checkbox>\r\n                </b-field>\r\n                <b-field>\r\n                    <b-checkbox v-model=\"explainModel\" size=\"is-small\">Explain the model</b-checkbox>\r\n                </b-field>\r\n                <b-field>\r\n                    <b-checkbox v-model=\"usePCAs\" size=\"is-small\">Use PC components</b-checkbox>\r\n                </b-field>\r\n                <b-field v-if=\"usePCAs\" label=\"Number of Components\" :label-position=\"'on-border'\">\r\n                    <b-input size=\"is-small\" v-model=\"numberOfComponents\" type=\"number\"></b-input>\r\n                </b-field>\r\n                <b-field>\r\n                    <b-checkbox v-model=\"useHPC\" size=\"is-small\">Use HPC resources</b-checkbox>\r\n                </b-field>\r\n                <b-field>\r\n                    <b-button @click=\"train\" size=\"is-small\" icon-pack=\"fas\" icon-left=\"play\" :loading=\"training\"\r\n                        :disabled=\"!dataframe || modelOption == null\">\r\n                        train</b-button>\r\n                    <button :disabled=\"!useHPC\" class=\"button is-small\" @click=\"upload()\">Upload to HPC</button>\r\n                </b-field>\r\n                <b-loading :is-full-page=\"false\" v-model=\"training\"></b-loading>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-unused-vars */\r\n\r\nimport UploadComponent from \"./upload-component.vue\";\r\nimport { Settings, FeatureCategories, CV_OPTIONS } from '../helpers/settings'\r\nimport PCA from '@/helpers/dimensionality-reduction/pca';\r\n\r\nimport { ModelFactory } from \"@/helpers/model_factory\";\r\nimport { settingStore } from '@/stores/settings'\r\nimport { applyDataTransformation, handle_missing_values, encode_dataset, evaluate_classification } from '@/helpers/utils';\r\nimport { LabelEncoder, concat, DataFrame, toJSON } from 'danfojs';\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n    name: 'SidebarComponent',\r\n    setup() {\r\n        const settings = settingStore()\r\n\r\n        return { settings }\r\n    },\r\n    components: {\r\n        UploadComponent\r\n    },\r\n    props: {\r\n        msg: String\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            dataScalingBehavior: false,\r\n            explainModel: true,\r\n            training: false,\r\n            tuneModel: false,\r\n            numberOfComponents: 0,\r\n            usePCAs: false,\r\n            useHPC: false,\r\n            seed: 123,\r\n            dataframe: null,\r\n            configureFeatures: false,\r\n            modelOptions: Settings.classification,\r\n            imputationOption: 1,\r\n            modelOption: 1,\r\n            featureTypeOptions: FeatureCategories,\r\n            crossValidationOption: 1,\r\n            columns: [],\r\n            modelTarget: null,\r\n            modelConfigurations: null,\r\n            imputationOptions: [{\r\n                id: 1,\r\n                label: 'Delete rows'\r\n            },\r\n            {\r\n                id: 2,\r\n                label: 'Mean and Mode'\r\n            }, {\r\n                id: 3,\r\n                label: 'Linear regression'\r\n            }, {\r\n                id: 4,\r\n                label: 'random forest'\r\n            }],\r\n            crossValidationOptions: [{\r\n                id: CV_OPTIONS.SPLIT,\r\n                label: '70 % training - 30 % test'\r\n            },\r\n            {\r\n                id: CV_OPTIONS.NO,\r\n                label: 'No'\r\n            }, {\r\n                id: CV_OPTIONS.KFOLD,\r\n                label: 'k-fold'\r\n            }],\r\n            featureSettings: [],\r\n            modelSettings: [],\r\n            modelName: '',\r\n            file: null\r\n        }\r\n    },\r\n    methods: {\r\n        setFile(e) {\r\n            this.file = e\r\n        },\r\n        upload() {\r\n            let formdata = new FormData();\r\n            this.settings.rawData\r\n            formdata.append('file', this.file);\r\n            console.log(this.file);\r\n\r\n            axios.post('http://127.0.0.1:5000/upload', formdata, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }\r\n            ).then(function () {\r\n                console.log('SUCCESS!!');\r\n            }).catch(function () {\r\n                console.log('FAILURE!!');\r\n            });\r\n        },\r\n        updateFeatures() {\r\n            this.configureFeatures = false;\r\n            this.$emit('updateFeatures', true)\r\n        },\r\n        toggleTraining() {\r\n            this.training = !this.training;\r\n            let message = this.training ? 'Started training ' + this.modelName : 'Successully fitted ' + this.modelName;\r\n            this.$buefy.toast.open(\r\n                {\r\n                    duration: 5000,\r\n                    message: this.training ? 'Started training ' + this.modelName : 'Successully fitted ' + this.modelName,\r\n                    type: this.training ? 'is-info' : 'is-success',\r\n                })\r\n            this.settings.addMessage({ message: message, type: 'info' });\r\n        },\r\n        getDefaultModelConfiguration() {\r\n            for (const key in this.modelOptions) {\r\n                const model = this.modelOptions[key];\r\n                if (model.id === this.modelOption) {\r\n                    for (const key in model.options) {\r\n                        model.options[key].value = model.options[key]?.default;\r\n                    }\r\n                    this.modelConfigurations = model.options;\r\n                    this.modelName = model.title\r\n                }\r\n            }\r\n        },\r\n        configureModel() {\r\n            this.tuneModel = !this.tuneModel;\r\n            this.getDefaultModelConfiguration()\r\n        },\r\n        generateTargetDropdown() {\r\n            this.dataframe = this.settings.getDataset;\r\n            this.columns = this.dataframe.columns;\r\n            this.featureSettings = this.columns.map((column, index) => {\r\n                return {\r\n                    name: column,\r\n                    selected: true,\r\n                    type: this.dataframe.dtypes[index] === 'string' ? FeatureCategories.Nominal.id : FeatureCategories.Numerical.id\r\n                }\r\n            })\r\n            this.modelTarget = this.dataframe.columns[this.dataframe.columns.length - 1];\r\n            this.settings.setTarget(this.modelTarget)\r\n            let selectedFeatures = this.featureSettings.filter(feature => feature.selected);\r\n            for (let i = 0; i < selectedFeatures.length; i++) {\r\n                this.settings.addFeature(selectedFeatures[i])\r\n            }\r\n            this.$emit('updateFeatures', true)\r\n\r\n        },\r\n        checkmodelTask() {\r\n            console.log(this.modelTarget);\r\n\r\n            this.settings.setTarget(this.modelTarget)\r\n            let targetFeature = this.settings.items.find(feature => feature.name == this.modelTarget);\r\n            if (!targetFeature.selected) {\r\n                let message = 'Target is not selected'\r\n                this.$buefy.toast.open(\r\n                    {\r\n                        duration: 3000,\r\n                        message: message,\r\n                        type: 'is-warning',\r\n                    })\r\n                this.settings.addMessage({ message: message, type: 'warning' });\r\n                return\r\n            }\r\n            this.settings.setmodelTask(targetFeature.type === FeatureCategories.Numerical.id ? false : true);\r\n            this.modelOptions = targetFeature.type === FeatureCategories.Numerical.id ? Settings.regression : Settings.classification;\r\n            // let selectedFeatures = this.featureSettings.filter(feature => feature.selected);\r\n            // for (let i = 0; i < selectedFeatures.length; i++) {\r\n            //     this.settings.addFeature(selectedFeatures[i])\r\n            // }\r\n        },\r\n        async train() {\r\n            try {\r\n                if (!this.modelConfigurations) {\r\n                    this.getDefaultModelConfiguration()\r\n                }\r\n                let seed = +this.seed;\r\n                this.settings.setSeed(seed)\r\n                let categoricalFeatures = []\r\n                let dataset = null;\r\n                this.dataframe = new DataFrame(this.settings.rawData);\r\n                dataset = await this.dataframe.sample(this.dataframe.$data.length, { seed: seed });\r\n\r\n                let numericColumns = this.settings.items.filter(m => m.selected && m.type === FeatureCategories.Numerical.id).map(m => m.name);\r\n                const target = this.settings.modelTarget;\r\n                dataset = handle_missing_values(dataset)\r\n                dataset = applyDataTransformation(dataset, numericColumns, this.settings.transformationsList);\r\n                if (this.dataScalingBehavior) {\r\n                    let transformations = []\r\n                    for (let i = 0; i < numericColumns.length; i++) {\r\n                        transformations.push({ name: numericColumns[i], scaler: '1' })\r\n                    }\r\n                    dataset = applyDataTransformation(dataset, numericColumns, transformations);\r\n                }\r\n                let selected_columns = this.settings.items.filter(m => m.selected).map(m => m.name)\r\n                const index = selected_columns.findIndex(m => m === target)\r\n                if (index === -1) {\r\n                    selected_columns.push(target)\r\n                }\r\n\r\n                let filterd_dataset = dataset.loc({ columns: selected_columns })\r\n                // add class transformation\r\n                if (this.settings.isClassification) {\r\n                    let selectedClasses = this.settings.mergedClasses\r\n                    if (selectedClasses?.length > 0) {\r\n                        this.settings.mergedClasses.forEach((classes) => {\r\n                            let newClass = classes.map(m => m.class).join('_');\r\n                            classes.forEach(cls => {\r\n                                filterd_dataset.replace(cls.class, newClass, { columns: [this.settings.modelTarget], inplace: true })\r\n                            });\r\n                        })\r\n                    }\r\n                }\r\n\r\n\r\n                const targets = filterd_dataset.column(target)\r\n                filterd_dataset.drop({ columns: target, inplace: true })\r\n\r\n\r\n\r\n                const cross_validation_setting = this.crossValidationOption;\r\n\r\n                [filterd_dataset, categoricalFeatures] = encode_dataset(filterd_dataset, this.settings.items.filter(m => m.selected).filter(m => m.name !== this.settings.modelTarget).map(m => {\r\n                    return {\r\n                        name: m.name,\r\n                        type: m.type\r\n                    }\r\n                }))\r\n                let x_train, y_train, x_test, y_test;\r\n                if (cross_validation_setting === CV_OPTIONS.KFOLD &&\r\n                    (this.modelName != Settings.classification.logistic_regression.title || this.modelName != Settings.regression.linear_regression.title)) {\r\n                    let performances = [];\r\n                    for (let i = 1; i < 6; i++) {\r\n                        [x_train, y_train, x_test, y_test] = this.kfoldSplit(filterd_dataset, targets, i);\r\n                        let uniqueLabels = [...new Set(y_train.values)];\r\n                        let labelEncoder, encoded_y, encoded_y_test;\r\n                        if (this.settings.classificationTask) {\r\n                            [labelEncoder, encoded_y, encoded_y_test] = this.encodeTarget(y_train.values, y_test.values)\r\n                        } else {\r\n                            encoded_y = y_train.values;\r\n                            encoded_y_test = y_test.values;\r\n                        }\r\n                        let model_factory = new ModelFactory();\r\n                        let model = model_factory.createModel(this.modelOption, this.modelConfigurations)\r\n                        model.hasExplaination = false;\r\n                        model.id = this.settings.getCounter\r\n                        this.toggleTraining()\r\n                        let predictions = await model.train(x_train.values, encoded_y, x_test.values, encoded_y_test, x_train.columns, categoricalFeatures, 0);\r\n                        let metrics = await model.evaluateModel(encoded_y_test, predictions, uniqueLabels)\r\n                        if (this.settings.classificationTask) {\r\n                            metrics = metrics[4]\r\n                        } else {\r\n                            metrics = metrics[0]\r\n                        }\r\n                        this.training = false;\r\n                        performances.push(metrics)\r\n                    }\r\n                } else {\r\n                    [x_train, y_train, x_test, y_test] = this.splitData(cross_validation_setting, filterd_dataset, targets);\r\n                }\r\n\r\n\r\n                let uniqueLabels = [...new Set(y_train.values)];\r\n                let labelEncoder, encoded_y, encoded_y_test;\r\n                if (this.settings.classificationTask) {\r\n                    [labelEncoder, encoded_y, encoded_y_test] = this.encodeTarget(y_train.values, y_test.values)\r\n                } else {\r\n                    encoded_y = y_train.values;\r\n                    encoded_y_test = y_test.values;\r\n                }\r\n                let model_factory = new ModelFactory();\r\n                let model = model_factory.createModel(this.modelOption, this.modelConfigurations)\r\n                model.seed = seed;\r\n                model.id = this.settings.getCounter\r\n                this.toggleTraining()\r\n                model.hasExplaination = this.explainModel;\r\n                if (this.usePCAs) {\r\n                    const pca = new PCA();\r\n                    let numericColumns = this.settings.items.filter(column => column.selected && column.type === 1 && column.name != this.modelTarget).map(column => column.name);\r\n                    let [pca_train, _, __, ___, ____, pca_test] = await pca.predict(x_train.loc({ columns: numericColumns }).values,\r\n                        this.numberOfComponents, x_test.loc({ columns: numericColumns }).values)\r\n                    pca_train = pca_train.map(m => [].slice.call(m))\r\n                    pca_test = pca_test.map(m => [].slice.call(m))\r\n                    let cols = pca_train[0].map((_, i) => 'PC_' + (i + 1))\r\n                    x_train = new DataFrame(pca_train, { columns: cols })\r\n                    x_test = new DataFrame(pca_test, { columns: cols })\r\n                }\r\n                console.log(new Set(encoded_y));\r\n                let predictions = this.useHPC ? [] : await model.train(x_train.values, encoded_y, x_test.values, encoded_y_test, x_train.columns, categoricalFeatures, 0);\r\n                let metrics = this.useHPC ? [] : await model.evaluateModel(encoded_y_test, predictions, uniqueLabels)\r\n                if (predictions?.length > 0 || this.useHPC) {\r\n\r\n                    this.settings.addResult({\r\n                        id: model.id,\r\n                        useHPC: this.useHPC ? Math.random().toString(16).slice(2) : 0,\r\n                        showProbas: model.hasProbability,\r\n                        helpSectionId: model.helpSectionId,\r\n                        hasExplaination: model.hasExplaination,\r\n                        snapshot: {\r\n                            x: x_train,\r\n                            y: encoded_y,\r\n                            xt: x_test,\r\n                            yt: encoded_y_test,\r\n                            xFeatures: x_train.columns,\r\n                            categoricals: categoricalFeatures,\r\n                            id: this.modelOption,\r\n                            labels: uniqueLabels\r\n                        },\r\n                        seed: seed,\r\n                        encoder: labelEncoder,\r\n                        name: this.usePCAs ? 'PC.' + this.modelName : this.modelName,\r\n                        datasetName: this.settings.getDatasetName,\r\n                        modelTask: this.settings.classificationTask,\r\n                        metrics: metrics,\r\n                        options: JSON.parse(JSON.stringify(this.modelConfigurations)),\r\n                        target: target,\r\n                        categoricalFeatures: this.settings.items.filter(m => m.selected && m.type !== FeatureCategories.Numerical.id).map(m => m.name),\r\n                        numericColumns: numericColumns,\r\n                        transformations: [...this.settings.transformationsList.filter(feature => feature.type != 0)],\r\n                        tables: model.tables,\r\n                        plots: model.plots,\r\n                        predictions: predictions,\r\n                        model: model\r\n\r\n                    });\r\n                    this.settings.setActiveTab(2);\r\n                    setTimeout(async () => {\r\n                        this.settings.setResultActiveTab(model.id + 1);\r\n                        window.dispatchEvent(new Event('resize'));\r\n                    }, 100);\r\n                    if (!this.useHPC) {\r\n                        await model.visualize(x_test, encoded_y_test, uniqueLabels, predictions, labelEncoder, x_train.columns, categoricalFeatures)\r\n                    }\r\n                    this.settings.increaseCounter();\r\n                    this.toggleTraining();\r\n                }\r\n            } catch (error) {\r\n                this.training = false;\r\n                let message = 'Failed to fit the ' + this.modelName\r\n                this.$buefy.toast.open(\r\n                    {\r\n                        duration: 3000,\r\n                        message: message,\r\n                        type: 'is-warning',\r\n                    })\r\n                this.settings.addMessage({ message: message, type: 'warning' });\r\n                throw error;\r\n            }\r\n        },\r\n        impute() {\r\n            this.training = true;\r\n            axios.post('http://127.0.0.1:5000/missforest', {\r\n                data: toJSON(this.dataframe),\r\n                categoricalFeatures: this.settings.items.filter(m => m.selected && m.type !== FeatureCategories.Numerical.id).map(m => m.name)\r\n            }).then(res => {\r\n                let df = new DataFrame(res.data);\r\n                this.dataframe = df\r\n                this.settings.setDataframe(df);\r\n                this.training = false;\r\n            })\r\n        }\r\n    },\r\n    created: function () {\r\n        this.splitData = function (cross_validation_setting, filterd_dataset, targets, stepSize = 0.7) {\r\n            let x_train, y_train, x_test, y_test;\r\n            let len = filterd_dataset.$data.length\r\n            if (cross_validation_setting === CV_OPTIONS.SPLIT) {\r\n                const limit = Math.ceil(len * stepSize)\r\n                const train_bound = `0:${limit}`\r\n                const test_bound = `${limit}:${len}`\r\n                x_train = filterd_dataset.iloc({ rows: [train_bound] })\r\n                y_train = targets.iloc([train_bound])\r\n                x_test = filterd_dataset.iloc({ rows: [test_bound] });\r\n                y_test = targets.iloc([test_bound]);\r\n            } else if (cross_validation_setting === CV_OPTIONS.NO) {\r\n                x_train = filterd_dataset\r\n                y_train = targets\r\n                x_test = filterd_dataset\r\n                y_test = targets\r\n            }\r\n            return [x_train, y_train, x_test, y_test]\r\n        }\r\n        this.kfoldSplit = function (filterd_dataset, targets, fold = 1) {\r\n            let x_train, y_train, x_test, y_test;\r\n            let len = filterd_dataset.$data.length\r\n            const lowerLimit = Math.ceil(len * ((fold - 1) * 0.2))\r\n            const upperLimit = Math.ceil(len * (fold * 0.2))\r\n            const train_bound_lower = lowerLimit != 0 ? `:${lowerLimit}` : null\r\n            const train_bound_upper = upperLimit != len ? `${upperLimit}:` : null\r\n            const test_bound = `${lowerLimit}:${upperLimit}`\r\n\r\n\r\n            let x_train_upper = train_bound_upper != null ? filterd_dataset.iloc({ rows: [train_bound_upper] }) : null\r\n            let y_train_upper = train_bound_upper != null ? targets.iloc([train_bound_upper]) : null\r\n            x_test = filterd_dataset.iloc({ rows: [test_bound] });\r\n            y_test = targets.iloc([test_bound]);\r\n            let x_train_lower = train_bound_lower != null ? filterd_dataset.iloc({ rows: [train_bound_lower] }) : null\r\n            let y_train_lower = train_bound_lower != null ? targets.iloc([train_bound_lower]) : null\r\n            if (x_train_lower && x_train_upper) {\r\n                x_train = concat({ dfList: [x_train_lower, x_train_upper], axis: 0 })\r\n                y_train = concat({ dfList: [y_train_lower, y_train_upper], axis: 0 })\r\n            } else {\r\n                x_train = x_train_lower == null ? x_train_upper : x_train_lower\r\n                y_train = x_train_lower == null ? y_train_upper : y_train_lower\r\n            }\r\n\r\n\r\n            return [x_train, y_train, x_test, y_test]\r\n\r\n        }\r\n        this.encodeTarget = function (y_train, y_test) {\r\n            let labelEncoder = new LabelEncoder()\r\n            labelEncoder.fit(y_train)\r\n            labelEncoder.transform(y_train)\r\n            let encoded_y = labelEncoder.transform(y_train)\r\n            let encoded_y_test = labelEncoder.transform(y_test)\r\n            return [labelEncoder, encoded_y, encoded_y_test]\r\n        }\r\n    },\r\n    watch: {\r\n        modelOption: function () {\r\n            this.modelConfigurations = null\r\n        },\r\n\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n.is-danger {\r\n    color: red !important;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./sidebar-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./sidebar-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./sidebar-component.vue?vue&type=template&id=a86e422c\"\nimport script from \"./sidebar-component.vue?vue&type=script&lang=js\"\nexport * from \"./sidebar-component.vue?vue&type=script&lang=js\"\nimport style0 from \"./sidebar-component.vue?vue&type=style&index=0&id=a86e422c&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-10\"},[_c('section',[_c('b-tabs',{attrs:{\"position\":'is-centered',\"animated\":false,\"type\":\"success\"},on:{\"input\":function($event){return _vm.resize()}},model:{value:(_vm.settings.activeTab),callback:function ($$v) {_vm.$set(_vm.settings, \"activeTab\", $$v)},expression:\"settings.activeTab\"}},[_c('b-tab-item',{attrs:{\"label\":\"Data Analysis\",\"icon\":\"search\",\"icon-pack\":\"fas\"}},[(this.settings.datasetShape?.count > 0)?_c('section',[(_vm.isActive)?_c('div',{staticClass:\"message is-info\",attrs:{\"closable\":false}},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"Data summary\")]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-multiline\"},[_c('div',{staticClass:\"column is-12 has-text-left\"},[_c('p',{staticClass:\"title is-6 m-0 mb-1\"},[_vm._v(\" Data Shape: (\"+_vm._s(this.settings.datasetShape.count)+\",\"+_vm._s(this.settings.datasetShape.columns)+\")\")])]),_c('div',{staticClass:\"column is-6\"},[_c('h5',{staticClass:\"title is-6 has-text-left m-0 mb-1\"},[_vm._v(\"Numerical Features: \")]),_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table is-size-7\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"}),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Name\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Min\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Max\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Mean\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Median\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"st.d\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"#NAs\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Type\")])])]),_c('tbody',_vm._l((_vm.continuousFeaturesStats),function(feature){return _c('tr',{key:feature.name},[_c('td',[_c('b-checkbox',{model:{value:(feature.selected),callback:function ($$v) {_vm.$set(feature, \"selected\", $$v)},expression:\"feature.selected\"}})],1),_c('td',[_vm._v(_vm._s(feature.name))]),_c('td',[_vm._v(_vm._s(feature.min))]),_c('td',[_vm._v(_vm._s(feature.max))]),_c('td',[_vm._v(_vm._s(feature.median))]),_c('td',[_vm._v(_vm._s(feature.mean))]),_c('td',[_vm._v(_vm._s(feature.std))]),_c('td',[_vm._v(_vm._s(feature.missingValuesCount))]),_c('td',[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},model:{value:(feature.type),callback:function ($$v) {_vm.$set(feature, \"type\", $$v)},expression:\"feature.type\"}},_vm._l((_vm.featureTypeOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.name)+\" \")])}),0)],1)])}),0)])]),_c('button',{staticClass:\"button is-small is-info\",on:{\"click\":function($event){return _vm.applyChanges()}}},[_vm._v(\"Apply changes\")])]),_c('div',{staticClass:\"column is-6\"},[_c('h5',{staticClass:\"title is-6 has-text-left m-0 mb-1\"},[_vm._v(\"Categorical Features(Nominal/Ordinal):\")]),_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table is-size-7 mb-1\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"}),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Name\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Shape\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Mode\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Mode percentage\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"#NAs\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Type\")])])]),_c('tbody',_vm._l((_vm.categoricalFeaturesStats),function(feature){return _c('tr',{key:feature.name},[_c('td',[_c('b-checkbox',{model:{value:(feature.selected),callback:function ($$v) {_vm.$set(feature, \"selected\", $$v)},expression:\"feature.selected\"}})],1),_c('td',[_vm._v(_vm._s(feature.name))]),_c('td',[_vm._v(_vm._s(feature.shape))]),_c('td',[_vm._v(_vm._s(feature.mode))]),_c('td',[_vm._v(_vm._s(feature.percentage))]),_c('td',[_vm._v(_vm._s(feature.missingValuesCount))]),_c('td',[_c('b-select',{attrs:{\"expanded\":true,\"size\":\"is-small\"},model:{value:(feature.type),callback:function ($$v) {_vm.$set(feature, \"type\", $$v)},expression:\"feature.type\"}},_vm._l((_vm.featureTypeOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.name)+\" \")])}),0)],1)])}),0)]),_c('p',{staticClass:\"subtitle is-7 m-0 p-0\"},[_vm._v(\" Nominal features are one hot encoded and ordinal features are encoded in one column.\")])])]),_c('div',{staticClass:\"column is-6\"},[_c('h5',{staticClass:\"title is-6 has-text-left\"},[_vm._v(\"Sample Data :\")]),_c('b-table',{staticClass:\"is-size-7 m-0 mb-1\",attrs:{\"data\":_vm.sampleData,\"columns\":_vm.datasetColumns,\"narrowed\":true,\"bordered\":true,\"striped\":true,\"hoverable\":true}})],1)])])]):_vm._e(),_c('section',[_c('scatterplot-matrix-component',{ref:\"splom\"})],1),_c('section',[_c('article',{staticClass:\"message is-info mt-2\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"Correlation Matrix and Dendrogram \"),_c('b-tooltip',{attrs:{\"append-to-body\":\"\",\"label\":\"Ward method requires euclidean distance\",\"multilined\":\"\"}},[_c('b-button',{attrs:{\"icon-left\":\"info\",\"icon-pack\":\"fas\",\"size\":\"is-small\",\"type\":\"is-dark\"}})],1)],1),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-gapless\"},[_c('div',{staticClass:\"column is-6 mx-1\"}),_c('div',{staticClass:\"column is-6 mx-1\"},[_c('b-field',{attrs:{\"label\":\"Linkage method, Distance Metric\",\"custom-class\":\"is-small\"}},[_c('b-select',{attrs:{\"size\":\"is-small\",\"placeholder\":\"Method\"},model:{value:(_vm.method),callback:function ($$v) {_vm.method=$$v},expression:\"method\"}},[_c('option',{attrs:{\"value\":\"single\"}},[_vm._v(\"single\")]),_c('option',{attrs:{\"value\":\"complete\"}},[_vm._v(\"complete\")]),_c('option',{attrs:{\"value\":\"average\"}},[_vm._v(\"average\")]),_c('option',{attrs:{\"value\":\"weighted\"}},[_vm._v(\"weighted\")]),_c('option',{attrs:{\"value\":\"centroid\"}},[_vm._v(\"centroid\")]),_c('option',{attrs:{\"value\":\"median\"}},[_vm._v(\"median\")]),_c('option',{attrs:{\"value\":\"ward\"}},[_vm._v(\"ward\")])]),_c('b-select',{attrs:{\"size\":\"is-small\",\"placeholder\":\"Metric\"},model:{value:(_vm.metric),callback:function ($$v) {_vm.metric=$$v},expression:\"metric\"}},[_c('option',{attrs:{\"value\":\"euclidean\"}},[_vm._v(\"euclidean\")]),_c('option',{attrs:{\"value\":\"correlation\"}},[_vm._v(\"correlation\")]),_c('option',{attrs:{\"value\":\"mahalanobis\"}},[_vm._v(\"mahalanobis\")]),_c('option',{attrs:{\"value\":\"cosine\"}},[_vm._v(\"cosine\")])]),_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"is-success is-small\",attrs:{\"disabled\":_vm.loading,\"loading\":_vm.loading},on:{\"click\":_vm.correlationMatrix}},[_vm._v(\"Correlation Cluster Diagram\")])],1)],1)],1)]),_c('div',{staticClass:\"columns is-multiline is-centered mb-2 p-0 is-gapless\"},[_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":\"correlation_matrix\"}}),_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":\"correlation_matrix_ordered\"}})])])])])]):_c('section',[_c('b-message',{attrs:{\"type\":\"is-danger\",\"has-icon\":\"\",\"icon-pack\":\"fas\"}},[_vm._v(\" Upload a dataset or select a sample from sidebar. \")])],1)]),_c('b-tab-item',{attrs:{\"label\":\"Dimensionality Reduction\",\"icon\":\"compress-arrows-alt\",\"icon-pack\":\"fas\"}},[_c('dmensionality-reduction-component',{attrs:{\"dataframe\":this.settings.df,\"columns\":_vm.selectedFeatures}})],1),_c('b-tab-item',{attrs:{\"label\":\"Results Analysis\",\"icon\":\"chart-pie\",\"icon-pack\":\"fas\"}},[_c('results-component',{ref:\"results\"})],1),_c('b-tab-item',{attrs:{\"label\":\"Methods Details\",\"icon\":\"list\",\"icon-pack\":\"fas\"}},[_c('methods-tab-component')],1),_c('b-tab-item',{attrs:{\"label\":\"Help\",\"icon\":\"question\",\"icon-pack\":\"fas\"}},[_c('div',{staticClass:\"content has-text-left\"},[_c('h4',[_vm._v(\"1. Dataset Selection\")]),_c('p',[_vm._v(\" To begin, you can either select a sample dataset provided by the system or upload your own dataset. The supported file formats for datasets include .xlsx (Excel files), .csv (Comma Separated Values files), and .txt (plain text files). Ensure that your file is in one of these formats to avoid any issues during the upload process. \")]),_c('figure',[_c('img',{attrs:{\"src\":\"/upload.png\"}}),_c('figcaption',[_vm._v(\"Figure 1: Dataset Selection\")])]),_c('h4',[_vm._v(\"2. Data Analysis\")]),_c('figure',[_c('img',{attrs:{\"src\":\"/stats_categorical.jpg\"}}),_c('figcaption',[_vm._v(\"Figure 2: Categorical features stats\")])]),_c('p',[_vm._v(\" After uploading the dataset an overview of the dataset would be shhown in the Data Analysis tab. In the first window we provide you witth statistical metrics of the dataset. for canotinious features we show the mean, std, min, max, and etc. In case of categorical features information such as shape, mode and percentages of smaples with modes option, and number of missing values. \")]),_c('figure',[_c('img',{attrs:{\"src\":\"/stats_continious.jpg\"}}),_c('figcaption',[_vm._v(\"Figure 3: Categorical features stats\")])]),_c('p',[_vm._v(\" In case of categorical features information such as shape, mode and percentages of smaples with modes option, and number of missing values. \")]),_c('h4',[_vm._v(\"3. Feature selection\")]),_c('p',[_vm._v(\" After uploading the dataset, you can customize the data by selecting specific features based on your requirements. To do this, click on the 'Select Features' button, which will open a new menu. This menu allows you to choose the features that will be used in the training process. If there is an issue with the automatic detection of feature data types, you can manually adjust the data types to ensure they are correctly categorized as ordinal, categorical, or continuous. \")]),_c('h4',[_vm._v(\"3. Model Selection\")]),_c('figure',[_c('img',{attrs:{\"src\":\"/model_selection.jpg\"}}),_c('figcaption',[_vm._v(\"Figure 4: Model selection and setting for knn\")])]),_c('p',[_vm._v(\" Once you have selected all the required features and resolved any issues with feature data types, you can proceed to the model selection step. Use the 'Model' dropdown to choose the model for training. The options in this dropdown will be dynamically populated based on the type of data in your features: regression models will be available for continuous data, while classification models will be shown for categorical data. Additionally, you can further customize the selected model by clicking the gear icon, which allows you to adjust common settings and parameters specific to each model. \")])])]),_c('b-tab-item',{attrs:{\"label\":\"Messages Log\",\"icon\":\"history\",\"icon-pack\":\"fas\"}},_vm._l((this.settings.getMessages),function(m,i){return _c('b-notification',{key:i,attrs:{\"aria-close-label\":\"Close notification\",\"icon-pack\":\"fas\",\"type\":m.type == 'warning' ? 'is-warning' : m.type == 'danger' ? 'is-danger' : 'is-info',\"has-icon\":\"\",\"closable\":false}},[_vm._v(\" \"+_vm._s(m.message?.toLowerCase())+\" \"),_c('br'),_vm._v(\" \"+_vm._s(m.date)+\" \")])}),1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return (this.settings?.items.length > 2)?_c('section',[_c('div',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"Principle Component Analysis \"),_c('b-tooltip',{attrs:{\"append-to-body\":\"\",\"label\":\"PCA dimentionality reduction and correlation circle\",\"multilined\":\"\"}},[_c('b-button',{attrs:{\"icon-left\":\"info\",\"icon-pack\":\"fas\",\"size\":\"is-small\",\"type\":\"is-dark\"}})],1)],1),_c('div',{staticClass:\"message-body\"},[_c('b-field',[_c('p',{staticClass:\"control\"},[_c('b-button',{attrs:{\"disabled\":_vm.numberOfComponents < 2 || _vm.numberOfComponents > this.settings.items.filter(column => column.selected && column.type === 1)?.length,\"size\":\"is-small\",\"type\":\"is-info\",\"loading\":_vm.loadingPCA,\"label\":\"Fit PCA\"},on:{\"click\":function($event){return _vm.drawPCA()}}})],1)]),_c('div',{staticClass:\"columns is-multiline\",attrs:{\"id\":\"pca_container\"}},[_vm._m(0),_vm._m(1),(this.pcaVarianceData)?_c('button',{staticClass:\"button is-small mt-1 ml-2\",on:{\"click\":function($event){return _vm.downloadExplainedVariance()}}},[_vm._v(\"Download PCA variance data\")]):_vm._e(),(_vm.hasPCA)?_c('div',{staticClass:\"column is-12\"},[_c('b-field',{attrs:{\"label\":\"Number of Components\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"min\":\"2\",\"placeholder\":\"Number of Components\"},model:{value:(_vm.numberOfComponents),callback:function ($$v) {_vm.numberOfComponents=$$v},expression:\"numberOfComponents\"}}),_c('p',{staticClass:\"control\"},[_c('b-button',{attrs:{\"disabled\":_vm.numberOfComponents < 2 || _vm.x == _vm.y || _vm.numberOfComponents > this.settings.items.filter(column => column.selected && column.type === 1)?.length,\"size\":\"is-small\",\"type\":\"is-info\",\"loading\":_vm.loadingPCA,\"label\":\"Draw PCA\"},on:{\"click\":function($event){return _vm.findPCA()}}})],1)],1)],1):_vm._e(),_c('div',{staticClass:\"column is-12\"},[_c('div',{staticStyle:{\"overflow\":\"auto\"},attrs:{\"id\":\"pca_matrix\"}}),(this.pcaData)?_c('button',{staticClass:\"button is-small mt-1\",on:{\"click\":function($event){return _vm.downloadPCA()}}},[_vm._v(\"Download PCA data\")]):_vm._e(),(this.pcaData)?_c('button',{staticClass:\"button is-small mt-1\",on:{\"click\":function($event){return _vm.downloadPCAPlot()}}},[_vm._v(\"Download plot\")]):_vm._e()])])],1)]),_c('div',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"t-distributed stochastic neighbor embedding\")]),_c('div',{staticClass:\"message-body\"},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-field',{attrs:{\"label\":\"Number of Components\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"placeholder\":\"Components\"},model:{value:(_vm.componentsTSNE),callback:function ($$v) {_vm.componentsTSNE=$$v},expression:\"componentsTSNE\"}})],1),_c('b-field',{attrs:{\"label\":\"Seed\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"placeholder\":\"Seed\"},model:{value:(_vm.seedTSNE),callback:function ($$v) {_vm.seedTSNE=$$v},expression:\"seedTSNE\"}}),_c('p',{staticClass:\"control\"},[_c('b-button',{attrs:{\"size\":\"is-small\",\"type\":\"is-info\",\"loading\":_vm.loadingTSNE,\"label\":\"Fit t-SNE\"},on:{\"click\":_vm.findTSNE}})],1)],1)],1),_vm._m(2)],1)]),_c('div',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"Autoencoder\")]),_c('div',{staticClass:\"message-body\"},[_c('b-field',{attrs:{\"grouped\":\"\"}},[_c('b-field',{attrs:{\"expanded\":\"\"}},[_c('b-field',{attrs:{\"label\":\"Hidden layers size\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"placeholder\":\"Hidden layer size\"},model:{value:(_vm.hiddenLayerSize),callback:function ($$v) {_vm.hiddenLayerSize=$$v},expression:\"hiddenLayerSize\"}})],1),_c('b-field',{attrs:{\"label\":\"x axis\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"placeholder\":\"x axis\"},model:{value:(_vm.autoEncoderX),callback:function ($$v) {_vm.autoEncoderX=$$v},expression:\"autoEncoderX\"}})],1),_c('b-field',{attrs:{\"label\":\"y axis\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"placeholder\":\"y axis\"},model:{value:(_vm.autoEncoderY),callback:function ($$v) {_vm.autoEncoderY=$$v},expression:\"autoEncoderY\"}})],1),_c('b-field',{attrs:{\"label\":\"iterations\",\"label-position\":'on-border'}},[_c('b-input',{attrs:{\"size\":\"is-small\",\"type\":\"number\",\"placeholder\":\"iterations\"},model:{value:(_vm.iterations),callback:function ($$v) {_vm.iterations=$$v},expression:\"iterations\"}})],1),_c('b-field',{attrs:{\"label\":\"encoder\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"size\":\"is-small\",\"placeholder\":\"Encoder Activation Function\"},model:{value:(_vm.encoderActivationFunction),callback:function ($$v) {_vm.encoderActivationFunction=$$v},expression:\"encoderActivationFunction\"}},[_c('option',{attrs:{\"value\":\"linear\",\"id\":\"linear\"}},[_vm._v(\" linear \")]),_c('option',{attrs:{\"value\":\"sigmoid\",\"id\":\"sigmoid\"}},[_vm._v(\" sigmoid \")]),_c('option',{attrs:{\"value\":\"relu\",\"id\":\"relu\"}},[_vm._v(\" RELU \")])])],1),_c('b-field',{attrs:{\"label\":\"decoder\",\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"size\":\"is-small\",\"placeholder\":\"Decoder Activation Function\"},model:{value:(_vm.decoderActivationFunction),callback:function ($$v) {_vm.decoderActivationFunction=$$v},expression:\"decoderActivationFunction\"}},[_c('option',{attrs:{\"value\":\"linear\",\"id\":\"linear\"}},[_vm._v(\" linear \")]),_c('option',{attrs:{\"value\":\"sigmoid\",\"id\":\"sigmoid\"}},[_vm._v(\" sigmoid \")]),_c('option',{attrs:{\"value\":\"relu\",\"id\":\"relu\"}},[_vm._v(\" RELU \")])])],1),_c('b-field',{attrs:{\"label-position\":'on-border'}},[_c('p',{staticClass:\"control\"},[_c('b-button',{attrs:{\"size\":\"is-small\",\"type\":\"is-info\",\"loading\":_vm.loadingAutoEncoder,\"label\":\"Fit Autoencoder\"},on:{\"click\":_vm.autoEncoder}})],1)])],1)],1),_vm._m(3)],1)])]):_c('section',[_c('b-message',{attrs:{\"type\":\"is-danger\",\"has-icon\":\"\",\"icon-pack\":\"fas\"}},[_vm._v(\" There is no data to show. \")])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-6\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":\"scree_plot\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-6\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":\"correlation_circle\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-6\",attrs:{\"id\":\"dimensionality_reduction_panel_tsne\"}},[_c('div',{attrs:{\"id\":\"tsne\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"column is-6\",attrs:{\"id\":\"dimensionality_reduction_panel_tsne\"}},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":\"autoencoder\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <section v-if=\"this.settings?.items.length > 2\">\r\n        <div class=\"message is-info\">\r\n            <div class=\"message-header p-2\">Principle Component Analysis\r\n\r\n                <b-tooltip append-to-body label=\"PCA dimentionality reduction and correlation circle\" multilined>\r\n                    <b-button icon-left=\"info\" icon-pack=\"fas\" size=\"is-small\" type=\"is-dark\" />\r\n                </b-tooltip>\r\n            </div>\r\n            <div class=\"message-body\">\r\n                <b-field>\r\n                    <p class=\"control\">\r\n                        <b-button\r\n                            :disabled=\"numberOfComponents < 2 || numberOfComponents > this.settings.items.filter(column => column.selected && column.type === 1)?.length\"\r\n                            size=\"is-small\" @click=\"drawPCA()\" type=\"is-info\" :loading=\"loadingPCA\" label=\"Fit PCA\" />\r\n                    </p>\r\n                </b-field>\r\n                <div class=\"columns is-multiline\" id=\"pca_container\">\r\n                    <div class=\"column is-6\">\r\n                        <div id=\"scree_plot\" style=\"height: 300px;\"></div>\r\n                    </div>\r\n                    <div class=\"column is-6\">\r\n                        <div id=\"correlation_circle\" style=\"height: 300px;\"></div>\r\n                    </div>\r\n                    <button class=\"button is-small mt-1 ml-2\" v-if=\"this.pcaVarianceData\"\r\n                        @click=\"downloadExplainedVariance()\">Download\r\n                        PCA variance data</button>\r\n                    <div class=\"column is-12\" v-if=\"hasPCA\">\r\n                        <b-field label=\"Number of Components\" :label-position=\"'on-border'\">\r\n                            <b-input v-model=\"numberOfComponents\" size=\"is-small\" type=\"number\" min=\"2\"\r\n                                placeholder=\"Number of Components\"></b-input>\r\n                            <p class=\"control\">\r\n                                <b-button\r\n                                    :disabled=\"numberOfComponents < 2 || x == y || numberOfComponents > this.settings.items.filter(column => column.selected && column.type === 1)?.length\"\r\n                                    size=\"is-small\" @click=\"findPCA()\" type=\"is-info\" :loading=\"loadingPCA\"\r\n                                    label=\"Draw PCA\" />\r\n                            </p>\r\n                        </b-field>\r\n                    </div>\r\n                    <div class=\"column is-12\">\r\n                        <div id=\"pca_matrix\" style=\"overflow: auto;\"></div>\r\n                        <button class=\"button is-small mt-1\" v-if=\"this.pcaData\" @click=\"downloadPCA()\">Download\r\n                            PCA\r\n                            data</button>\r\n                        <button class=\"button is-small mt-1\" v-if=\"this.pcaData\" @click=\"downloadPCAPlot()\">Download\r\n                            plot</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"message is-info\">\r\n            <div class=\"message-header p-2\">t-distributed stochastic neighbor embedding</div>\r\n            <div class=\"message-body\">\r\n\r\n                <b-field grouped>\r\n                    <b-field label=\"Number of Components\" :label-position=\"'on-border'\">\r\n                        <b-input v-model=\"componentsTSNE\" size=\"is-small\" type=\"number\"\r\n                            placeholder=\"Components\"></b-input>\r\n                    </b-field>\r\n                    <b-field label=\"Seed\" :label-position=\"'on-border'\">\r\n                        <b-input v-model=\"seedTSNE\" size=\"is-small\" type=\"number\" placeholder=\"Seed\"></b-input>\r\n                        <p class=\"control\">\r\n                            <b-button @click=\"findTSNE\" size=\"is-small\" type=\"is-info\" :loading=\"loadingTSNE\"\r\n                                label=\"Fit t-SNE\" />\r\n                        </p>\r\n                    </b-field>\r\n                </b-field>\r\n\r\n                <div class=\"column is-6\" id=\"dimensionality_reduction_panel_tsne\">\r\n                    <div id=\"tsne\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"message is-info\">\r\n            <div class=\"message-header p-2\">Autoencoder</div>\r\n            <div class=\"message-body\">\r\n                <b-field grouped>\r\n                    <b-field expanded>\r\n\r\n                        <b-field label=\"Hidden layers size\" :label-position=\"'on-border'\">\r\n                            <b-input v-model=\"hiddenLayerSize\" size=\"is-small\" type=\"number\"\r\n                                placeholder=\"Hidden layer size\"></b-input>\r\n                        </b-field>\r\n                        <b-field label=\"x axis\" :label-position=\"'on-border'\">\r\n                            <b-input v-model=\"autoEncoderX\" size=\"is-small\" type=\"number\"\r\n                                placeholder=\"x axis\"></b-input>\r\n                        </b-field>\r\n                        <b-field label=\"y axis\" :label-position=\"'on-border'\">\r\n                            <b-input v-model=\"autoEncoderY\" size=\"is-small\" type=\"number\"\r\n                                placeholder=\"y axis\"></b-input>\r\n                        </b-field>\r\n                        <b-field label=\"iterations\" :label-position=\"'on-border'\">\r\n                            <b-input v-model=\"iterations\" size=\"is-small\" type=\"number\"\r\n                                placeholder=\"iterations\"></b-input>\r\n                        </b-field>\r\n                        <b-field label=\"encoder\" :label-position=\"'on-border'\">\r\n                            <b-select v-model=\"encoderActivationFunction\" size=\"is-small\"\r\n                                placeholder=\"Encoder Activation Function\">\r\n                                <option value=\"linear\" id=\"linear\">\r\n                                    linear\r\n                                </option>\r\n                                <option value=\"sigmoid\" id=\"sigmoid\">\r\n                                    sigmoid\r\n                                </option>\r\n                                <option value=\"relu\" id=\"relu\">\r\n                                    RELU\r\n                                </option>\r\n                            </b-select>\r\n                        </b-field>\r\n                        <b-field label=\"decoder\" :label-position=\"'on-border'\">\r\n                            <b-select size=\"is-small\" v-model=\"decoderActivationFunction\"\r\n                                placeholder=\"Decoder Activation Function\">\r\n                                <option value=\"linear\" id=\"linear\">\r\n                                    linear\r\n                                </option>\r\n                                <option value=\"sigmoid\" id=\"sigmoid\">\r\n                                    sigmoid\r\n                                </option>\r\n                                <option value=\"relu\" id=\"relu\">\r\n                                    RELU\r\n                                </option>\r\n                            </b-select>\r\n                        </b-field>\r\n\r\n                        <b-field :label-position=\"'on-border'\">\r\n                            <p class=\"control\">\r\n                                <b-button size=\"is-small\" @click=\"autoEncoder\" type=\"is-info\"\r\n                                    :loading=\"loadingAutoEncoder\" label=\"Fit Autoencoder\" />\r\n                            </p>\r\n                        </b-field>\r\n                    </b-field>\r\n                </b-field>\r\n                <div class=\"column is-6\" id=\"dimensionality_reduction_panel_tsne\">\r\n                    <div id=\"autoencoder\" style=\"height: 300px;\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n    <section v-else>\r\n        <b-message type=\"is-danger\" has-icon icon-pack=\"fas\">\r\n            There is no data to show.\r\n        </b-message>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport ChartController from '@/helpers/charts';\r\nimport { settingStore } from '@/stores/settings'\r\nimport { tensorflow, DataFrame, toCSV } from 'danfojs';\r\n\r\nimport { FeatureCategories } from '@/helpers/settings'\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nlet chartController = new ChartController();\r\nexport default {\r\n    name: 'dmensionality-reduction-component',\r\n    setup() {\r\n        const settings = settingStore()\r\n\r\n        return { settings }\r\n    },\r\n    props: {\r\n        msg: String,\r\n        dataframe: Object,\r\n        columns: []\r\n    },\r\n    data() {\r\n        return {\r\n            numberOfComponents: 2,\r\n            loadingPCA: false,\r\n            loadingTSNE: false,\r\n            x: 1, y: 2,\r\n            loadingAutoEncoder: false,\r\n            hiddenLayerSize: 2,\r\n            componentsTSNE: 2,\r\n            seedTSNE: 123,\r\n            pcaData: null,\r\n            pcaVarianceData: null,\r\n            iterations: 200,\r\n            encoderActivationFunction: 'linear',\r\n            decoderActivationFunction: 'linear',\r\n            autoEncoderX: 1,\r\n            autoEncoderY: 2,\r\n            hasPCA: false,\r\n            pcaContainers: [],\r\n            df: null,\r\n        }\r\n    },\r\n    methods: {\r\n        prepareData() {\r\n            this.df = new DataFrame(this.settings.rawData);\r\n            this.df.dropNa({ axis: 1, inplace: true })\r\n            if (this.settings.isClassification && this.settings.mergedClasses?.length > 0) {\r\n                this.settings.mergedClasses.forEach((classes) => {\r\n                    let newClass = classes.map(m => m.class).join('_');\r\n                    classes.forEach(cls => {\r\n                        this.df.replace(cls.class, newClass, { columns: [this.settings.modelTarget], inplace: true })\r\n                    });\r\n                })\r\n            }\r\n        },\r\n        async drawPCA() {\r\n            try {\r\n                this.numberOfComponents = null\r\n                await this.findPCA(true);\r\n            } catch (error) {\r\n                this.loadingPCA = false;\r\n                throw error;\r\n            }\r\n\r\n        },\r\n        async findPCA(drawExplainedVariance = false) {\r\n            try {\r\n                this.prepareData()\r\n                this.loadingPCA = true;\r\n                this.pcaContainers = []\r\n                let numericColumns = this.settings.items.filter(column => column.selected && column.type === 1).map(column => column.name);\r\n                if (drawExplainedVariance == false) {\r\n                    if (this.numberOfComponents == 2) {\r\n                        this.pcaContainers.push([1, 2])\r\n                    } else {\r\n                        if (this.numberOfComponents == 3) {\r\n                            this.pcaContainers.push([1, 2], [1, 3], [2, 3])\r\n                        } else if (this.numberOfComponents > 3) {\r\n                            this.pcaContainers.push([1, 2], [1, 3], [2, 3])\r\n                            for (let i = 4; i <= this.numberOfComponents; i++) {\r\n                                let j = 1;\r\n                                while (j <= i - 1) {\r\n                                    this.pcaContainers.push([j, i])\r\n                                    j++\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.numberOfComponents = numericColumns.length\r\n                }\r\n\r\n                let x = this.df.loc({ columns: numericColumns }).values;\r\n                let pcaData = await chartController.draw_pca(\r\n                    x,\r\n                    this.settings.isClassification,\r\n                    this.df.loc({ columns: [this.settings.modelTarget] }).values,\r\n                    this.numberOfComponents,\r\n                    this.pcaContainers,\r\n                    numericColumns,\r\n                    drawExplainedVariance\r\n                )\r\n                this.pcaData = pcaData[0]\r\n                this.pcaVarianceData = pcaData[1]\r\n                this.hasPCA = true;\r\n                this.loadingPCA = false;\r\n\r\n            } catch (error) {\r\n                this.loadingPCA = false;\r\n                throw error;\r\n            }\r\n\r\n        },\r\n        downloadPCAPlot() {\r\n            chartController.downloadPlot('pca_matrix');\r\n        },\r\n        downloadPCA() {\r\n            let df = new DataFrame(this.pcaData)\r\n            toCSV(df, { filePath: \"pca_data.csv\", download: true });\r\n        },\r\n        downloadExplainedVariance() {\r\n            let varianceData = [];\r\n            for (let i = 1; i <= this.pcaVarianceData.length; i++) {\r\n                const element = this.pcaVarianceData[i - 1];\r\n                varianceData.push({ Components: i, ExplainedVariace: element })\r\n            }\r\n            let df = new DataFrame(varianceData)\r\n            toCSV(df, { filePath: \"variance_data.csv\", download: true });\r\n        },\r\n        async findTSNE() {\r\n            try {\r\n                this.prepareData()\r\n                this.loadingTSNE = true;\r\n                let numericColumns = this.settings.items.filter(column => column.selected && column.type === 1).map(column => column.name);\r\n                await chartController.plot_tsne(this.df.loc({ columns: numericColumns }).values,\r\n                    this.settings.isClassification\r\n                    , this.df.loc({ columns: [this.settings.modelTarget] }).values, this.seedTSNE, this.componentsTSNE);\r\n                this.loadingTSNE = false;\r\n            } catch (error) {\r\n                this.loadingTSNE = false;\r\n                throw error;\r\n            }\r\n\r\n        },\r\n        async autoEncoder() {\r\n            this.prepareData()\r\n            this.loadingAutoEncoder = true;\r\n            const model = tensorflow.sequential();\r\n            let numericColumns = this.settings.items.filter(m => m.type === FeatureCategories.Numerical.id).map(m => m.name);\r\n            let unitsLength = numericColumns.length;\r\n            let values = this.settings.df.loc({ columns: numericColumns }).values\r\n            const encoder = tensorflow.layers.dense({\r\n                units: +this.hiddenLayerSize,\r\n                batchInputShape: [null, unitsLength],\r\n                activation: this.encoderActivationFunction,\r\n                kernelInitializer: \"randomNormal\",\r\n                biasInitializer: \"ones\"\r\n            });\r\n            const decoder = tensorflow.layers.dense({ units: unitsLength, activation: this.decoderActivationFunction });\r\n            model.add(encoder);\r\n            model.add(decoder);\r\n            await model.compile({ optimizer: 'sgd', loss: 'meanSquaredError' });\r\n            const xs = tensorflow.tensor2d(values);\r\n            // eslint-disable-next-line no-unused-vars\r\n            let h = await model.fit(xs, xs, { epochs: +this.iterations, batchSize: 32, shuffle: true, validationSplit: 0.1 });\r\n            xs.dispose();\r\n            const tidyWrapper = tensorflow.tidy(() => {\r\n                const predictor = tensorflow.sequential();\r\n                predictor.add(encoder);\r\n                let xs = tensorflow.tensor2d(values);\r\n                let ret = predictor.predict(xs);\r\n                xs.dispose();\r\n                return ret.arraySync();\r\n            });\r\n            // eslint-disable-next-line no-unused-vars\r\n            let autoencoderPredictions = await tidyWrapper;\r\n            chartController.drawAutoencoder(autoencoderPredictions, this.autoEncoderX - 1, this.autoEncoderY - 1,\r\n                this.settings.df.loc({ columns: [this.settings.modelTarget] }).values\r\n                , this.settings.isClassification\r\n            )\r\n            this.loadingAutoEncoder = false;\r\n\r\n        }\r\n    },\r\n    errorCaptured() {\r\n\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./dmensionality-reduction-componenet.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./dmensionality-reduction-componenet.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./dmensionality-reduction-componenet.vue?vue&type=template&id=4544cf3c\"\nimport script from \"./dmensionality-reduction-componenet.vue?vue&type=script&lang=js\"\nexport * from \"./dmensionality-reduction-componenet.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(this.settings.results?.length > 0)?_c('b-tabs',{on:{\"input\":_vm.resize},model:{value:(_vm.activeResult),callback:function ($$v) {_vm.activeResult=$$v},expression:\"activeResult\"}},[_c('b-tab-item',{attrs:{\"label\":\"Comparison\"},on:{\"click\":function($event){return _vm.compareResultsDraw()}}},[_vm._l((_vm.metricsCollection),function(item,index){return _c('button',{key:index,staticClass:\"button is-small ml-1 is-success my-2\",on:{\"click\":function($event){return _vm.compareResultsDraw(item)}}},[_vm._v(_vm._s(item.name + '-' + (item.task ? 'cls' : 'reg')))])}),_c('div',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Methods Comparison \")]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},_vm._l((_vm.metrics),function(value,index){return _c('div',{key:index,staticClass:\"column is-4\"},[_c('div',{staticClass:\"column is-4\"},[_c('div',{attrs:{\"id\":index}})])])}),0)])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.compare),expression:\"compare\"}],staticClass:\"column is-12\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":\"comaprison_plot\"}})],2),_vm._l((this.settings.results),function(result){return _c('b-tab-item',{key:result.id,attrs:{\"label\":(result.id) + '.' + result.name.toString()}},[(result.modelTask)?_c('classification-view-component',{attrs:{\"result\":result},on:{\"delete-result\":_vm.deleteResult}}):_c('regression-view-component',{attrs:{\"result\":result},on:{\"delete-result\":_vm.deleteResult}}),_c('div',{staticClass:\"column is-12\"},[(!result.useHPC)?_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table is-bordered is-hoverable is-narrow display is-size-7\",attrs:{\"id\":'predictions_table_' + result.id,\"width\":\"100%\"}})]):_vm._e()])],1)})],2):_c('b-message',{attrs:{\"type\":\"is-danger\",\"has-icon\":\"\",\"icon-pack\":\"fas\"}},[_vm._v(\" No result to show. \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('article',{staticClass:\"columns is-multiline\"},[_c('div',{staticClass:\"column is-12 mb-1\"},[_c('b-message',{staticClass:\"has-text-left\",attrs:{\"type\":\"is-info \",\"has-icon\":\"\",\"icon-pack\":\"fas\"}},[_c('p',{staticClass:\"my-1 is-size-7\"},[_c('span',[_vm._v(\"Dataset Name : \"+_vm._s(_vm.result.datasetName)+\" , \")]),_c('span',[_vm._v(\" Target variable : \"+_vm._s(_vm.result.target))])]),_c('p',{staticClass:\"subtitle is-6 my-1 is-size-7\"},[_vm._v(\"Features :\")]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-6 is-size-7\"},[_vm._v(\"Categorical Features : \"),_vm._l((_vm.result.categoricalFeatures),function(feature){return _c('span',{key:feature},[_vm._v(\" \"+_vm._s(feature + ', ')+\" \")])})],2),_c('p',{staticClass:\"ml-2 my-1 subtitle is-6 is-size-7\"},[_vm._v(\"Numerical Features : \"),_vm._l((_vm.result.numericColumns),function(feature){return _c('span',{key:feature},[_vm._v(\" \"+_vm._s(feature + ', ')+\" \")])})],2),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.transformations?.length > 0),expression:\"result.transformations?.length > 0\"}],staticClass:\"ml-2 my-1 subtitle is-6 is-size-7\"},[_vm._v(\"Transformations : \"),_vm._l((_vm.result.transformations),function(transformation){return _c('span',{key:transformation.name},[_vm._v(\" \"+_vm._s(transformation.name + ': ' + transformation.scalerLabel + ',')+\" \")])})],2),_vm._l((_vm.result.options),function(value,key){return _c('p',{key:key,staticClass:\"is-size-7\"},[_vm._v(\" \"+_vm._s(key)+\": \"+_vm._s(value['value'])+\" \")])}),_c('p',{staticClass:\"subtitle my-1 is-size-7\"},[_vm._v(\"Goodness of Fit :\")]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"Accuracy : \"+_vm._s(_vm.result.metrics?.accuracy?.toFixed(2)))]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"f1 micro : \"+_vm._s(_vm.result.metrics?.f1_micro?.toFixed(2)))]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\" f1 macro :\"+_vm._s(_vm.result.metrics?.f1_macro?.toFixed(2)))]),_c('button',{staticClass:\"button is-danger has-text-white is-small\",staticStyle:{\"color\":\"#fff !important\"},on:{\"click\":function($event){return _vm.deleteTab()}}},[_vm._v(\"Delete \")]),_c('button',{staticClass:\"button is-success is-small\",on:{\"click\":function($event){return _vm.toggleHelp(_vm.result.helpSectionId)}}},[_vm._v(\"Method description \")]),_c('button',{staticClass:\"button is-info is-small\",on:{\"click\":function($event){return _vm.downloadPythonCode()}}},[_vm._v(\"Download the code\")])],2)],1),(!_vm.hide)?[_c('div',{staticClass:\"column is-12\"},[_c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Confusion Matrix and PCA of predictions\")]),_c('div',{staticClass:\"message-body mx-1\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{staticClass:\"column is-6 my-1\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":'confusion_matrix_' + _vm.result.id}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.showProbas),expression:\"result.showProbas\"}],staticClass:\"column is-6 my-1\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":'proba_plot_' + _vm.result.id}}),_c('br'),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.showProbas),expression:\"result.showProbas\"}],staticClass:\"column is-6 my-1\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":'roc_plot_' + _vm.result.id}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.hasExplaination && _vm.result.if !== 1),expression:\"result.hasExplaination && result.if !== 1\"}],staticClass:\"column is-6 my-1\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":'pfi_boxplot_' + _vm.result.id}})])])])]),(_vm.result.name.includes('Logi.Reg'))?_c('div',{staticClass:\"column is-12\"},[_c('div',{staticClass:\"columns is-multiline\"},[_c('div',{staticClass:\"column is-7\"},[_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table has-text-centered nowrap is-striped is-bordered is-narrow is-hoverable is-size-7\",attrs:{\"id\":'metrics_table_' + _vm.result.id}},[_vm._m(0),_vm._m(1)])])]),_c('div',{staticClass:\"column is-5\",attrs:{\"id\":'parameters_plot_' + _vm.result.id}}),_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"250px\"},attrs:{\"id\":'errors_' + _vm.result.id}}),_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"250px\"},attrs:{\"id\":'regularization_' + _vm.result.id}})])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.hasExplaination && !_vm.result.name.includes('Logi.Reg')),expression:\"result.hasExplaination && !result.name.includes('Logi.Reg')\"}],staticClass:\"column is-12\"},[_c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Partial Dependence Plot\")]),_c('div',{staticClass:\"message-body mx-1\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[(_vm.result.name.toString().toLowerCase().includes('knn'))?_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":'knn_table_' + _vm.result.id}}):_vm._e(),_c('div',{attrs:{\"id\":'pdp_containers_' + _vm.result.id}})]),_c('br')])])])]:[_vm._v(\" In progress... \")]],2)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{attrs:{\"colspan\":\"1\"}}),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"OLS\")]),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"lambda min\")]),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"lambda 1se\")])]),_c('tr',[_c('th',{staticClass:\"has-text-centered\"},[_vm._v(\"name\")]),_c('th',[_vm._v(\"coef\")]),_c('th',[_vm._v(\"st.d.\")]),_c('th',[_c('i',[_vm._v(\"p\")]),_vm._v(\"-value\")]),_c('th',[_vm._v(\"coef\")]),_c('th',[_vm._v(\"st.d.\")]),_c('th',[_c('i',[_vm._v(\"p\")]),_vm._v(\"-value\")]),_c('th',[_vm._v(\"coef\")]),_c('th',[_vm._v(\"st.d.\")]),_c('th',[_c('i',[_vm._v(\"p\")]),_vm._v(\"-value\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('tfoot',{staticClass:\"has-text-centered\",staticStyle:{\"font-weight\":\"normal\"}},[_c('tr',[_c('th'),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}}),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}}),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}})])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <article class=\"columns is-multiline\">\r\n        <div class=\"column is-12 mb-1\">\r\n            <b-message type=\"is-info \" has-icon icon-pack=\"fas\" class=\"has-text-left\">\r\n                <p class=\"my-1 is-size-7\">\r\n                    <span>Dataset Name : {{ result.datasetName }} , </span>\r\n                    <span> Target variable : {{ result.target }}</span>\r\n                </p>\r\n\r\n                <p class=\"subtitle is-6 my-1 is-size-7\">Features :</p>\r\n                <p class=\"ml-2 my-1 subtitle is-6 is-size-7\">Categorical Features : <span\r\n                        v-for=\"feature in result.categoricalFeatures\" :key=\"feature\">\r\n                        {{ feature + ', ' }}\r\n                    </span>\r\n                </p>\r\n                <p class=\"ml-2 my-1 subtitle is-6 is-size-7\">Numerical Features : <span\r\n                        v-for=\"feature in result.numericColumns\" :key=\"feature\">\r\n                        {{ feature + ', ' }}\r\n                    </span></p>\r\n                <p class=\"ml-2 my-1 subtitle is-6 is-size-7\" v-show=\"result.transformations?.length > 0\">Transformations\r\n                    :\r\n                    <span v-for=\"transformation in result.transformations\" :key=\"transformation.name\">\r\n                        {{ transformation.name + ': ' + transformation.scalerLabel + ',' }}\r\n                    </span>\r\n                </p>\r\n                <p class=\"is-size-7\" v-for=\"(value, key) in result.options\" :key=\"key\">\r\n                    {{ key }}: {{ value['value'] }}\r\n                </p>\r\n                <p class=\"subtitle my-1 is-size-7\">Goodness of Fit :</p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7\">Accuracy : {{ result.metrics?.accuracy?.toFixed(2) }}</p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7\">f1 micro : {{ result.metrics?.f1_micro?.toFixed(2) }}</p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7\"> f1 macro :{{ result.metrics?.f1_macro?.toFixed(2) }}</p>\r\n                <button class=\"button is-danger has-text-white is-small\" style=\"color:#fff !important\"\r\n                    @click=\"deleteTab()\">Delete </button>\r\n                <button class=\"button is-success is-small\" @click=\"toggleHelp(result.helpSectionId)\">Method description\r\n                </button>\r\n                <button class=\"button is-info is-small\" @click=\"downloadPythonCode()\">Download the code</button>\r\n            </b-message>\r\n        </div>\r\n        <template v-if=\"!hide\">\r\n            <div class=\"column is-12\">\r\n                <article class=\"message is-info\">\r\n                    <div class=\"message-header p-2\"> Confusion Matrix and PCA of predictions</div>\r\n                    <div class=\"message-body mx-1\">\r\n                        <div class=\"columns is-multiline is-gapless\">\r\n                            <div class=\"column is-6 my-1\" style=\"height: 400px;\" :id=\"'confusion_matrix_' + result.id\">\r\n                            </div>\r\n                            <div v-show=\"result.showProbas\" class=\"column is-6 my-1\" style=\"height: 400px;\"\r\n                                :id=\"'proba_plot_' + result.id\">\r\n                            </div>\r\n                            <br>\r\n                            <div v-show=\"result.showProbas\" class=\"column is-6 my-1\" style=\"height: 400px;\"\r\n                                :id=\"'roc_plot_' + result.id\">\r\n                            </div>\r\n\r\n                            <div v-show=\"result.hasExplaination && result.if !== 1\" class=\"column is-6 my-1\"\r\n                                style=\"height: 400px;\" :id=\"'pfi_boxplot_' + result.id\">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n            <div class=\"column is-12\" v-if=\"result.name.includes('Logi.Reg')\">\r\n                <div class=\"columns is-multiline\">\r\n                    <div class=\"column is-7\">\r\n                        <div class=\"table-container\">\r\n                            <table\r\n                                class=\"table has-text-centered nowrap is-striped is-bordered is-narrow is-hoverable is-size-7\"\r\n                                :id=\"'metrics_table_' + result.id\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th colspan=\"1\"></th>\r\n                                        <th colspan=\"3\" class=\"has-text-centered\">OLS</th>\r\n                                        <th colspan=\"3\" class=\"has-text-centered\">lambda min</th>\r\n                                        <th colspan=\"3\" class=\"has-text-centered\">lambda 1se</th>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <th class=\"has-text-centered\">name</th>\r\n                                        <th>coef</th>\r\n                                        <th>st.d.</th>\r\n                                        <th><i>p</i>-value</th>\r\n                                        <th>coef</th>\r\n                                        <th>st.d.</th>\r\n                                        <th><i>p</i>-value</th>\r\n                                        <th>coef</th>\r\n                                        <th>st.d.</th>\r\n                                        <th><i>p</i>-value</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tfoot class=\"has-text-centered\" style=\" font-weight: normal\">\r\n                                    <tr>\r\n                                        <th></th>\r\n                                        <th colspan=\"3\" class=\"has-text-centered\"></th>\r\n                                        <th colspan=\"3\" class=\"has-text-centered\"></th>\r\n                                        <th colspan=\"3\" class=\"has-text-centered\"></th>\r\n\r\n                                    </tr>\r\n                                </tfoot>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"column is-5\" :id=\"'parameters_plot_' + result.id\">\r\n                    </div>\r\n                    <div class=\"column is-6\" :id=\"'errors_' + result.id\" style=\"height:250px\">\r\n                    </div>\r\n                    <div class=\"column is-6\" :id=\"'regularization_' + result.id\" style=\"height:250px\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"column is-12\" v-show=\"result.hasExplaination && !result.name.includes('Logi.Reg')\">\r\n                <article class=\"message is-info\">\r\n                    <div class=\"message-header p-2\"> Partial Dependence Plot</div>\r\n                    <div class=\"message-body mx-1\">\r\n                        <div class=\"columns is-multiline is-gapless\">\r\n                            <div class=\"column is-6\" style=\"height: 400px;\" :id=\"'knn_table_' + result.id\"\r\n                                v-if=\"result.name.toString().toLowerCase().includes('knn')\">\r\n                            </div>\r\n                            <div :id=\"'pdp_containers_' + result.id\"></div>\r\n                        </div>\r\n                        <br>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n        </template>\r\n        <template v-else>\r\n            In progress...\r\n        </template>\r\n    </article>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { settingStore } from '@/stores/settings';\r\nimport { ModelFactory } from \"@/helpers/model_factory\";\r\n\r\nimport { toCSV,concat } from 'danfojs';\r\n\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n\r\n    setup() {\r\n        const settings = settingStore()\r\n        return { settings }\r\n    },\r\n    created() {\r\n        this.pdpFeature = this.settings.features[0].name\r\n    },\r\n    data() {\r\n        return {\r\n            pdpFeature: null,\r\n            hide: false,\r\n            fileName: null,\r\n            showResult: true,\r\n            intervalId: null,\r\n            jobProgressTries: 0,\r\n        }\r\n    },\r\n    name: 'ClassificationViewComponent',\r\n    methods: {\r\n        upload() {\r\n            let vm = this;\r\n            let formdata = new FormData();\r\n            let dataframe = concat({ dfList: [this.result.snapshot.x, this.result.snapshot.xt], axis: 0 })\r\n            let target = this.result.snapshot.y.concat(this.result.snapshot.yt)\r\n            dataframe.addColumn(this.result.target, target, { inplace: true })\r\n            let file = toCSV(dataframe, { filePath: \"pca_data.csv\" });\r\n            const blob = new Blob([file], { type: \"text/csv\" });\r\n            formdata.append('file', blob, 'main.csv');\r\n\r\n            return axios.post('http://127.0.0.1:5000/upload', formdata, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }\r\n            ).then(function (res) {\r\n                vm.fileName = res.data\r\n                console.log('SUCCESS!!', vm.fileName);\r\n                axios.get(`http://127.0.0.1:5000/run?file_name=${vm.fileName}&job_id=${vm.result.useHPC}&target=${vm.result.target}&seed=${vm.result.seed}`).then(() => {\r\n                    vm.intervalId = setInterval(() => {\r\n                        axios.get(`http://127.0.0.1:5000/progress?job_id=${vm.result.useHPC}`)\r\n                            .then((res) => {\r\n                                vm.jobProgressTries += 1;\r\n                                if (res.data != 'ongoing') {\r\n                                    vm.hide = false;\r\n                                    vm.result.model.predictions = res.data.predictions;\r\n                                    vm.result.model.pdp_averages = res.data.pdp_avgs;\r\n                                    vm.result.model.pdp_grid = res.data.pdp_grid;\r\n                                    vm.result.model.importances = res.data.pfi;\r\n                                    vm.result.model.fpr = res.data.fprs;\r\n                                    vm.result.model.tpr = res.data.tprs;\r\n                                    vm.result.model.auc = res.data.auc;\r\n                                    vm.result.model.probas = res.data.probas;\r\n                                    vm.result.model.visualize(vm.result.snapshot.xt, vm.result.snapshot.yt, vm.result.snapshot.labels,\r\n                                        res.data.predictions, vm.result.encoder, vm.result.snapshot.x.columns, vm.result.snapshot.categoricals)\r\n                                    clearInterval(vm.intervalId);\r\n                                } else if (vm.jobProgressTries > 100) {\r\n                                    clearInterval(vm.intervalId);\r\n                                }\r\n                            });\r\n                    }, 3 * 1000)\r\n                }).catch(function (err) {\r\n                    console.log('FAILURE!!', err.data);\r\n                });\r\n            }).catch(function () {\r\n                console.log('FAILURE!!');\r\n            });\r\n        },\r\n        toggleHelp(id) {\r\n            this.settings.setActiveTab(3);\r\n            setTimeout(() => {\r\n                let el = document.getElementById(id);\r\n                el.scrollIntoView({ behavior: 'smooth' })\r\n            }, 500);\r\n        },\r\n        deleteTab() {\r\n            this.$emit(\"delete-result\", this.result.id)\r\n        },\r\n        downloadPythonCode() {\r\n            let model_factory = new ModelFactory();\r\n            let model = model_factory.createModel(this.result.snapshot.id, this.result.options);\r\n            let pyCode = model.generatePythonCode()\r\n            const blob = new Blob([pyCode], { type: 'text/plain' });\r\n            const url = URL.createObjectURL(blob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.download = 'example.py';\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            URL.revokeObjectURL(url);\r\n        },\r\n        async updatePartialDependencePlot() {\r\n            let model_factory = new ModelFactory();\r\n            let model = model_factory.createModel(this.result.snapshot.id, this.result.options);\r\n            await model.train(this.result.snapshot.x, this.result.snapshot.y,\r\n                this.result.snapshot.xt, this.result.snapshot.yt, this.result.snapshot.xFeatures, this.result.snapshot.categoricals, this.result.snapshot.xFeatures.findIndex(feature => feature == this.pdpFeature));\r\n            model.chartController.plotPDP(this.result.id, model.pdp_averages, model.pdp_grid, this.result.snapshot.labels, this.pdpFeature);\r\n\r\n        }\r\n    },\r\n    props: {\r\n        result: {}\r\n    },\r\n    watch: {\r\n        result: {\r\n            handler() {\r\n                if (this.result.useHPC) {\r\n                    this.hide = true;\r\n                    this.upload()\r\n                }\r\n            },\r\n            immediate: true,\r\n        }\r\n    },\r\n    errorCaptured(err, vm, info) {\r\n        console.log(`cat EC: ${err.toString()}\\ninfo: ${info}`);\r\n        return false;\r\n    },\r\n    unmounted() {\r\n        clearInterval(this.intervalId)\r\n    }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped></style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./classification-view-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./classification-view-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./classification-view-component.vue?vue&type=template&id=32ebb01b&scoped=true\"\nimport script from \"./classification-view-component.vue?vue&type=script&lang=js\"\nexport * from \"./classification-view-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32ebb01b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"columns is-multiline\"},[_c('div',{staticClass:\"column is-12\"},[_c('b-message',{staticClass:\"has-text-left\",attrs:{\"type\":\"is-info is-size-7\\t\",\"has-icon\":\"\",\"icon-pack\":\"fas\"}},[_c('p',{staticClass:\"my-1\"},[_c('span',[_vm._v(\"Dataset Name : \"+_vm._s(_vm.result.datasetName)+\" , \")]),_c('span',[_vm._v(\" Target variable : \"+_vm._s(_vm.result.target))])]),_c('p',{staticClass:\"subtitle is-size-7 my-1\"},[_vm._v(\"Features :\")]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"Categorical Features : \"),_vm._l((_vm.result.categoricalFeatures),function(feature){return _c('span',{key:feature},[_vm._v(\" \"+_vm._s(feature + ', ')+\" \")])})],2),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"Numerical Features : \"),_vm._l((_vm.result.numericColumns),function(feature){return _c('span',{key:feature},[_vm._v(\" \"+_vm._s(feature + ', ')+\" \")])})],2),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"Transformations : \"),_vm._l((_vm.result.transformations),function(transformation){return _c('span',{key:transformation.name},[_vm._v(\" \"+_vm._s(transformation.name + ': ' + transformation.scaler + ',')+\" \")])})],2),_vm._l((_vm.result.options),function(value,key){return _c('p',{key:key},[_vm._v(\" \"+_vm._s(key)+\": \"+_vm._s(value['value'])+\" \")])}),_c('p',{staticClass:\"subtitle is-size-7 my-1\"},[_vm._v(\"Goodness of Fit :\")]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"MSE : \"+_vm._s(_vm.result.metrics.mse.toFixed(2)))]),_c('p',{staticClass:\"ml-2 my-1 subtitle is-size-7\"},[_vm._v(\"R2 : \"+_vm._s(_vm.result.metrics.rsquared.toFixed(2)))]),_c('button',{staticClass:\"button is-danger has-text-white is-small\",on:{\"click\":function($event){return _vm.deleteTab()}}},[_vm._v(\"Delete \")]),_c('button',{staticClass:\"button is-success is-small\",on:{\"click\":function($event){return _vm.toggleHelp(_vm.result.helpSectionId)}}},[_vm._v(\"Help\")])],2)],1),(_vm.result.name.includes('Lin.Reg') || _vm.result.name.includes('Poly.Reg'))?_c('div',{staticClass:\"column is-12\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{staticClass:\"column is-7\"},[_c('div',{staticClass:\"table-container\"},[_c('table',{staticClass:\"table has-text-centered nowrap is-striped is-bordered is-narrow is-hoverable is-size-7\",attrs:{\"id\":'metrics_table_' + _vm.result.id}},[_vm._m(0),_vm._m(1)])])]),_c('div',{staticClass:\"column is-5\",attrs:{\"id\":'parameters_plot_' + _vm.result.id,\"width\":\"100%\"}}),_c('div',{staticClass:\"column is-12 mb-2\"},[_c('div',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Regularization Plots \")]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"250px\"},attrs:{\"id\":'errors_' + _vm.result.id,\"width\":\"100%\"}}),_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"250px\"},attrs:{\"id\":'regularization_' + _vm.result.id,\"width\":\"100%\"}})])])])]),_c('div',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Residuals Plots \")]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_y_yhat_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_y_yhat_min_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_y_yhat_1se_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_residual_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_residual_min_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_residual_1se_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'qqplot_ols_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'qqplot_min_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-4\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'qqplot_1se_' + _vm.result.id,\"width\":\"100%\"}})])])])])])]):_c('div',{staticClass:\"column is-12\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{staticClass:\"column is-12\"},[_c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Predictions and Residuals Plot \")]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{staticClass:\"column is-6\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'regression_y_yhat_' + _vm.result.id,\"width\":\"100%\"}})]),_c('div',{staticClass:\"column is-6\"},[_c('div',{staticStyle:{\"height\":\"300px\"},attrs:{\"id\":'errors_' + _vm.result.id,\"width\":\"100%\"}})]),(_vm.result.name.toString().toLowerCase().includes('knn'))?_c('div',{staticClass:\"column is-6\",staticStyle:{\"height\":\"350px\"},attrs:{\"id\":'knn_table_' + _vm.result.id}}):_vm._e()])])])]),_c('div',{staticClass:\"column is-12\"},[_c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\" Partial Dependence Plot and Permutation Feature Importance \")]),_c('div',{staticClass:\"message-body\"},[_c('div',{staticClass:\"columns is-multiline is-gapless\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.result.hasExplaination),expression:\"result.hasExplaination\"}],staticClass:\"column is-6\",staticStyle:{\"height\":\"400px\"},attrs:{\"id\":'pfi_boxplot_' + _vm.result.id}})])])])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{attrs:{\"colspan\":\"1\"}}),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"OLS\")]),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"lasso min\")]),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"lasso 1se\")])]),_c('tr',[_c('th',{staticClass:\"has-text-centered\"},[_vm._v(\"names\")]),_c('th',[_vm._v(\"coef\")]),_c('th',[_vm._v(\"st.d.\")]),_c('th',[_c('i',[_vm._v(\"p\")]),_vm._v(\"-value\")]),_c('th',[_vm._v(\"coef\")]),_c('th',[_vm._v(\"st.d.\")]),_c('th',[_c('i',[_vm._v(\"p\")]),_vm._v(\"-value\")]),_c('th',[_vm._v(\"coef\")]),_c('th',[_vm._v(\"st.d.\")]),_c('th',[_c('i',[_vm._v(\"p\")]),_vm._v(\"-value\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('tfoot',{staticStyle:{\"font-weight\":\"normal\"}},[_c('tr',[_c('th'),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}}),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}}),_c('th',{staticClass:\"has-text-centered\",attrs:{\"colspan\":\"3\"}})])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"columns is-multiline\">\r\n        <div class=\"column is-12\">\r\n            <b-message type=\"is-info is-size-7\t\" has-icon icon-pack=\"fas\" class=\"has-text-left\">\r\n                <p class=\"my-1\">\r\n                    <span>Dataset Name : {{ result.datasetName }} , </span>\r\n                    <span> Target variable : {{ result.target }}</span>\r\n                </p>\r\n\r\n                <p class=\"subtitle is-size-7 my-1\">Features :</p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7 \">Categorical Features : <span\r\n                        v-for=\"feature in result.categoricalFeatures\" :key=\"feature\">\r\n                        {{ feature + ', ' }}\r\n                    </span>\r\n                </p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7 \">Numerical Features : <span\r\n                        v-for=\"feature in result.numericColumns\" :key=\"feature\">\r\n                        {{ feature + ', ' }}\r\n                    </span></p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7 \">Transformations :\r\n                    <span v-for=\"transformation in result.transformations\" :key=\"transformation.name\">\r\n                        {{ transformation.name + ': ' + transformation.scaler + ',' }}\r\n                    </span>\r\n                </p>\r\n                <p v-for=\"(value, key) in result.options\" :key=\"key\">\r\n                    {{ key }}: {{ value['value'] }}\r\n                </p>\r\n                <p class=\"subtitle is-size-7 my-1\">Goodness of Fit :</p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7 \">MSE : {{ result.metrics.mse.toFixed(2) }}</p>\r\n                <p class=\"ml-2 my-1 subtitle is-size-7 \">R2 : {{ result.metrics.rsquared.toFixed(2) }}</p>\r\n                <button class=\"button is-danger has-text-white is-small\" @click=\"deleteTab()\">Delete </button>\r\n                <button class=\"button is-success is-small\" @click=\"toggleHelp(result.helpSectionId)\">Help</button>\r\n\r\n            </b-message>\r\n        </div>\r\n        <div class=\"column is-12\" v-if=\"result.name.includes('Lin.Reg') || result.name.includes('Poly.Reg')\">\r\n            <div class=\"columns is-multiline is-gapless\">\r\n\r\n                <div class=\"column is-7\">\r\n                    <div class=\"table-container\">\r\n                        <table\r\n                            class=\"table has-text-centered nowrap is-striped is-bordered is-narrow is-hoverable is-size-7\"\r\n                            :id=\"'metrics_table_' + result.id\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th colspan=\"1\"></th>\r\n                                    <th colspan=\"3\" class=\"has-text-centered\">OLS</th>\r\n                                    <th colspan=\"3\" class=\"has-text-centered\">lasso min</th>\r\n                                    <th colspan=\"3\" class=\"has-text-centered\">lasso 1se</th>\r\n                                </tr>\r\n                                <tr>\r\n                                    <th class=\"has-text-centered\">names</th>\r\n                                    <th>coef</th>\r\n                                    <th>st.d.</th>\r\n                                    <th><i>p</i>-value</th>\r\n                                    <th>coef</th>\r\n                                    <th>st.d.</th>\r\n                                    <th><i>p</i>-value</th>\r\n                                    <th>coef</th>\r\n                                    <th>st.d.</th>\r\n                                    <th><i>p</i>-value</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tfoot style=\" font-weight: normal\">\r\n                                <tr>\r\n                                    <th></th>\r\n                                    <th colspan=\"3\" class=\"has-text-centered\"></th>\r\n                                    <th colspan=\"3\" class=\"has-text-centered\"></th>\r\n                                    <th colspan=\"3\" class=\"has-text-centered\"></th>\r\n\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div class=\"column is-5\" :id=\"'parameters_plot_' + result.id\" width=\"100%\">\r\n                </div>\r\n                <div class=\"column is-12 mb-2\">\r\n                    <div class=\"message is-info\">\r\n                        <div class=\"message-header p-2\">\r\n                            Regularization Plots\r\n                        </div>\r\n                        <div class=\"message-body\">\r\n                            <div class=\"columns is-multiline is-gapless\">\r\n                                <div class=\"column is-6\" :id=\"'errors_' + result.id\" width=\"100%\" style=\"height:250px\">\r\n                                </div>\r\n                                <div class=\"column is-6\" :id=\"'regularization_' + result.id\" width=\"100%\"\r\n                                    style=\"height:250px\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"message is-info\">\r\n                    <div class=\"message-header p-2\">\r\n                        Residuals Plots\r\n                    </div>\r\n                    <div class=\"message-body\">\r\n                        <div class=\"columns is-multiline is-gapless\">\r\n\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'regression_y_yhat_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'regression_y_yhat_min_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'regression_y_yhat_1se_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'regression_residual_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'regression_residual_min_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'regression_residual_1se_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'qqplot_ols_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'qqplot_min_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"column is-4\">\r\n                                <div :id=\"'qqplot_1se_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"column is-12\" v-else>\r\n            <div class=\"columns is-multiline is-gapless\">\r\n                <div class=\"column is-12\">\r\n                    <article class=\"message is-info\">\r\n                        <div class=\"message-header p-2\"> Predictions and Residuals Plot\r\n                        </div>\r\n                        <div class=\"message-body\">\r\n                            <div class=\"columns is-multiline is-gapless\">\r\n\r\n                                <div class=\"column is-6\">\r\n                                    <div :id=\"'regression_y_yhat_' + result.id\" width=\"100%\" style=\"height:300px\">\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"column is-6\">\r\n                                    <div :id=\"'errors_' + result.id\" width=\"100%\" style=\"height:300px\"></div>\r\n                                </div>\r\n                                <div class=\"column is-6\" style=\"height: 350px;\" :id=\"'knn_table_' + result.id\"\r\n                                    v-if=\"result.name.toString().toLowerCase().includes('knn')\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </article>\r\n                </div>\r\n                <div class=\"column is-12\">\r\n                    <article class=\"message is-info\">\r\n                        <div class=\"message-header p-2\"> Partial Dependence Plot and Permutation Feature Importance\r\n                        </div>\r\n                        <div class=\"message-body\">\r\n                            <div class=\"columns is-multiline is-gapless\">\r\n                                <div class=\"column is-6\" style=\"height: 400px;\" v-show=\"result.hasExplaination\"\r\n                                    :id=\"'pfi_boxplot_' + result.id\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </article>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { settingStore } from '@/stores/settings'\r\nimport { ModelFactory } from \"@/helpers/model_factory\";\r\n\r\nexport default {\r\n\r\n    setup() {\r\n        const settings = settingStore()\r\n        return { settings }\r\n    },\r\n    name: 'regression-view-component',\r\n    methods: {\r\n        toggleHelp(id) {\r\n            this.settings.setActiveTab(3);\r\n            setTimeout(() => {\r\n                let el = document.getElementById(id);\r\n                el.scrollIntoView({ behavior: 'smooth' })\r\n            }, 500);\r\n        },\r\n        deleteTab() {\r\n            this.$emit(\"delete-result\", this.result.id)\r\n        },\r\n        async updatePartialDependencePlot() {\r\n            let model_factory = new ModelFactory();\r\n            let model = model_factory.createModel(this.result.snapshot.id, this.result.options);\r\n            await model.train(this.result.snapshot.x, this.result.snapshot.y,\r\n                this.result.snapshot.xt, this.result.snapshot.yt, this.result.snapshot.xFeatures, this.result.snapshot.categoricals,\r\n                [0, 1, 2]);\r\n            model.chartController.plotPDPRegression(this.result.id, model.pdp_averages, model.pdp_grid, this.result.snapshot.labels, this.result.snapshot.xFeatures, this.result.snapshot.categoricals);\r\n\r\n        },\r\n    },\r\n    created() {\r\n        this.pdpFeature = this.settings.features.filter(feature => feature.name != this.settings.target)[0].name;\r\n\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            pdpFeature: null,\r\n            showResult: true\r\n        }\r\n    },\r\n    props: {\r\n        result: {}\r\n    },\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped></style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./regression-view-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./regression-view-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./regression-view-component.vue?vue&type=template&id=2946f9e4&scoped=true\"\nimport script from \"./regression-view-component.vue?vue&type=script&lang=js\"\nexport * from \"./regression-view-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2946f9e4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div>\r\n\r\n        <b-tabs v-model=\"activeResult\" v-if=\"this.settings.results?.length > 0\" @input=\"resize\">\r\n            <b-tab-item label=\"Comparison\" @click=\"compareResultsDraw()\">\r\n                <button v-for=\"(item, index) in metricsCollection\" :key=\"index\"\r\n                    class=\"button is-small ml-1 is-success my-2\" @click=\"compareResultsDraw(item)\">{{\r\n                        item.name + '-' + (item.task ? 'cls' : 'reg') }}</button>\r\n                <div class=\"message is-info \">\r\n                    <div class=\"message-header p-2\">\r\n                        Methods Comparison\r\n                    </div>\r\n                    <div class=\"message-body\">\r\n                        <div class=\"columns is-multiline is-gapless\">\r\n                            <div v-for=\"(value, index) in metrics\" :key=\"index\" class=\"column is-4\">\r\n                                <div class=\"column is-4\">\r\n                                    <div :id=\"index\"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div v-show=\"compare\" class=\"column is-12\" id=\"comaprison_plot\" style=\"height:400px;\"></div>\r\n            </b-tab-item>\r\n            <b-tab-item :label=\"(result.id) + '.' + result.name.toString()\" v-for=\"result in this.settings.results\"\r\n                :key=\"result.id\">\r\n                <classification-view-component @delete-result=\"deleteResult\" :result=\"result\"\r\n                    v-if=\"result.modelTask\"></classification-view-component>\r\n                <regression-view-component @delete-result=\"deleteResult\" :result=\"result\" v-else>\r\n                </regression-view-component>\r\n                <div class=\"column is-12\">\r\n                    <div class=\"table-container\" v-if=\"!result.useHPC\">\r\n                        <table :id=\"'predictions_table_' + result.id\"\r\n                            class=\"table is-bordered is-hoverable is-narrow display is-size-7\" width=\"100%\">\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </b-tab-item>\r\n        </b-tabs>\r\n        <b-message type=\"is-danger\" has-icon icon-pack=\"fas\" v-else>\r\n            No result to show.\r\n        </b-message>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { settingStore } from '@/stores/settings'\r\nimport ClassificationViewComponent from './classification-view-component.vue'\r\nimport RegressionViewComponent from './regression-view-component.vue'\r\nimport { computed } from \"vue\";\r\nimport UI from '@/helpers/ui';\r\nimport ChartController from '@/helpers/charts';\r\n\r\nlet chartController = new ChartController(null, null)\r\n\r\nlet ui = new UI(null, null)\r\n\r\n\r\nexport default {\r\n    components: {\r\n        'classification-view-component': ClassificationViewComponent,\r\n        'regression-view-component': RegressionViewComponent,\r\n\r\n    },\r\n    setup() {\r\n        const settings = settingStore()\r\n        const activeResult = computed({\r\n            get: () => settings.getResultTab,\r\n            set: (value) => settings.setResultActiveTab(value), // Mutate the state properly\r\n        });\r\n        return { settings, activeResult }\r\n    },\r\n\r\n    name: 'ResultsComponent',\r\n    props: {\r\n    },\r\n    data() {\r\n        return {\r\n            metricsCollection: [],\r\n            compare: false,\r\n            datasetName: '',\r\n            isClassication: -1,\r\n            comparisonMetric: '',\r\n            baseMetrics: [],\r\n            activeTab: null,\r\n            visitedTabs: [],\r\n            metrics: {},\r\n            xTicks: {},\r\n        }\r\n    },\r\n    methods: {\r\n        fillMetrics() {\r\n            if (this.isClassication == 1) {\r\n                this.baseMetrics = [{ name: 'accuracy', id: 1 }, { name: 'f1 micro', id: 2 }, { 'name': 'f1 macro', id: 3 }]\r\n            } else if (this.isClassication == 0) {\r\n                this.baseMetrics = [{ name: 'R2', id: 1 }, { name: 'MSE', id: 0 }]\r\n            }\r\n\r\n        },\r\n        compareResults(dataset) {\r\n            let datasetName = this.settings.datasetName\r\n            let task = this.settings.classificationTask;\r\n            try {\r\n                window.Plotly.purge('comaprison_plot');\r\n            } catch (error) {\r\n                console.log('no plot to remove');\r\n            }\r\n            if (dataset) {\r\n                datasetName = dataset.name\r\n                task = dataset.task\r\n            }\r\n            let methodResults = this.settings.getMethodResults.filter(m => m.datasetName == datasetName && task == m.modelTask)\r\n            this.compare = true;\r\n            let x = [];\r\n            let y = {};\r\n            methodResults.forEach((result, i) => {\r\n                let metrics = result.metrics;\r\n                if (i === 0) {\r\n                    x.push('Theoretical best');\r\n                }\r\n                x.push(result.id + '.' + result.name)\r\n                for (const key in result.metrics) {\r\n                    if (key != 'precision' && key != 'recall') {\r\n                        const metric = metrics[key];\r\n                        if (key in y) {\r\n                            y[key].push(metric);\r\n                        } else {\r\n                            y[key] = [];\r\n                            y[key].push(1);\r\n                            y[key].push(metric);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.metrics = y;\r\n            this.xTicks = x;\r\n        },\r\n        draw() {\r\n            for (const k in this.metrics) {\r\n                chartController.comparison(this.xTicks, this.metrics[k], k, k)\r\n            }\r\n        },\r\n        compareResultsDraw(dataset) {\r\n            let results = [];\r\n            this.compareResults(dataset);\r\n            for (let i = 0; i < this.settings.getMethodResults.length; i++) {\r\n                const res = this.settings.getMethodResults[i];\r\n                let index = results.findIndex(m => m.task === res.modelTask && m.name === res.datasetName)\r\n                if (index == -1) {\r\n                    results.push({ name: res.datasetName, task: res.modelTask })\r\n                }\r\n\r\n            }\r\n            //  results = [...new Set(this.settings.getMethodResults.map(m => m.datasetName))];\r\n\r\n            this.metricsCollection = results;\r\n\r\n            setTimeout(() => {\r\n                this.draw()\r\n            }, 500);\r\n        },\r\n        resize(v) {\r\n            if (v === 0) {\r\n                this.compareResultsDraw()\r\n            }\r\n\r\n            window.dispatchEvent(new Event('resize'));\r\n        },\r\n        deleteResult(id) {\r\n            // eslint-disable-next-line no-unused-vars\r\n            let [tables, plots] = this.settings.getResultVisualizations(id);\r\n            tables.forEach(table => {\r\n                ui.removeTable(table)\r\n            });\r\n            plots.forEach(plot => {\r\n                window.Plotly.purge(plot);\r\n            });\r\n            this.settings.removeResult(id);\r\n\r\n        },\r\n        showMethodDetails(id) {\r\n            alert(id)\r\n\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped></style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./results-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./results-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./results-component.vue?vue&type=template&id=f9c2a36e&scoped=true\"\nimport script from \"./results-component.vue?vue&type=script&lang=js\"\nexport * from \"./results-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f9c2a36e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticStyle:{\"overflow-y\":\"auto\",\"overflow-x\":\"auto\"}},[_c('article',{staticClass:\"message is-info\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"Scatterplot Matrix \"),_c('b-tooltip',{attrs:{\"append-to-body\":\"\",\"label\":\"nrd method and guassian kernel is used for kernel density estimation.\",\"multilined\":\"\"}},[_c('b-button',{attrs:{\"icon-left\":\"info\",\"icon-pack\":\"fas\",\"size\":\"is-small\",\"type\":\"is-dark\"}})],1)],1),_c('div',{staticClass:\"message-body\"},[_c('div',{attrs:{\"id\":\"scatterplot_mtx\"}}),_c('button',{staticClass:\"button is-small\",on:{\"click\":function($event){return _vm.downlaodSPLOM()}}},[_vm._v(\"Download plot\")]),_c('div',{staticClass:\"columns my-1 ml-5 mt-5 is-multiline\",style:({ width: _vm.features.length * 100 + 'px' })},[_vm._l((this.settings.items.filter(column => column.selected)),function(feature){return _c('div',{key:feature.id,style:({ width: _vm.column_width + '%' })},[(feature.type == 1)?_c('b-field',{staticClass:\"ml-1\",attrs:{\"label\":feature.name,\"label-position\":'on-border'}},[_c('b-select',{attrs:{\"size\":\"is-small\"},on:{\"input\":function($event){return _vm.scaleData()}},model:{value:(feature.scaler),callback:function ($$v) {_vm.$set(feature, \"scaler\", $$v)},expression:\"feature.scaler\"}},_vm._l((_vm.ScaleOptions),function(option){return _c('option',{key:option.id,domProps:{\"value\":option.id}},[_vm._v(\" \"+_vm._s(option.name)+\" \")])}),0)],1):_c('p',{staticClass:\"title is-size-7 mt-1\"},[_vm._v(_vm._s(feature.name))])],1)}),_c('br')],2),_c('div',{staticClass:\"column is-12\"},[_c('parallel-coordinate-plot-component',{ref:\"coordinate_plot\"})],1),(this.settings.isClassification)?_c('div',{staticClass:\"column is-12\"},[_c('h5',{staticClass:\"title is-7 has-text-left\"},[_vm._v(\"Merge classes \")]),_c('b-table',{staticClass:\"is-size-7\",attrs:{\"data\":_vm.classesInfo,\"columns\":_vm.classesInfoColumns,\"checkable\":\"\",\"row-class\":(row, index) => row.mode <= 0.10 && 'has-text-danger',\"narrowed\":true,\"checked-rows\":_vm.selectedClasses},on:{\"update:checkedRows\":function($event){_vm.selectedClasses=$event},\"update:checked-rows\":function($event){_vm.selectedClasses=$event}}}),_c('button',{staticClass:\"button mt-2 is-info is-small\",attrs:{\"disabled\":_vm.selectedClasses?.length >= _vm.classesInfo?.length},on:{\"click\":function($event){return _vm.scaleData()}}},[_vm._v(\"Merge Classes\")]),_c('button',{staticClass:\"button mt-2 mx-1 is-success is-small\",on:{\"click\":function($event){return _vm.scaleData(true)}}},[_vm._v(\"reset\")])],1):_vm._e(),_c('b-loading',{attrs:{\"is-full-page\":false},model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}})],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"my-1\"},[_c('article',{staticClass:\"message\"},[_c('div',{staticClass:\"message-header p-2\"},[_vm._v(\"Parallel Coordinate Plot\")]),_c('div',{staticClass:\"message-body\"},[_c('div',{attrs:{\"id\":\"parallel_coordinate_plot\"}})])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n    <section class=\"my-1\">\r\n        <article class=\"message\">\r\n            <div class=\"message-header p-2\">Parallel Coordinate Plot</div>\r\n            <div class=\"message-body\">\r\n                <div id=\"parallel_coordinate_plot\"></div>\r\n            </div>\r\n        </article>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport { settingStore } from '@/stores/settings'\r\nimport { ScaleOptions } from '@/helpers/settings'\r\nimport ChartController from '@/helpers/charts';\r\nlet chartController = new ChartController();\r\nimport { DataFrame } from 'danfojs';\r\nimport { applyDataTransformation } from '@/helpers/utils';\r\n\r\nexport default {\r\n    setup() {\r\n        const settings = settingStore()\r\n        return { settings }\r\n    },\r\n    name: 'ParallelCoordinatePlotComponent',\r\n    props: {\r\n        msg: String,\r\n        update: {}\r\n    },\r\n    data() {\r\n        return {\r\n            isLoading: false,\r\n            ScaleOptions: ScaleOptions,\r\n            features: [],\r\n            df: null,\r\n            rawData: null,\r\n        }\r\n    },\r\n    methods: {\r\n        ParallelCoordinatePlot() {\r\n            this.isLoading = true;\r\n            const df = new DataFrame(this.settings.rawData);\r\n            if (this.settings.isClassification && this.settings.classTransformations.length > 0) {\r\n                this.settings.mergedClasses.forEach((classes) => {\r\n                    let newClass = classes.map(m => m.class).join('_');\r\n                    classes.forEach(cls => {\r\n                        df.replace(cls.class, newClass, { columns: [this.settings.modelTarget], inplace: true })\r\n                    });\r\n                })\r\n            }\r\n\r\n            let validTransformations = this.settings.items.filter(column => column.selected && column.type === 1)\r\n            window.Plotly.purge('parallel_coordinate_plot')\r\n            applyDataTransformation(df, validTransformations.map(transformation => transformation.name), validTransformations);\r\n            let numericColumns = this.settings.items.filter(column => column.selected && column.type === 1).map(column => column.name);\r\n            chartController.parallelCoordinatePlot(df.loc({ columns: numericColumns }).values,\r\n                df.column(this.settings.modelTarget).values, numericColumns, this.settings.isClassification)\r\n            this.isLoading = false;\r\n\r\n        }\r\n\r\n    },\r\n\r\n\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped></style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./parallel-coordinate-plot-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./parallel-coordinate-plot-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./parallel-coordinate-plot-component.vue?vue&type=template&id=25cd8360&scoped=true\"\nimport script from \"./parallel-coordinate-plot-component.vue?vue&type=script&lang=js\"\nexport * from \"./parallel-coordinate-plot-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25cd8360\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <section style=\"overflow-y: auto;overflow-x: auto;\">\r\n        <article class=\"message is-info\">\r\n            <div class=\"message-header p-2\">Scatterplot Matrix <b-tooltip append-to-body\r\n                    label=\"nrd method and guassian kernel is used for kernel density estimation.\" multilined>\r\n                    <b-button icon-left=\"info\" icon-pack=\"fas\" size=\"is-small\" type=\"is-dark\" />\r\n                </b-tooltip></div>\r\n            <div class=\"message-body\">\r\n                <div id=\"scatterplot_mtx\"></div>\r\n                <button class=\"button is-small\" @click=\"downlaodSPLOM()\">Download plot</button>\r\n                <div class=\"columns my-1 ml-5 mt-5 is-multiline\" :style=\"{ width: features.length * 100 + 'px' }\">\r\n                    <div :style=\"{ width: column_width + '%' }\"\r\n                        v-for=\"feature in this.settings.items.filter(column => column.selected)\" :key=\"feature.id\">\r\n                        <b-field :label=\"feature.name\" :label-position=\"'on-border'\" v-if=\"feature.type == 1\"\r\n                            class=\"ml-1\">\r\n                            <b-select @input=\"scaleData()\" size=\"is-small\" v-model=\"feature.scaler\">\r\n                                <option v-for=\"option in ScaleOptions\" :value=\"option.id\" :key=\"option.id\">\r\n                                    {{ option.name }}\r\n                                </option>\r\n                            </b-select>\r\n                        </b-field>\r\n                        <p class=\"title is-size-7 mt-1\" v-else>{{ feature.name }}</p>\r\n                    </div>\r\n                    <br>\r\n                </div>\r\n                <div class=\"column is-12\">\r\n                    <parallel-coordinate-plot-component ref=\"coordinate_plot\">\r\n                    </parallel-coordinate-plot-component>\r\n                </div>\r\n                <div class=\"column is-12\" v-if=\"this.settings.isClassification\">\r\n                    <h5 class=\"title is-7 has-text-left\">Merge classes\r\n                    </h5>\r\n                    <b-table class=\"is-size-7\" :data=\"classesInfo\" :columns=\"classesInfoColumns\" checkable\r\n                        :row-class=\"(row, index) => row.mode <= 0.10 && 'has-text-danger'\" :narrowed=\"true\"\r\n                        :checked-rows.sync=\"selectedClasses\"></b-table>\r\n                    <button @click=\"scaleData()\" class=\"button mt-2 is-info is-small\"\r\n                        :disabled=\"selectedClasses?.length >= classesInfo?.length\">Merge\r\n                        Classes</button>\r\n                    <button @click=\"scaleData(true)\" class=\"button mt-2 mx-1 is-success is-small\">reset</button>\r\n                </div>\r\n                <b-loading :is-full-page=\"false\" v-model=\"isLoading\"></b-loading>\r\n            </div>\r\n        </article>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\nimport ChartController from '@/helpers/charts';\r\nimport { settingStore } from '@/stores/settings'\r\nimport { ScaleOptions } from '@/helpers/settings'\r\nimport { applyDataTransformation } from '@/helpers/utils';\r\nimport { DataFrame } from 'danfojs';\r\nimport PCPComponent from '../visualization/parallel-coordinate-plot-component.vue'\r\n\r\nlet chartController = new ChartController();\r\nexport default {\r\n    components: {\r\n        'parallel-coordinate-plot-component': PCPComponent,\r\n    },\r\n    setup() {\r\n        const settings = settingStore()\r\n        return { settings }\r\n    },\r\n    name: 'ScatterplotMatrixComponent',\r\n    props: {\r\n        msg: String,\r\n        update: {}\r\n    },\r\n    data() {\r\n        return {\r\n            isLoading: false,\r\n            ScaleOptions: ScaleOptions,\r\n            features: [],\r\n            df: null,\r\n            rawData: null,\r\n            classesInfo: [],\r\n            selectedClasses: [],\r\n            classesInfoColumns: [],\r\n        }\r\n    },\r\n    methods: {\r\n        downlaodSPLOM() {\r\n            chartController.downloadPlot('scatterplot_mtx')\r\n        },\r\n        updateClassesInfo() {\r\n            this.df = new DataFrame(this.settings.rawData);\r\n            this.settings.mergedClasses.forEach((classes) => {\r\n                let newClass = classes.map(m => m.class).join('_');\r\n                classes.forEach(cls => {\r\n                    this.df.replace(cls.class, newClass, { columns: [this.settings.modelTarget], inplace: true })\r\n                });\r\n            })\r\n            let targetValues = this.df.column(this.settings.modelTarget).values;\r\n            let samplesLength = targetValues.length;\r\n            let classes = new Set(...[targetValues]);\r\n            let result = []\r\n            classes.forEach(cls => {\r\n                result.push({\r\n                    class: cls,\r\n                    mode: +(targetValues.filter(val => val === cls).length / samplesLength).toFixed(2)\r\n                })\r\n            });\r\n            this.classesInfo = result.concat();\r\n            this.classesInfoColumns = [{\r\n                field: 'class',\r\n                label: ' class'\r\n            }, {\r\n                field: 'mode',\r\n                label: 'Samples in each class (%)'\r\n            }]\r\n        },\r\n        async dispalySPLOM(dataframe) {\r\n            try {\r\n                this.isLoading = true;\r\n                let numericColumns = this.settings.items.filter(column => column.selected && column.type === 1).map(column => column.name);\r\n                let categorical_columns = this.settings.items.filter(column => column.selected && column.type !== 1).map(column => column.name);\r\n                let features = numericColumns.concat(categorical_columns);\r\n                dataframe.dropNa({ axis: 1, inplace: true })\r\n                console.log(new Set(dataframe.column(this.settings.modelTarget).values));\r\n\r\n                await chartController.ScatterplotMatrix(dataframe.loc({ columns: features }).values, features, dataframe.column(this.settings.modelTarget).values, categorical_columns.length,\r\n                    this.settings.isClassification, numericColumns, categorical_columns, this.dataframe)\r\n                if (this.settings.isClassification) {\r\n                    this.updateClassesInfo();\r\n                }\r\n                this.$refs.coordinate_plot?.ParallelCoordinatePlot()\r\n                this.isLoading = false;\r\n\r\n            } catch (error) {\r\n                let message = 'Something went wrong drawing data analysis plots'\r\n                this.$buefy.toast.open(message);\r\n                this.settings.addMessage({ message: message, type: 'warning' })\r\n            }\r\n        },\r\n        async scaleData(reset = false) {\r\n            this.df = new DataFrame(this.settings.rawData);\r\n            if (reset) {\r\n                this.settings.resetClassTransformations([]);\r\n                this.updateClassesInfo();\r\n                console.log(this.settings.mergedClasses);\r\n\r\n            }\r\n            if (this.settings.isClassification && this.selectedClasses?.length > 0) {\r\n                let newClass = this.selectedClasses.map(m => m.class).join('_');\r\n                this.selectedClasses.forEach(cls => {\r\n                    this.df.replace(cls.class, newClass, { columns: [this.settings.modelTarget], inplace: true })\r\n                });\r\n                this.settings.setClassTransformation(this.selectedClasses)\r\n                let message = { message: 'merged classes: ' + newClass, type: 'info' }\r\n                this.$buefy.toast.open('merged classes: ' + newClass)\r\n                this.settings.addMessage(message)\r\n            }\r\n\r\n\r\n            let validTransformations = this.settings.items.filter(feature => feature.selected && feature.type === 1 && feature.scaler != 0)\r\n            this.isLoading = true;\r\n            window.Plotly.purge('scatterplot_mtx')\r\n            this.updateClassesInfo()\r\n            applyDataTransformation(this.df, validTransformations.map(transformation => transformation.name), validTransformations);\r\n            await this.dispalySPLOM(this.df)\r\n            this.isLoading = false;\r\n            this.selectedClasses = []\r\n\r\n            if (validTransformations.length > 0) {\r\n                let transformations = []\r\n                validTransformations.forEach(transformation => {\r\n                    let transformationInfo = Object.keys(ScaleOptions).find(key => ScaleOptions[key].id == transformation.scaler);\r\n                    transformation.scalerLabel = transformationInfo\r\n                    this.settings.addTransformation(transformation)\r\n                    transformations.push(`feature: ${transformation['name']} ,scaler: ${transformation['scalerLabel']} `)\r\n                });\r\n\r\n                let message = { message: 'scaled fetures: <br> ' + transformations.join('_'), type: 'info' }\r\n                this.$buefy.toast.open('scaled fetures: ' + transformations)\r\n                this.settings.addMessage(message)\r\n            } else {\r\n                this.settings.resetTransformations();\r\n            }\r\n\r\n            this.$emit('coordinate-plot', true)\r\n        },\r\n        async initSPLOM() {\r\n            this.df = new DataFrame(this.settings.rawData);\r\n            this.df = await this.df.sample(this.df.$data.length, { seed: this.settings.getSeed });\r\n            this.df.dropNa({ axis: 1, inplace: true })\r\n            let numericColumns = this.settings.items.filter(column => column.selected && column.type === 1).map(function (column) {\r\n                return { 'name': column.name, type: column.type }\r\n            });\r\n            let categorical_columns = this.settings.items.filter(column => column.selected && column.type !== 1).map(function (column) {\r\n                return { 'name': column.name, type: column.type }\r\n            })\r\n            let features = numericColumns.concat(categorical_columns);\r\n            this.features = features.map((feature, i) => {\r\n                return {\r\n                    id: i,\r\n                    name: feature.name,\r\n                    type: feature.type,\r\n                    scaler: 0\r\n                }\r\n            })\r\n            this.dispalySPLOM(this.df)\r\n\r\n        }\r\n    },\r\n    created: async function () {\r\n        await this.initSPLOM()\r\n    },\r\n    computed: {\r\n        column_width: {\r\n            get() {\r\n                return this.features.length === 0 ? 0 : 100 / this.features.length\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped></style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./scatterplot-matrix-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./scatterplot-matrix-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./scatterplot-matrix-component.vue?vue&type=template&id=451827f8&scoped=true\"\nimport script from \"./scatterplot-matrix-component.vue?vue&type=script&lang=js\"\nexport * from \"./scatterplot-matrix-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"451827f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"has-text-left content\"},[_c('h4',{staticClass:\"title is-medium is-5\",attrs:{\"id\":\"help\"}},[_vm._v(\"Classification metrics \")]),_c('p',[_vm._v(\" In a context of a binary classification, here are the main metrics that are important to track in order to assess the performance of the model. \")]),_vm._m(0),_c('h4',{staticClass:\"title is-medium is-5\"},[_vm._v(\"Regression metrics \")]),_c('ul',[_c('li',[_vm._v(\" Basic metricsGiven a regression model \"),_c('i',[_vm._v(\"f\")]),_vm._v(\", the following metrics are commonly used to assess the performance of the model: \"),_c('table',{staticClass:\"table is-bordered\"},[_vm._m(1),_c('tbody',[_c('tr',[_c('td',[_c('vue-mathjax',{attrs:{\"formula\":'$$ SS_{tot}= \\\\sum_{i=1}^{m} (y_i - \\\\hat{y}_i)^2$$'}})],1),_c('td',[_c('vue-mathjax',{attrs:{\"formula\":'$$ SS_{reg}= \\\\sum_{i=1}^{m} (f (x_i) - \\\\hat{y}_i)^2$$'}})],1),_c('td',[_c('vue-mathjax',{attrs:{\"formula\":'$$ SS_{res}= \\\\sum_{i=1}^{m} (y_i - f (x_i))^2$$'}})],1)])])])]),_c('li',[_vm._v(\" Coefficient of determination: The coefficient of determination, often noted \"),_c('i',[_vm._v(\"R\")]),_c('sup',[_vm._v(\"2\")]),_vm._v(\" , provides a measure of how well the observed outcomes are replicated by the model and is defined as follows: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ R^2 = 1 - \\\\frac{SS_{res}}{SS_{tot}}$$'}})],1),_c('li',[_vm._v(\" Main metrics: The following metrics are commonly used to assess the performance of regression models, by taking into account the number of variables n that they take into consideration: \"),_c('table',{staticClass:\"table is-bordered\"},[_vm._m(2),_c('tbody',[_c('tr',[_c('td',[_c('vue-mathjax',{attrs:{\"formula\":'$$ 2[n + 2 - \\\\log (L)]$$'}})],1),_c('td',[_c('vue-mathjax',{attrs:{\"formula\":'$$ \\\\log (m)(n + 2) - 2 \\\\log (L)$$'}})],1),_c('td',[_c('vue-mathjax',{attrs:{\"formula\":'$$ 1 - \\\\frac{(1-R^2)(m-1)}{m-n-1}$$'}})],1)])])])])]),_c('h4',{staticClass:\"title is-medium is-5\",attrs:{\"id\":\"1_help\"}},[_vm._v(\"Model Selection \")]),_c('h5',[_vm._v(\" When selecting a model, we distinguish 3 different parts of the data that we have as follows: \")]),_vm._m(3),_c('p',[_vm._v(\" Once the model has been chosen, it is trained on the entire dataset and tested on the unseen test set. These are represented in the figure below:\")]),_c('p',[_vm._v(\" Cross-validation, also noted CV, is a method that is used to select a model that does not rely too much on the initial training set. The different types are summed up in the table below: \")]),_vm._m(4),_vm._m(5),_c('p',[_vm._v(\" regularization: The regularization procedure aims at avoiding the model to overfit the data and thus deals with high variance issues. The following table sums up the different types of commonly used regularization techniques: \")]),_c('h4',{staticClass:\"title is-medium is-5\"},[_vm._v(\"Supervised Learning \")]),_vm._m(6),_c('h4',{staticClass:\"title is-medium is-5\",attrs:{\"id\":\"svm_help\"}},[_vm._v(\"Support Vector Machine\")]),_c('p',[_vm._v(\" The goal of support vector machines is to find the line that maximizes the minimum distance to the line. \")]),_vm._v(\" Optimal margin classifier: The optimal margin classifier (h) is such that: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ h(x) = sign(w^T x - b) $$'}}),_vm._v(\" where (w,b \\\\in R^2) is the solution of the following optimization problem: \"),_c('img',{attrs:{\"src\":\"/svm-en.png\",\"height\":\"150px\",\"width\":\"70%\"}}),_c('h4',{staticClass:\"title is-medium is-5\",attrs:{\"id\":\"naive_bayes_help\"}},[_vm._v(\"Naive Bayes\")]),_c('ul',[_c('li',[_vm._v(\" Assumption: The Naive Bayes model supposes that the features of each data point are all independent: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ P(x | y) = P(x_1,x_2,...|y) = P(x_1 |y )  P(x_2 |y ) $$'}})],1)]),_c('h4',{staticClass:\"title is-medium\",attrs:{\"id\":\"linear_regression_help\"}},[_vm._v(\"Linear Regression\")]),_c('p',[_vm._v(\" Linear regression is a statistical method used to predict a continuous numeric value based on one or more input features. It assumes a linear relationship between the inputs (independent variables) and the output (dependent variable). The model fits a straight line through the data by minimizing the difference between predicted and actual values, often using a method called least squares. The equation of a linear regression model looks like: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ y = \\\\beta_0 x_0+  \\\\beta_1 x_1 + \\\\beta_2 x_2+ ...+\\\\beta_n x_n+ intercept $$'}}),_vm._v(\" Here, y is the predicted value,(x_i) are the input features, and(_i) are the learned coefficients. Linear regression is commonly used in scenarios like predicting house prices, exam scores, or sales revenue. It is evaluated using metrics such as Mean Squared Error (MSE) and R score, and assumes things like normally distributed errors and consistent variance across predictions. \")],1),_c('h4',{staticClass:\"title is-medium\",attrs:{\"id\":\"logistic_regression_help\"}},[_vm._v(\"Logistic Regression\")]),_c('p',[_vm._v(\" Logistic Regression is used when the output is categorical, especially for binary classification (e.g., yes/no, 0/1). Instead of predicting a continuous value, it predicts the probability that an input belongs to a certain class. To do this, it uses the sigmoid function, which squashes any real number output into a range between 0 and 1: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ y= \\\\frac{1}{1 + e^{-z}} $$'}}),_vm._v(\" where z is the linear combination of inputs (same as in linear regression). If the resulting probability is greater than 0.5, the output is classified as 1; otherwise, it's classified as 0. If the probability is above a certain threshold (usually 0.5), the model classifies the input as one class; otherwise, it classifies it as the other. The output of the model represents the log-odds of the outcome, and logistic regression is evaluated using classification metrics like accuracy, precision, recall, F1 score, and ROC-AUC. Though it shares structural similarity with linear regression, its purpose and behavior are quite different. \")],1),_c('h4',{staticClass:\"title is-medium\",attrs:{\"id\":\"polynomial_regression_help\"}},[_vm._v(\"Polynomial Regression\")]),_c('p',[_vm._v(\" Polynomial regression is an extension of linear regression that models the relationship between the input variable  x and the output variable  y as an nth-degree polynomial. While linear regression fits a straight line, polynomial regression fits a curved line, which allows it to capture more complex, non-linear patterns in the data. The general form of the equation is: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ y = \\\\beta_0 +  \\\\beta_1 x + \\\\beta_2 x^2+ ...+\\\\beta_n x^n $$'}}),_vm._v(\" Here, the model includes powers of the input variable (like ^2, ^3, etc.) as additional features. For example, a second-degree polynomial (quadratic regression) can model U-shaped or inverted U-shaped curves. Polynomial regression is still considered a linear model in terms of the coefficients, but it allows for non-linear relationships between x and y. It can be very effective for modeling curved trends, but if the degree of the polynomial is too high, it can lead to overfitting, where the model fits the training data too closely and performs poorly on new data. \")],1),_c('h4',{staticClass:\"title is-medium is-5\",attrs:{\"id\":\"cart_help\"}},[_vm._v(\"Tree-based and ensemble methods\")]),_c('p',[_vm._v(\" These methods can be used for both regression and classification problems. \")]),_vm._m(7),_c('h4',{staticClass:\"title is-medium\",attrs:{\"id\":\"knn_help\"}},[_vm._v(\"(k)-nearest neighbors\")]),_c('p',[_vm._v(\" (k)-nearest neighbors: The (k)-nearest neighbors algorithm, commonly known as (k)-NN, is a non-parametric approach where the response of a data point is determined by the nature of its (k) neighbors from the training set. It can be used in both classification and regression settings. \")]),_c('img',{staticClass:\"image\",attrs:{\"src\":\"/knn.png\"}}),_c('h4',{staticClass:\"title is-medium\",attrs:{\"id\":\"discriminant_analysis_help\"}},[_vm._v(\" Gaussian Discriminant Anallysis \")]),_c('p',[_vm._v(\" Gaussian Discriminant Analysis SettingThe Gaussian Discriminant Analysis assumes that (y) and (x  y = 0) and (x|y = 1) are such that: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ y \\\\sim Bernoulli(\\\\phi)   ,   x|y = 0 \\\\sim \\\\mathcal{N(\\\\mu_0,\\\\Sigma)}$$'}})],1),_c('h4',[_vm._v(\"Partial Dependence Plot\")]),_c('p',[_vm._v(\" The partial dependence plot (short PDP or PD plot) shows the marginal effect one or two features have on the predicted outcome of a machine learning model. A partial dependence plot can show whether the relationship between the target and a feature is linear, monotonic or more complex. For example, when applied to a linear regression model, partial dependence plots always show a linear relationship. The partial dependence function for regression is defined as: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ f_s(x_s) = \\\\int{f(x_s,x_c)dP(x_c)}$$'}}),_vm._v(\" The x\"),_c('sub',[_vm._v(\"s\")]),_vm._v(\" are the features for which the partial dependence function should be plotted and X\"),_c('sub',[_vm._v(\"c\")]),_vm._v(\" are the other features used in the machine learning model ^ f , which are here treated as random variables. Usually, there are only one or two features in the set S. The feature(s) in S are those for which we want to know the effect on the prediction. The feature vectors X\"),_c('sub',[_vm._v(\"s\")]),_vm._v(\" and X\"),_c('sub',[_vm._v(\"c\")]),_vm._v(\" combined make up the total feature space x. Partial dependence works by marginalizing the machine learning model output over the distribution of the features in set C, so that the function shows the relationship between the features in set S we are interested in and the predicted outcome. By marginalizing over the other features, we get a function that depends only on features in S, interactions with other features included. The partial function ^ f S is estimated by calculating averages in the training data, also known as Monte Carlo method: \"),_c('vue-mathjax',{attrs:{\"formula\":'$$ f_s(x_s) = \\\\frac{1}{n} \\\\sum_{n = 1}^{n} f(x_s,x_c)$$'}}),_vm._v(\" The partial function tells us for given value(s) of features S what the average marginal effect on the prediction is. In this formula, x ( i ) C are actual feature values from the dataset for the features in which we are not interested, and n is the number of instances in the dataset. An assumption of the PDP is that the features in C are not correlated with the features in S. If this assumption is violated, the averages calculated for the partial dependence plot will include data points that are very unlikely or even impossible (see disadvantages). For classification where the machine learning model outputs probabilities, the partial dependence plot displays the probability for a certain class given different values for feature(s) in S. An easy way to deal with multiple classes is to draw one line or plot per class. The partial dependence plot is a global method: The method considers all instances and gives a statement about the global relationship of a feature with the predicted outcome. \")],1),_c('h4',[_vm._v(\"Categorical features\")]),_c('p',[_vm._v(\" So far, we have only considered numerical features. For categorical features, the partial dependence is very easy to calculate. For each of the categories, we get a PDP estimate by forcing all data instances to have the same category. For example, if we look at the bike rental dataset and are interested in the partial dependence plot for the season, we get four numbers, one for each season. To compute the value for summer, we replace the season of all data instances with summer and average the predictions. \")]),_c('h4',[_vm._v(\"Permutation Feature Importance\")]),_c('p',[_vm._v(\" Permutation feature importance is a powerful and intuitive method used to evaluate the impact of each feature on a machine learning models performance. After a model has been trained, this technique works by randomly shuffling the values of one feature at a time in the validation or test dataset. By doing so, the relationship between that feature and the target variable is disrupted, while all other features remain unchanged. The model is then used to make predictions on this altered dataset, and the drop in performance (measured by accuracy, F1 score, RMSE, or any other metric) is recorded. A large drop indicates that the feature was important to the models predictions, while a small or no change suggests that the feature had little influence. This method is model-agnostic, meaning it can be used with any type of machine learning algorithm, from decision trees to neural networks. However, one limitation is that it can be misleading when features are highly correlated, as the importance may be shared among multiple features, making individual effects harder to isolate. \")])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\" Confusion matrix: The confusion matrix is used to have a more complete picture when assessing the performance of a model. It is defined as follows: \")]),_c('li',[_vm._v(\" Main metrics: The following metrics are commonly used to assess the performance of classification models: \")]),_c('li',[_vm._v(\" The receiver operating curve, also noted ROC, is the plot of TPR versus FPR by varying the threshold. These metrics are are summed up in the table below: \")]),_c('li',[_vm._v(\" The area under the receiving operating curve, also noted AUC or AUROC, is the area below the ROC as shown in the following figure: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"},[_vm._v(\"Total sum of squares\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Explained sum of squares \")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Residual sum of squares \")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"},[_vm._v(\"AIC\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"BIC\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Adjusted R2 \")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('table',{staticClass:\"table is-bordered\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"},[_vm._v(\"Training set\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Validation set \")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Testing set \")])])]),_c('tbody',[_c('tr',[_c('td',[_c('ul',[_c('li',[_vm._v(\" Model is trained\")]),_c('li',[_vm._v(\" Usually 80% of the dataset\")])])]),_c('td',[_c('ul',[_c('li',[_vm._v(\"Model is assessed\")]),_c('li',[_vm._v(\"Usually 20% of the dataset\")]),_c('li',[_vm._v(\"Also called hold-out or development set\")])])]),_c('td',[_c('ul',[_c('li',[_vm._v(\" Model gives predictions\")]),_c('li',[_vm._v(\"Unseen data\")])])])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('table',{staticClass:\"table is-bordered\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"},[_vm._v(\"k-fold\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Leave-p-out\")])])]),_c('tbody',[_c('tr',[_c('td',[_c('ul',[_c('li',[_vm._v(\" Model is trained\")]),_c('li',[_vm._v(\" Usually 80% of the dataset\")])])]),_c('td',[_c('ul',[_c('li',[_vm._v(\"Model is assessed\")]),_c('li',[_vm._v(\"Usually 20% of the dataset\")]),_c('li',[_vm._v(\"Also called hold-out or development set\")])])])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\" The most commonly used method is called k-fold cross-validation and splits the training data into k folds to validate the model on one fold while training the model on the k1 other folds, all of this k times. The error is then averaged over the k folds and is named cross-validation error. \"),_c('img',{staticClass:\"image\",attrs:{\"src\":\"/cross-validation-en.png\",\"alt\":\"\"}})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"Type of prediction: The different types of predictive models are summed up in the table below: \"),_c('table',{staticClass:\"table is-bordered\"},[_c('thead',[_c('tr',[_c('th',{staticClass:\"is-success\"}),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Regression\")]),_c('th',{staticClass:\"is-success\"},[_vm._v(\"Classification\")])])]),_c('tbody',[_c('tr',[_c('td',[_vm._v(\"Outcome\")]),_c('td',[_vm._v(\"Continuous\")]),_c('td',[_vm._v(\"Class\")])]),_c('tr',[_c('td',[_vm._v(\"Examples\")]),_c('td',[_vm._v(\"Linear regression \")]),_c('td',[_vm._v(\"Logistic regression, SVM, Naive Bayes \")])])])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\" Classification and Regression Trees (CART), commonly known as decision trees, can be represented as binary trees. They have the advantage to be very interpretable. \")]),_c('li',[_vm._v(\" Random forestIt is a tree-based technique that uses a high number of decision trees built out of randomly selected sets of features. Contrary to the simple decision tree, it is highly uninterpretable but its generally good performance makes it a popular algorithm. \")]),_c('li',[_vm._v(\" BoostingThe idea of boosting methods is to combine several weak learners to form a stronger one. The main ones are summed up in the table below: \")]),_c('li',[_vm._v(\" Adaptive boosting Gradient boosting  High weights are put on errors to improve at the next boosting step  Known as Adaboost  Weak learners are trained on residuals  Examples include XGBoost \")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n\r\n    <section class=\"has-text-left content\">\r\n        <h4 class=\"title is-medium is-5\" id=\"help\">Classification metrics\r\n        </h4>\r\n        <p>\r\n            In a context of a binary classification, here are the main metrics that are important to track in order to\r\n            assess the performance of the model.\r\n        </p>\r\n        <ul>\r\n            <li>\r\n                Confusion matrix: The confusion matrix is used to have a more complete picture when assessing the\r\n                performance of a model. It is defined as follows:\r\n            </li>\r\n            <li>\r\n                Main metrics: The following metrics are commonly used to assess the performance of classification\r\n                models:\r\n            </li>\r\n            <li>\r\n                The receiver operating curve, also noted ROC, is the plot of TPR versus FPR by varying the threshold.\r\n                These metrics are are summed up in the table below:\r\n            </li>\r\n            <li>\r\n                The area under the receiving operating curve, also noted AUC or AUROC, is the area below the ROC as\r\n                shown in the following figure:\r\n            </li>\r\n        </ul>\r\n        <h4 class=\"title is-medium is-5\">Regression metrics\r\n        </h4>\r\n        <ul>\r\n            <li>\r\n                Basic metricsGiven a regression model <i>f</i>, the following metrics are commonly used to assess the\r\n                performance of the model:\r\n                <table class=\"table is-bordered\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th class=\"is-success\">Total sum of squares</th>\r\n                            <th class=\"is-success\">Explained sum of squares </th>\r\n                            <th class=\"is-success\">Residual sum of squares </th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <vue-mathjax\r\n                                    :formula=\"'$$ SS_{tot}= \\\\sum_{i=1}^{m} (y_i - \\\\hat{y}_i)^2$$'\"></vue-mathjax>\r\n                            </td>\r\n                            <td> <vue-mathjax\r\n                                    :formula=\"'$$ SS_{reg}= \\\\sum_{i=1}^{m} (f (x_i) - \\\\hat{y}_i)^2$$'\"></vue-mathjax>\r\n                            </td>\r\n                            <td> <vue-mathjax\r\n                                    :formula=\"'$$ SS_{res}= \\\\sum_{i=1}^{m} (y_i - f (x_i))^2$$'\"></vue-mathjax></td>\r\n\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </li>\r\n            <li>\r\n                Coefficient of determination: The coefficient of determination, often noted\r\n                <i>R</i><sup>2</sup>\r\n                , provides a measure of how well the observed outcomes are replicated by the model and is defined as\r\n                follows:\r\n                <vue-mathjax :formula=\"'$$ R^2 = 1 - \\\\frac{SS_{res}}{SS_{tot}}$$'\"></vue-mathjax>\r\n            </li>\r\n            <li>\r\n                Main metrics: The following metrics are commonly used to assess the performance of regression models, by\r\n                taking into account the number of variables\r\n                n that they take into consideration:\r\n                <table class=\"table is-bordered\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th class=\"is-success\">AIC</th>\r\n                            <th class=\"is-success\">BIC</th>\r\n                            <th class=\"is-success\">Adjusted R2 </th>\r\n\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <vue-mathjax :formula=\"'$$ 2[n + 2 - \\\\log (L)]$$'\"></vue-mathjax>\r\n                            </td>\r\n                            <td> <vue-mathjax :formula=\"'$$ \\\\log (m)(n + 2) - 2 \\\\log (L)$$'\"></vue-mathjax>\r\n                            </td>\r\n                            <td> <vue-mathjax :formula=\"'$$ 1 - \\\\frac{(1-R^2)(m-1)}{m-n-1}$$'\"></vue-mathjax></td>\r\n\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </li>\r\n        </ul>\r\n        <h4 class=\"title is-medium is-5\" id=\"1_help\">Model Selection\r\n        </h4>\r\n        <h5>\r\n            When selecting a model, we distinguish 3 different parts of the data that we have as follows:\r\n        </h5>\r\n        <table class=\"table is-bordered\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"is-success\">Training set</th>\r\n                    <th class=\"is-success\">Validation set </th>\r\n                    <th class=\"is-success\">Testing set\r\n                    </th>\r\n\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                        <ul>\r\n                            <li> Model is trained</li>\r\n                            <li> Usually 80% of the dataset</li>\r\n                        </ul>\r\n                    </td>\r\n                    <td>\r\n                        <ul>\r\n                            <li>Model is assessed</li>\r\n                            <li>Usually 20% of the dataset</li>\r\n                            <li>Also called hold-out or development set</li>\r\n                        </ul>\r\n                    </td>\r\n                    <td>\r\n                        <ul>\r\n                            <li> Model gives predictions</li>\r\n                            <li>Unseen data</li>\r\n                        </ul>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <p> Once the model has been chosen, it is trained on the entire dataset and tested on the unseen test set.\r\n            These\r\n            are represented in the figure below:</p>\r\n        <p>\r\n            Cross-validation, also noted CV, is a method that is used to select a model that does not rely too much on\r\n            the initial training set. The different types are summed up in the table below:\r\n        </p>\r\n        <table class=\"table is-bordered\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"is-success\">k-fold</th>\r\n                    <th class=\"is-success\">Leave-p-out</th>\r\n\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                        <ul>\r\n                            <li> Model is trained</li>\r\n                            <li> Usually 80% of the dataset</li>\r\n                        </ul>\r\n                    </td>\r\n                    <td>\r\n                        <ul>\r\n                            <li>Model is assessed</li>\r\n                            <li>Usually 20% of the dataset</li>\r\n                            <li>Also called hold-out or development set</li>\r\n                        </ul>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <p>\r\n            The most commonly used method is called\r\n            k-fold cross-validation and splits the training data into\r\n            k folds to validate the model on one fold while training the model on the k1 other folds, all of this\r\n            k times. The error is then averaged over the k folds and is named cross-validation error.\r\n            <img class=\"image\" src=\"/cross-validation-en.png\" alt=\"\">\r\n        </p>\r\n        <p>\r\n            regularization: The regularization procedure aims at avoiding the model to overfit the data and thus deals\r\n            with high\r\n            variance issues. The following table sums up the different types of commonly used regularization techniques:\r\n        </p>\r\n        <h4 class=\"title is-medium is-5\">Supervised Learning\r\n        </h4>\r\n        <ul>\r\n            <li>Type of prediction: The different types of predictive models are summed up in the table below:\r\n\r\n                <table class=\"table is-bordered\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th class=\"is-success\"></th>\r\n                            <th class=\"is-success\">Regression</th>\r\n                            <th class=\"is-success\">Classification</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>Outcome</td>\r\n                            <td>Continuous</td>\r\n                            <td>Class</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>Examples</td>\r\n                            <td>Linear regression </td>\r\n                            <td>Logistic regression, SVM, Naive Bayes\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </li>\r\n        </ul>\r\n        <h4 class=\"title is-medium is-5\" id=\"svm_help\">Support Vector Machine</h4>\r\n        <p>\r\n            The goal of support vector machines is to find the line that maximizes the minimum distance to the line.\r\n        </p>\r\n        Optimal margin classifier: The optimal margin classifier (h) is such that:\r\n        <vue-mathjax :formula=\"'$$ h(x) = sign(w^T x - b) $$'\"></vue-mathjax>\r\n        where (w,b \\in R^2) is the solution of the following optimization problem:\r\n        <img src=\"/svm-en.png\" height=\"150px\" width=\"70%\">\r\n\r\n        <h4 class=\"title is-medium is-5\" id=\"naive_bayes_help\">Naive Bayes</h4>\r\n        <ul>\r\n            <li>\r\n                Assumption: The Naive Bayes model supposes that the features of each data point are all independent:\r\n                <vue-mathjax :formula=\"'$$ P(x | y) = P(x_1,x_2,...|y) = P(x_1 |y )  P(x_2 |y ) $$'\"></vue-mathjax>\r\n\r\n            </li>\r\n        </ul>\r\n        <h4 class=\"title is-medium\" id=\"linear_regression_help\">Linear Regression</h4>\r\n        <p>\r\n            Linear regression is a statistical method used to predict a continuous numeric value based on one or more\r\n            input features. It assumes a linear relationship between the inputs (independent variables) and the output\r\n            (dependent variable). The model fits a straight line through the data by minimizing the difference between\r\n            predicted and actual values, often using a method called least squares. The equation of a linear regression\r\n            model looks like:\r\n            <vue-mathjax\r\n                :formula=\"'$$ y = \\\\beta_0 x_0+  \\\\beta_1 x_1 + \\\\beta_2 x_2+ ...+\\\\beta_n x_n+ intercept $$'\"></vue-mathjax>\r\n\r\n            Here, y is the predicted value,(x_i)\r\n            are the input features, and(_i)\r\n            are the learned coefficients. Linear regression is commonly used in scenarios like predicting house prices,\r\n            exam scores, or sales revenue. It is evaluated using metrics such as Mean Squared Error (MSE) and R score,\r\n            and assumes things like normally distributed errors and consistent variance across predictions.\r\n        </p>\r\n        <h4 class=\"title is-medium\" id=\"logistic_regression_help\">Logistic Regression</h4>\r\n        <p>\r\n            Logistic Regression is used when the output is categorical, especially for binary classification (e.g.,\r\n            yes/no, 0/1). Instead of predicting a continuous value, it predicts the probability that an input belongs to\r\n            a certain class. To do this, it uses the sigmoid function, which squashes any real number output into a\r\n            range between 0 and 1:\r\n            <vue-mathjax :formula=\"'$$ y= \\\\frac{1}{1 + e^{-z}} $$'\"></vue-mathjax>\r\n            where\r\n            z is the linear combination of inputs (same as in linear regression). If the resulting probability is\r\n            greater than 0.5, the output is classified as 1; otherwise, it's classified as 0.\r\n            If the probability is above a certain threshold (usually 0.5), the model classifies the input as one class;\r\n            otherwise, it classifies it as the other. The output of the model represents the log-odds of the outcome,\r\n            and logistic regression is evaluated using classification metrics like accuracy, precision, recall, F1\r\n            score, and ROC-AUC. Though it shares structural similarity with linear regression, its purpose and behavior\r\n            are quite different.\r\n        </p>\r\n        <h4 class=\"title is-medium\" id=\"polynomial_regression_help\">Polynomial Regression</h4>\r\n        <p>\r\n            Polynomial regression is an extension of linear regression that models the relationship between the input\r\n            variable\r\n            \r\n            x and the output variable\r\n            \r\n            y as an nth-degree polynomial. While linear regression fits a straight line, polynomial regression fits a\r\n            curved line, which allows it to capture more complex, non-linear patterns in the data. The general form of\r\n            the equation is:\r\n            <vue-mathjax :formula=\"'$$ y = \\\\beta_0 +  \\\\beta_1 x + \\\\beta_2 x^2+ ...+\\\\beta_n x^n $$'\"></vue-mathjax>\r\n            Here, the model includes powers of the input variable (like\r\n            ^2, ^3, etc.) as additional features. For example, a second-degree polynomial (quadratic regression) can\r\n            model\r\n            U-shaped or inverted U-shaped curves. Polynomial regression is still considered a linear model in terms of\r\n            the coefficients, but it allows for non-linear relationships between x and y. It can be very effective for\r\n            modeling curved trends, but if the degree of the polynomial is too high, it\r\n            can lead to overfitting, where the model fits the training data too closely and performs poorly on new data.\r\n        </p>\r\n\r\n        <h4 class=\"title is-medium is-5\" id=\"cart_help\">Tree-based and ensemble methods</h4>\r\n        <p> These methods can be used for both regression and classification problems.\r\n        </p>\r\n        <ul>\r\n            <li>\r\n                Classification and Regression Trees (CART), commonly known as decision trees, can be represented as\r\n                binary\r\n                trees. They have the advantage to be very interpretable.\r\n            </li>\r\n            <li>\r\n                Random forestIt is a tree-based technique that uses a high number of decision trees built out of\r\n                randomly\r\n                selected\r\n                sets of features. Contrary to the simple decision tree, it is highly uninterpretable but its generally\r\n                good\r\n                performance makes it a popular algorithm.\r\n            </li>\r\n            <li>\r\n\r\n                BoostingThe idea of boosting methods is to combine several weak learners to form a stronger one. The\r\n                main\r\n                ones are\r\n                summed up in the table below:\r\n            </li>\r\n            <li> Adaptive boosting Gradient boosting\r\n                 High weights are put on errors to improve at the next boosting step\r\n                 Known as Adaboost \r\n                Weak learners are trained on residuals\r\n                 Examples include XGBoost\r\n            </li>\r\n        </ul>\r\n        <h4 class=\"title is-medium\" id=\"knn_help\">(k)-nearest neighbors</h4>\r\n        <p>\r\n            (k)-nearest neighbors: The\r\n            (k)-nearest neighbors algorithm, commonly known as\r\n            (k)-NN, is a non-parametric approach where the response of a data point is determined by the nature of its\r\n            (k) neighbors from the training set. It can be used in both classification and regression settings.\r\n        </p>\r\n        <img src=\"/knn.png\" class=\"image\">\r\n\r\n\r\n        <h4 class=\"title is-medium\" id=\"discriminant_analysis_help\"> Gaussian Discriminant Anallysis </h4>\r\n        <p>\r\n            Gaussian Discriminant Analysis\r\n            SettingThe Gaussian Discriminant Analysis assumes that\r\n            (y) and (x  y = 0) and (x|y = 1) are such that:\r\n            <vue-mathjax\r\n                :formula=\"'$$ y \\\\sim Bernoulli(\\\\phi)   ,   x|y = 0 \\\\sim \\\\mathcal{N(\\\\mu_0,\\\\Sigma)}$$'\"></vue-mathjax>\r\n\r\n        </p>\r\n        <h4>Partial Dependence Plot</h4>\r\n        <p>\r\n            The partial dependence plot (short PDP or PD plot) shows the marginal effect one or two features have on the\r\n            predicted outcome of a machine learning model. A partial dependence plot can show\r\n            whether the relationship between the target and a feature is linear, monotonic or more complex. For example,\r\n            when applied to a linear regression model, partial dependence plots always show a linear relationship.\r\n\r\n            The partial dependence function for regression is defined as:\r\n            <vue-mathjax :formula=\"'$$ f_s(x_s) = \\\\int{f(x_s,x_c)dP(x_c)}$$'\"></vue-mathjax>\r\n            The x<sub>s</sub>\r\n            are the features for which the partial dependence function should be plotted and\r\n            X<sub>c</sub>\r\n            are the other features used in the machine learning model\r\n            ^\r\n            f\r\n            , which are here treated as random variables. Usually, there are only one or two features in the set S. The\r\n            feature(s) in S are those for which we want to know the effect on the prediction. The feature vectors\r\n            X<sub>s</sub>\r\n            and\r\n            X<sub>c</sub>\r\n            combined make up the total feature space x. Partial dependence works by marginalizing the machine learning\r\n            model output over the distribution of the features in set C, so that the function shows the relationship\r\n            between the features in set S we are interested in and the predicted outcome. By marginalizing over the\r\n            other features, we get a function that depends only on features in S, interactions with other features\r\n            included.\r\n\r\n            The partial function\r\n            ^\r\n            f\r\n            S\r\n            is estimated by calculating averages in the training data, also known as Monte Carlo method:\r\n\r\n            <vue-mathjax :formula=\"'$$ f_s(x_s) = \\\\frac{1}{n} \\\\sum_{n = 1}^{n} f(x_s,x_c)$$'\"></vue-mathjax>\r\n\r\n            The partial function tells us for given value(s) of features S what the average marginal effect on the\r\n            prediction is. In this formula,\r\n            x\r\n            (\r\n            i\r\n            )\r\n            C\r\n            are actual feature values from the dataset for the features in which we are not interested, and n is the\r\n            number of instances in the dataset. An assumption of the PDP is that the features in C are not correlated\r\n            with the features in S. If this assumption is violated, the averages calculated for the partial dependence\r\n            plot will include data points that are very unlikely or even impossible (see disadvantages).\r\n\r\n            For classification where the machine learning model outputs probabilities, the partial dependence plot\r\n            displays the probability for a certain class given different values for feature(s) in S. An easy way to deal\r\n            with multiple classes is to draw one line or plot per class.\r\n\r\n            The partial dependence plot is a global method: The method considers all instances and gives a statement\r\n            about the global relationship of a feature with the predicted outcome.\r\n        </p>\r\n        <h4>Categorical features</h4>\r\n        <p>\r\n            So far, we have only considered numerical features. For categorical features, the partial dependence is very\r\n            easy to calculate. For each of the categories, we get a PDP estimate by forcing all data instances to have\r\n            the same category. For example, if we look at the bike rental dataset and are interested in the partial\r\n            dependence plot for the season, we get four numbers, one for each season. To compute the value for summer,\r\n            we replace the season of all data instances with summer and average the predictions.\r\n        </p>\r\n        <h4>Permutation Feature Importance</h4>\r\n        <p>\r\n            Permutation feature importance is a powerful and intuitive method used to evaluate the impact of each\r\n            feature on a machine learning models performance. After a model has been trained, this technique works by\r\n            randomly shuffling the values of one feature at a time in the validation or test dataset. By doing so, the\r\n            relationship between that feature and the target variable is disrupted, while all other features remain\r\n            unchanged. The model is then used to make predictions on this altered dataset, and the drop in performance\r\n            (measured by accuracy, F1 score, RMSE, or any other metric) is recorded. A large drop indicates that the\r\n            feature was important to the models predictions, while a small or no change suggests that the feature had\r\n            little influence. This method is model-agnostic, meaning it can be used with any type of machine learning\r\n            algorithm, from decision trees to neural networks. However, one limitation is that it can be misleading when\r\n            features are highly correlated, as the importance may be shared among multiple features, making individual\r\n            effects harder to isolate.\r\n        </p>\r\n    </section>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'MethodsTabComponent',\r\n    data() {\r\n        return {\r\n            formula: '$$x = {-b \\\\pm \\\\sqrt{b^2-4ac} \\\\over 2a}.$$',\r\n            sserror: '$$ SS_{tot}= \\\\sum_{i=1}^{m} (y_i - \\\\hat{y}_i)^2$$'\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.demo-container {\r\n    text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./methods-tab-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./methods-tab-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./methods-tab-component.vue?vue&type=template&id=57b22cf8\"\nimport script from \"./methods-tab-component.vue?vue&type=script&lang=js\"\nexport * from \"./methods-tab-component.vue?vue&type=script&lang=js\"\nimport style0 from \"./methods-tab-component.vue?vue&type=style&index=0&id=57b22cf8&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const pyodideWorker = new Worker(new URL('./sns-py.js', import.meta.url))\r\n\r\nconst callbacks = {};\r\n\r\npyodideWorker.onmessage = (event) => {\r\n    const { id, ...data } = event.data;\r\n    const onSuccess = callbacks[id];\r\n    delete callbacks[id];\r\n    onSuccess(data);\r\n};\r\n\r\nconst asyncRun = (() => {\r\n    let id = 0; // identify a Promise\r\n    return (script, context) => {\r\n        // the id could be generated more carefully\r\n        id = (id + 1) % Number.MAX_SAFE_INTEGER;\r\n        return new Promise((onSuccess) => {\r\n            callbacks[id] = onSuccess;\r\n            pyodideWorker.postMessage({\r\n                ...context,\r\n                python: script,\r\n                id,\r\n            });\r\n        });\r\n    };\r\n})();\r\n\r\nexport { asyncRun };","import { asyncRun } from \"@/helpers/sns-worker\";\r\n\r\n\r\nexport default class Clustermap {\r\n    constructor() {\r\n        this.model = null;\r\n\r\n    }\r\n    async train(x_train, columns, metric, method) {\r\n        this.context = {\r\n            X_train: x_train,\r\n            columns: columns,\r\n            metric: metric,\r\n            method: method,\r\n        };\r\n        const script = `\r\n        import matplotlib\r\n        matplotlib.use(\"AGG\")\r\n        import matplotlib.pyplot as plt\r\n        from js import X_train,columns,method,metric\r\n        import seaborn as sns\r\n        import pandas as pd\r\n\r\n        sns.set(font_scale=1.5)\r\n        df = pd.DataFrame(X_train,columns = columns)\r\n        plt.figure(figsize=(12, 8))\r\n        plot = sns.clustermap(df.corr(),cmap=\"YlGnBu_r\",annot = True, fmt=\".2f\",method=method,metric=metric)\r\n        reordered_index = plot.dendrogram_row.reordered_ind\r\n        reordered_columns = plot.dendrogram_col.reordered_ind\r\n        clustered_corr = df.corr().iloc[reordered_index, :].iloc[:, reordered_columns]\r\n\r\n        Z = plot.dendrogram_col.linkage  \r\n        Z,clustered_corr.values,clustered_corr.columns.tolist()\r\n        `;\r\n        try {\r\n            const { results, error } = await asyncRun(script, this.context);\r\n            if (results) {\r\n                return results;\r\n            } else if (error) {\r\n                console.log(\"pyodideWorker error: \", error);\r\n            }\r\n        } catch (e) {\r\n            throw Error(`Error in pyodideWorker at ${e.filename}, Line: ${e.lineno}, ${e.message}`,)\r\n\r\n        }\r\n\r\n    }\r\n\r\n}","<template>\r\n    <div class=\"column is-10\">\r\n        <section>\r\n            <b-tabs v-model=\"settings.activeTab\" :position=\"'is-centered'\" :animated=\"false\" type=\"success\"\r\n                @input=\"resize()\">\r\n                <b-tab-item label=\"Data Analysis\" icon=\"search\" icon-pack=\"fas\">\r\n                    <section v-if=\"this.settings.datasetShape?.count > 0\">\r\n                        <div class=\"message is-info\" v-if=\"isActive\" :closable=\"false\">\r\n                            <div class=\"message-header p-2\">Data summary</div>\r\n                            <div class=\"message-body\">\r\n                                <div class=\"columns is-multiline\">\r\n                                    <div class=\"column is-12 has-text-left\">\r\n                                        <p class=\"title is-6 m-0 mb-1\"> Data Shape: ({{\r\n                                            this.settings.datasetShape.count }},{{\r\n                                                this.settings.datasetShape.columns\r\n                                            }})</p>\r\n                                    </div>\r\n                                    <div class=\"column is-6\">\r\n                                        <h5 class=\"title is-6 has-text-left m-0 mb-1\">Numerical Features:\r\n                                        </h5>\r\n                                        <div class=\"table-container\">\r\n\r\n                                            <table class=\"table is-size-7\">\r\n                                                <thead>\r\n                                                    <tr>\r\n                                                        <th class=\"is-success\"></th>\r\n                                                        <th class=\"is-success\">Name</th>\r\n                                                        <th class=\"is-success\">Min</th>\r\n                                                        <th class=\"is-success\">Max</th>\r\n                                                        <th class=\"is-success\">Mean</th>\r\n                                                        <th class=\"is-success\">Median</th>\r\n                                                        <th class=\"is-success\">st.d</th>\r\n                                                        <th class=\"is-success\">#NAs</th>\r\n                                                        <th class=\"is-success\">Type</th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    <tr v-for=\"feature in continuousFeaturesStats\" :key=\"feature.name\">\r\n                                                        <td> <b-checkbox v-model=\"feature.selected\"></b-checkbox>\r\n                                                        </td>\r\n                                                        <td>{{ feature.name }}</td>\r\n                                                        <td>{{ feature.min }}</td>\r\n                                                        <td>{{ feature.max }}</td>\r\n                                                        <td>{{ feature.median }}</td>\r\n                                                        <td>{{ feature.mean }}</td>\r\n                                                        <td>{{ feature.std }}</td>\r\n                                                        <td>{{ feature.missingValuesCount }}</td>\r\n                                                        <td> <b-select :expanded=\"true\" v-model=\"feature.type\"\r\n                                                                size=\"is-small\">\r\n                                                                <option v-for=\"option in featureTypeOptions\"\r\n                                                                    :value=\"option.id\" :key=\"option.id\">\r\n                                                                    {{ option.name }}\r\n                                                                </option>\r\n                                                            </b-select></td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </table>\r\n                                        </div>\r\n                                        <button class=\"button is-small is-info\" @click=\"applyChanges()\">Apply\r\n                                            changes</button>\r\n                                    </div>\r\n                                    <div class=\"column is-6\">\r\n                                        <h5 class=\"title is-6 has-text-left m-0 mb-1\">Categorical\r\n                                            Features(Nominal/Ordinal):</h5>\r\n                                        <div class=\"table-container\">\r\n\r\n                                            <table class=\"table is-size-7 mb-1\">\r\n                                                <thead>\r\n                                                    <tr>\r\n                                                        <th class=\"is-success\"></th>\r\n                                                        <th class=\"is-success\">Name</th>\r\n                                                        <th class=\"is-success\">Shape</th>\r\n                                                        <th class=\"is-success\">Mode</th>\r\n                                                        <th class=\"is-success\">Mode percentage</th>\r\n                                                        <th class=\"is-success\">#NAs</th>\r\n                                                        <th class=\"is-success\">Type</th>\r\n                                                    </tr>\r\n                                                </thead>\r\n                                                <tbody>\r\n                                                    <tr v-for=\"feature in categoricalFeaturesStats\" :key=\"feature.name\">\r\n                                                        <td> <b-checkbox v-model=\"feature.selected\"></b-checkbox>\r\n                                                        </td>\r\n                                                        <td>{{ feature.name }}</td>\r\n                                                        <td>{{ feature.shape }}</td>\r\n                                                        <td>{{ feature.mode }}</td>\r\n                                                        <td>{{ feature.percentage }}</td>\r\n                                                        <td>{{ feature.missingValuesCount }}</td>\r\n\r\n                                                        <td> <b-select :expanded=\"true\" v-model=\"feature.type\"\r\n                                                                size=\"is-small\">\r\n                                                                <option v-for=\"option in featureTypeOptions\"\r\n                                                                    :value=\"option.id\" :key=\"option.id\">\r\n                                                                    {{ option.name }}\r\n                                                                </option>\r\n                                                            </b-select></td>\r\n                                                    </tr>\r\n                                                </tbody>\r\n                                            </table>\r\n                                            <p class=\"subtitle is-7 m-0 p-0\"> Nominal features are one hot encoded and\r\n                                                ordinal\r\n                                                features are encoded in one column.</p>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    <div class=\"column is-6\">\r\n                                        <h5 class=\"title is-6 has-text-left\">Sample Data :</h5>\r\n                                        <b-table class=\"is-size-7 m-0 mb-1\" :data=\"sampleData\" :columns=\"datasetColumns\"\r\n                                            :narrowed=\"true\" :bordered=\"true\" :striped=\"true\"\r\n                                            :hoverable=\"true\"></b-table>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <section>\r\n                            <scatterplot-matrix-component ref=\"splom\"></scatterplot-matrix-component>\r\n\r\n                        </section>\r\n                        <section>\r\n                            <article class=\"message is-info mt-2\">\r\n                                <div class=\"message-header p-2\">Correlation Matrix and Dendrogram\r\n                                    <b-tooltip append-to-body label=\"Ward method requires euclidean distance\"\r\n                                        multilined>\r\n                                        <b-button icon-left=\"info\" icon-pack=\"fas\" size=\"is-small\" type=\"is-dark\" />\r\n                                    </b-tooltip>\r\n                                </div>\r\n                                <div class=\"message-body\">\r\n                                    <div class=\"columns is-gapless\">\r\n                                        <div class=\"column is-6 mx-1\"></div>\r\n                                        <div class=\"column is-6 mx-1\">\r\n                                            <b-field label=\"Linkage method, Distance Metric\" custom-class=\"is-small\">\r\n                                                <b-select size=\"is-small\" placeholder=\"Method\" v-model=\"method\">\r\n                                                    <option value=\"single\">single</option>\r\n                                                    <option value=\"complete\">complete</option>\r\n                                                    <option value=\"average\">average</option>\r\n                                                    <option value=\"weighted\">weighted</option>\r\n                                                    <option value=\"centroid\">centroid</option>\r\n                                                    <option value=\"median\">median</option>\r\n                                                    <option value=\"ward\">ward</option>\r\n                                                </b-select>\r\n                                                <b-select size=\"is-small\" placeholder=\"Metric\" v-model=\"metric\">\r\n                                                    <option value=\"euclidean\">euclidean</option>\r\n                                                    <option value=\"correlation\">correlation</option>\r\n                                                    <option value=\"mahalanobis\">mahalanobis</option>\r\n                                                    <option value=\"cosine\">cosine</option>\r\n                                                </b-select>\r\n                                                <p class=\"control\">\r\n                                                    <b-button class=\"is-success is-small\" @click=\"correlationMatrix\"\r\n                                                        :disabled=\"loading\" :loading=\"loading\">Correlation\r\n                                                        Cluster Diagram</b-button>\r\n                                                </p>\r\n                                            </b-field>\r\n\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                    <div class=\"columns is-multiline is-centered mb-2 p-0 is-gapless\">\r\n                                        <div class=\"column is-6\" id=\"correlation_matrix\" style=\"height: 400px;\"></div>\r\n                                        <div class=\"column is-6\" id=\"correlation_matrix_ordered\" style=\"height: 400px;\">\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </article>\r\n                        </section>\r\n                    </section>\r\n                    <section v-else>\r\n                        <b-message type=\"is-danger\" has-icon icon-pack=\"fas\">\r\n                            Upload a dataset or select a sample from sidebar.\r\n                        </b-message>\r\n                    </section>\r\n\r\n                </b-tab-item>\r\n\r\n                <b-tab-item label=\"Dimensionality Reduction\" icon=\"compress-arrows-alt\" icon-pack=\"fas\">\r\n                    <dmensionality-reduction-component :dataframe=\"this.settings.df\"\r\n                        :columns=\"selectedFeatures\"></dmensionality-reduction-component>\r\n                </b-tab-item>\r\n                <b-tab-item label=\"Results Analysis\" icon=\"chart-pie\" icon-pack=\"fas\">\r\n                    <results-component ref=\"results\"></results-component>\r\n                </b-tab-item>\r\n                <b-tab-item label=\"Methods Details\" icon=\"list\" icon-pack=\"fas\">\r\n                    <methods-tab-component></methods-tab-component>\r\n                </b-tab-item>\r\n                <b-tab-item label=\"Help\" icon=\"question\" icon-pack=\"fas\">\r\n                    <div class=\"content has-text-left\">\r\n                        <h4>1. Dataset Selection</h4>\r\n                        <p>\r\n                            To begin, you can either select a sample dataset provided by the system or upload your own\r\n                            dataset. The supported file formats for datasets include .xlsx (Excel files), .csv (Comma\r\n                            Separated Values files), and .txt (plain text files). Ensure that your file is in one of\r\n                            these formats to avoid any issues during the upload process.\r\n                        </p>\r\n                        <figure>\r\n                            <img src=\"/upload.png\" />\r\n                            <figcaption>Figure 1: Dataset Selection</figcaption>\r\n                        </figure>\r\n                        <h4>2. Data Analysis</h4>\r\n                        <figure>\r\n                            <img src=\"/stats_categorical.jpg\" />\r\n                            <figcaption>Figure 2: Categorical features stats</figcaption>\r\n                        </figure>\r\n                        <p>\r\n                            After uploading the dataset an overview of the dataset would be shhown in the Data Analysis\r\n                            tab. In the first\r\n                            window we provide you witth statistical metrics of the dataset. for canotinious features we\r\n                            show the mean, std, min, max, and etc.\r\n\r\n                            In case of categorical features information such as shape, mode and percentages of smaples\r\n                            with modes option, and number of missing values.\r\n                        </p>\r\n\r\n                        <figure>\r\n                            <img src=\"/stats_continious.jpg\" />\r\n                            <figcaption>Figure 3: Categorical features stats</figcaption>\r\n                        </figure>\r\n                        <p>\r\n                            In case of categorical features information such as shape, mode and percentages of smaples\r\n                            with modes option, and number of missing values.\r\n                        </p>\r\n                        <h4>3. Feature selection</h4>\r\n                        <p>\r\n                            After uploading the dataset, you can customize the data by selecting specific features based\r\n                            on your requirements. To do this, click on the 'Select Features' button, which will open a\r\n                            new menu. This menu allows you to choose the features that will be used in the training\r\n                            process. If there is an issue with the automatic detection of feature data types, you can\r\n                            manually adjust the data types to ensure they are correctly categorized as ordinal,\r\n                            categorical, or continuous.\r\n                        </p>\r\n                        <h4>3. Model Selection</h4>\r\n                        <figure>\r\n                            <img src=\"/model_selection.jpg\" />\r\n                            <figcaption>Figure 4: Model selection and setting for knn</figcaption>\r\n                        </figure>\r\n                        <p>\r\n                            Once you have selected all the required features and resolved any issues with feature data\r\n                            types, you can proceed to the model selection step. Use the 'Model' dropdown to\r\n                            choose the model for training. The options in this dropdown will be dynamically populated\r\n                            based on the type of data in your features: regression models will be available for\r\n                            continuous data, while classification models will be shown for categorical data.\r\n                            Additionally, you can further customize the selected model by clicking the gear icon, which\r\n                            allows you to adjust common settings and parameters specific to each model.\r\n                        </p>\r\n                    </div>\r\n                </b-tab-item>\r\n                <b-tab-item label=\"Messages Log\" icon=\"history\" icon-pack=\"fas\">\r\n                    <b-notification aria-close-label=\"Close notification\" icon-pack=\"fas\"\r\n                        :type=\"m.type == 'warning' ? 'is-warning' : m.type == 'danger' ? 'is-danger' : 'is-info'\"\r\n                        has-icon :closable=\"false\" v-for=\"(m, i) in this.settings.getMessages\" :key=\"i\">\r\n                        {{ m.message?.toLowerCase() }}\r\n                        <br>\r\n                        {{ m.date }}\r\n\r\n                    </b-notification>\r\n                </b-tab-item>\r\n            </b-tabs>\r\n        </section>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport UI from '@/helpers/ui';\r\nimport PCAComponent from './tabs/dmensionality-reduction-componenet.vue'\r\nimport ResultsComponent from './tabs/results-component.vue'\r\nimport SPLOMComponent from './visualization/scatterplot-matrix-component.vue'\r\nimport MethodsTabComponent from './tabs/methods-tab-component.vue'\r\n\r\nimport { FeatureCategories } from '../helpers/settings'\r\nimport ChartController from '@/helpers/charts';\r\nimport { settingStore } from '@/stores/settings'\r\nimport { Matrix, correlation } from 'ml-matrix';\r\n// eslint-disable-next-line no-unused-vars\r\nimport Clustermap from '@/helpers/correlation/correlation-matrix'\r\nimport { DataFrame,toJSON } from 'danfojs';\r\n\r\nlet ui = new UI(null, null);\r\nlet chartController = new ChartController(null, null)\r\n\r\nexport default {\r\n    name: 'MainComponent',\r\n    components: {\r\n        'dmensionality-reduction-component': PCAComponent,\r\n        'results-component': ResultsComponent,\r\n        'scatterplot-matrix-component': SPLOMComponent,\r\n        'methods-tab-component': MethodsTabComponent\r\n    },\r\n    setup() {\r\n        const settings = settingStore()\r\n        return { settings }\r\n    },\r\n    props: {\r\n        msg: String,\r\n        selectedFeatures: [],\r\n    },\r\n    errorCaptured(err, vm, info) {\r\n        console.log(`cat EC: ${err.toString()}\\ninfo: ${info}`);\r\n        let message = { message: 'Encountered unexpected error', type: 'warning' }\r\n        this.$buefy.toast.open({ message: 'Encountered unexpected error', type: 'is-warning' })\r\n        this.settings.addMessage(message)\r\n        return false;\r\n    },\r\n    data() {\r\n        return {\r\n            featureTypeOptions: FeatureCategories,\r\n            checkedRows: [],\r\n            metric: 'euclidean',\r\n            method: 'ward',\r\n            img: null,\r\n            continuousFeaturesStats: [\r\n            ],\r\n            continuousFeaturesColumns: [\r\n            ],\r\n            categoricalFeaturesStats: [\r\n            ],\r\n            categoricalFeaturesColumns: [\r\n            ],\r\n            sampleData: [\r\n            ],\r\n            datasetColumns: [\r\n            ],\r\n\r\n            isActive: true,\r\n            hasCorrelationMatrix: false,\r\n            loading: false\r\n        }\r\n    },\r\n    methods: {\r\n\r\n        resize() {\r\n            window.dispatchEvent(new Event('resize'));\r\n        },\r\n        async correlationMatrix() {\r\n            this.loading = true;\r\n            try {\r\n                let numericColumns = this.settings.items.filter(m => m.selected && m.type === FeatureCategories.Numerical.id).map(m => m.name);\r\n                let values = this.settings.df.loc({ columns: numericColumns })\r\n                values = values.dropNa({ axis: 1 }).values\r\n                let matrix = new Matrix(values)\r\n                let correlations = correlation(matrix)\r\n                this.hasCorrelationMatrix = true;\r\n                await chartController.correlationHeatmap('correlation_matrix', correlations.data, numericColumns);\r\n                let mtx = new Clustermap();\r\n                let [dendogram, orderedMatrix, columns] = await mtx.train(values, numericColumns, this.metric, this.method);\r\n                await chartController.dendogramPlot('correlation_matrix_ordered', orderedMatrix, dendogram, columns, numericColumns);\r\n                this.loading = false;\r\n                setTimeout(() => {\r\n                    window.dispatchEvent(new Event('resize'));\r\n                }, 500);\r\n            } catch (error) {\r\n                this.loading = false;\r\n                throw error\r\n            }\r\n        },\r\n        applyChanges() {\r\n            this.renderStats(true)\r\n        },\r\n        renderStats(update = false) {\r\n            if (this.settings.df?.columns?.length > 0) {\r\n                let numericColumns, categoricalColumns;\r\n                if (!update) {\r\n                    numericColumns = this.settings.items.filter(m => m?.type === FeatureCategories.Numerical.id).map(function (m) {\r\n                        return {\r\n                            name: m.name,\r\n                            selected: true\r\n                        }\r\n                    });\r\n                    categoricalColumns = this.settings.items.filter(m => m?.type !== FeatureCategories.Numerical.id).map(function (m) {\r\n                        return {\r\n                            name: m.name,\r\n                            selected: true\r\n                        }\r\n                    });\r\n                } else {\r\n                    console.log(this.continuousFeaturesStats);\r\n                    let features = this.continuousFeaturesStats.concat(this.categoricalFeaturesStats)\r\n                    numericColumns = features.filter(m => m?.type === FeatureCategories.Numerical.id).map(function (m) {\r\n                        return {\r\n                            name: m.name,\r\n                            selected: m.selected,\r\n                            scaler: m.sclaer ?? 0\r\n                        }\r\n                    });\r\n                    categoricalColumns = features.filter(m => m?.type\r\n                        === FeatureCategories.Nominal.id\r\n                        || m?.type === FeatureCategories.Ordinal.id).map(function (m) {\r\n                            return {\r\n                                name: m.name,\r\n                                selected: m.selected\r\n                            }\r\n                        });\r\n\r\n                    let selectedFeatures = features;\r\n                    for (let i = 0; i < selectedFeatures.length; i++) {\r\n                        this.settings.addFeature(selectedFeatures[i])\r\n                    }\r\n                    this.$emit('check-target')\r\n\r\n                }\r\n\r\n\r\n                let df = new DataFrame(this.settings.rawData);\r\n                let datasetStats = ui.renderDatasetStats(df, numericColumns, categoricalColumns);\r\n                this.continuousFeaturesColumns = datasetStats[0];\r\n                this.continuousFeaturesStats = datasetStats[1];\r\n                this.categoricalFeaturesColumns = datasetStats[2];\r\n                this.categoricalFeaturesStats = datasetStats[3];\r\n                this.datasetColumns = this.settings.df.columns.map(column => {\r\n                    return {\r\n                        field: column,\r\n                        label: column\r\n\r\n                    }\r\n                });\r\n                this.sampleData = toJSON(this.settings.df.head(5));\r\n                this.$refs.splom?.initSPLOM();\r\n                setTimeout(() => {\r\n                    this.correlationMatrix();\r\n                }, 500);\r\n            }\r\n        },\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style></style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./main-component.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./main-component.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./main-component.vue?vue&type=template&id=331babea\"\nimport script from \"./main-component.vue?vue&type=script&lang=js\"\nexport * from \"./main-component.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\r\n  <div class=\"container\">\r\n    <b-notification v-show=\"this.settings.getDatasizeFlag\" class=\"mt-2\" type=\"is-warning\" has-icon\r\n      aria-close-label=\"Close notification\" role=\"alert\">\r\n      Due to the large size of dataset only 10,000 radom samples from dataset would be used.\r\n    </b-notification>\r\n    <div class=\"columns is-multiline\" id=\"app\">\r\n      <SidebarComponent ref=\"sidebar\" @updateFeatures=\"updateFeatureStats\">\r\n      </SidebarComponent>\r\n      <MainComponent ref=\"main\" :dataframe=\"this.settings.df\" @check-target=\"checkTarget()\"></MainComponent>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport SidebarComponent from \"./components/sidebar-component.vue\";\r\nimport MainComponent from \"./components/main-component.vue\";\r\nimport { settingStore } from '@/stores/settings'\r\n\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    SidebarComponent,\r\n    MainComponent,\r\n  },\r\n  setup() {\r\n    // eslint-disable-next-line no-unused-vars\r\n    const settings = settingStore()\r\n    return { settings }\r\n  },\r\n  errorCaptured(err, vm, info) {\r\n    console.log(`cat EC: ${err.toString()}\\ninfo: ${info} + ${ err.stack}`);\r\n\r\n    this.$buefy.toast.open(\r\n      {\r\n        duration: 3000,\r\n        message: 'Something went wrong',\r\n        type: 'is-danger',\r\n      })\r\n    this.settings.addMessage({ message: err.toString(), type: 'danger' })\r\n    return false;\r\n  },\r\n  data() {\r\n    return {\r\n      dataframe: null,\r\n      selectedFeatures: []\r\n    }\r\n  },\r\n  methods: {\r\n    checkTarget() {\r\n      this.$refs.sidebar.checkmodelTask()\r\n    },\r\n    reset() {\r\n      this.settings.resetDF();\r\n    },\r\n    updateFeatureStats() {\r\n      this.$refs.main.renderStats();\r\n    },\r\n    setSelectedFeatures(e) {\r\n      this.selectedFeatures = e\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  color: #2c3e50;\r\n  margin-top: 30px;\r\n}\r\n\r\n.notification.is-danger {\r\n  background-color: hsl(348, 86%, 61%);\r\n  color: #fff !important;\r\n}\r\n\r\n.button.is-danger {\r\n  color: #fff !important;\r\n}\r\n\r\n.toast.is-danger {\r\n  color: #fff !important;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=78c9a5f2\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=78c9a5f2&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport Buefy from 'buefy'\r\nimport 'buefy/dist/buefy.min.css'\r\n\r\nimport { createPinia, PiniaVuePlugin } from 'pinia'\r\nimport VueMathjax from 'vue-mathjax'\r\n\r\nVue.prototype.window = window;\r\n\r\nVue.use(VueMathjax)\r\nVue.use(Buefy)\r\nVue.use(PiniaVuePlugin)\r\nconst pinia = createPinia()\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n  pinia\r\n}).$mount('#app')\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + chunkId + \".\" + {\"167\":\"dfe48028\",\"221\":\"68b5ace3\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmlfit\"] = self[\"webpackChunkmlfit\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(2921); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","id","module","exports","render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","settings","getDatasizeFlag","expression","attrs","_v","ref","on","updateFeatureStats","df","$event","checkTarget","staticRenderFns","staticStyle","_m","generateTargetDropdown","setFile","model","seed","callback","$$v","checkmodelTask","modelTarget","_l","columns","option","key","domProps","_s","imputationOption","imputationOptions","label","crossValidationOption","crossValidationOptions","tuneModel","modelOption","modelOptions","title","configureModel","modelConfigurations","i","type","$set","values","item","index","_e","dataScalingBehavior","explainModel","usePCAs","numberOfComponents","useHPC","training","dataframe","train","upload","class","file","datasetName","header","separator","separatorOptions","decimal","decimalOptions","handleFileSelect","sampleDataset","samplDataOptions","DataParser","parse","_content","CSVParser","constructor","options","super","separators","delimiter","has_header","content","Promise","Papa","worker","transform","val","NaN","skipEmptyLines","dynamicTyping","complete","async","result","data","TXTParser","length","element","j","parseFloat","replace","ParserFactory","createParser","fileType","toLowerCase","parser","settingStore","defineStore","state","counter","rawData","features","transformations","classTransformations","results","messages","activeTab","dataSizeFlag","resultActiveTab","datasetShape","count","target","isClassification","getters","items","getCounter","getUID","Math","random","toString","slice","getMessages","reverse","getDatasetName","getDatasetShape","getDataset","getRawData","currentTab","mergedClasses","getSeed","getMethodResults","getResultTab","outputs","transformationsList","classificationTask","actions","setSeed","setDatasetName","setDatasetShape","shape","resetFeatures","resetClassTransformations","resetTransformations","setDatasizeFlag","flag","resetDataset","increaseCounter","setDataframe","setRawData","addFeature","feature","scaler","findIndex","m","push","setClassTransformation","addTransformation","transformation","addResult","addMessage","message","date","Date","toLocaleString","removeResult","splice","getResultVisualizations","tables","plots","resetDF","updateFeature","removeItem","lastIndexOf","setTarget","setmodelTask","setActiveTab","setResultActiveTab","DATASET_SIZE","setup","props","msg","String","watch","dataset","process_file","split","initDataframe","error","$buefy","toast","open","methods","shuffle","array","t","floor","x","sin","$data","sample","$emit","processdDataset","dataFrame","DataFrame","idIndex","col","drop","inplace","current","fetch","then","response","blob","File","catch","console","component","FeatureCategories","CV_OPTIONS","SPLIT","NO","KFOLD","ScaleOptions","Settings","default","placeholder","for","pyodideWorker","Worker","URL","callbacks","onmessage","event","onSuccess","asyncRun","script","context","Number","MAX_SAFE_INTEGER","postMessage","python","PCA","predict","n","x_test","x_train","has_test_set","binarize","y","threshold","tf","util","assert","tidy","condition","greater","scalar","where","onesLike","zerosLike","encode_name","str_encoded","metrics","y_pred","labels","precision","recall","f1_micro","f1_macro","accuracy","calculateRSquared","actual","predicted","meanActual","mean_array","totalSumOfSquares","reduce","acc","pow","residualSumOfSquares","calculateMSE","actualValues","predictedValues","sumSquaredError","squaredError","meanSquaredError","scale_data","column","normalization_type","MinMaxScaler","fit","addColumn","apply","ln","log","isNaN","StandardScaler","applyDataTransformation","column_names","find","handle_missing_values","data_frame","impute","string_columns","numeric_columns","string_column_modes","numeric_column_means","forEach","dtype","mode","getCategoricalMode","mean","fillNa","dropNa","axis","arr","categoryCount","category","undefined","modeCategory","modeCount","encode_dataset","columns_types","copy","categorical_columns","filter","Nominal","Ordinal","categoriclaFeaturesAfterEncoding","encoder","LabelEncoder","encoded_column","getDummies","includes","TSNE","plotlyImageExportConfig","toImageButtonOptions","format","height","width","scale","ChartController","_defineProperty","gaussian","u","exp","sqrt","PI","uniform","abs","triangular","biweight","triweight","Epanechnikov","color_scheme","schemeTableau10","color_scheme_sequential","interpolateRainbow","classification_target_chart","container","uniqueLabels","Set","colorIndices","map","indexToColor","indexOf","color","Highcharts","chart","credits","enabled","text","xAxis","categories","yAxis","min","plotOptions","pointPadding","borderWidth","colors","series","regression_target_chart","kde_data","ys","items_range","breaks","equalIntervalBreaks","kde","kernelDensityEstimation","legend","verticalAlign","animation","tooltip","valueDecimals","marker","dashStyle","area","lineWidth","draw_categorical_barplot","column_values","$","append","countOccurrences","countArray","Object","entries","sort","a","b","top5","Chart","renderTo","overflow","bar","dataLabels","showInLegend","roc_chart","true_positive_rates","false_positive_rates","trace","trace2","layout","showlegend","xaxis","yaxis","Plotly","newPlot","falsePositives","yTrue","yPred","one","zero","logicalAnd","equal","sum","cast","max","indexToColorSequential","normalizer_value","reshape","size","restShape","restSize","plot_tsne","is_classification","flat","tsne","Y","tsneComponents","tsne_traces","l","spacing","font","xref","boxmode","grid","rows","xgap","ygap","pattern","margin","r","xAxisKey","yAxisKey","fontSize","linecolor","linewidth","mirror","showgrid","showticklabels","tickfont","react","staticPlot","trueNegatives","falsePositiveRate","fp","tn","div","add","drawROC","targets","probs","thresholds","tprs","fprs","threshPredictions","as1D","fpr","dataSync","tpr","nrd","s","standardDeviation","iqr","interquartileRange","hexToRgb","hex","exec","parseInt","g","draw_kde","target_name","bandwidth","redrawing","default_bandwidth","toFixed","raw_values","loc","subsets","subset","document","getElementById","style","display","newColumn","createElement","className","setAttribute","addEventListener","Numerical","newBandwidth","current_class","container_id","allData","kernel_type","traces","kernelFunctions","animationDuration","visible","xanchor","autosize","responsive","modeBarButtonsToRemove","align","duration","window","dispatchEvent","Event","downloadPlot","toImage","dataUrl","href","download","body","appendChild","click","removeChild","classificationPCA","missclassifications","pca","pca_data","x_error","y_error","error_texts","real_labels","missclassificationColors","truePredsColors","join","trace1","symbol","customdata","hovertemplate","hovermode","hoverlabel","bgcolor","purge_charts","purge","draw_pca","axes","drawScreePlot","_","explained_variances","circels","distances","pcaComponents","pca_traces","principle_components","pca_values","arrows","shapes","distance","axref","ayref","arrowside","arrowcolor","yanchor","arrowwidth","arrowhead","hovertext","ax","ay","yref","x0","y0","x1","y1","line","annotations","pad","range","cumulatedExplainedVaraince","compnentsaxis","trace3","traceorder","orientation","dash","tickmode","dtick","zeroline","rang","Array","from","drawStackedHorizontalChart","lable","barmode","regularization_plot","xs","colorway","argmax","maxIndex","currentValue","currentIndex","probabilities_boxplot","probablitiesFormatted","true_label","trueClass","classProbas","proba","prob","probablity","classIndex","outlierwidth","plotConfusionMatrix","predictedLabels","uniqueClasses","tab_index","confusionMatrix","metric","ClassificationMetric","arraySync","f1Micro","f1Macro","len","preceissions","recalls","tensorflow","dispose","metric_labels","items_labels","formatted_matrix","exporting","plotBorderWidth","linkedTo","opposite","tickLength","formatter","each","p","reversed","endOnTick","colorAxis","minColor","maxColor","getOptions","symbolHeight","useHTML","totalCount","cur","point","skip","percentage","rules","maxWidth","chartOptions","padding","plot_regularization","weights","alphas","names","serieses","alphas_formatted","connectorAllowed","yhat_plot","y_test","predictions","comparison","yLabel","tickangle","residual_plot","residuals","ScatterplotMatrix","number_of_categoricals","reject","setTimeout","unique_labels","k","set","z","opacity","unique_labels_feature","lablel_items","counts","ii","fill","column_items","unique_classes","class_frequencies","class_label","colorscale","boxplot_labels","boxtraces","box_items","concat","arr1","arr2","corrcoeff","textfont","KNNPerformancePlot","best_n","KNNPerformancePlotRegression","optimalTrainSpec","optimalTestSpec","evaluation","evaluation_train","min_y","POSITIVE_INFINITY","max_y","NEGATIVE_INFINITY","correaltoinMatrixColorscale","correlations","featuresCount","corrs","countNegatives","portionOfNegativeValues","round","correlationHeatmap","zmin","zmax","hoverongaps","showscale","ticks","side","autorange","ticksuffix","textColor","family","showarrow","dendogramPlot","linkage","originalColumns","trace4","colorbar","thickness","indices","linksLength","currentLimitY","prevLimitY","clusterY","clusterX","tickValues","dendrogramUP","dendrogramRIGHT","history","link","l0","l1","y_current","prev","curr","currentLimitX","prevLimitX","layout2","domain","showline","tickvals","tick","ticktext","xaxis2","yaxis2","coloraxis","cmin","cmax","PFIBoxplot","importances","avgs","importance","importancesMean","automargin","plotPDP","averages","grids","pfiChartId","chartContainer","classList","chartId","after","isCategorical","average","plotPDPRegression","categoricals","chartIdCategorical","traces_categoricals","bargap","drawAutoencoder","points","xIndex","yIndex","plotROC","auc","uniformSplist","numbers","parallelCoordinatePlot","labelEncoder","colorMapping","dimensions","column_name","UI","chart_controller","data_parser","get_model_settings","model_settings","model_name","classification","regression","option_value","createAlgorithmsSelect","hasOwnProperty","call","updateAlgorithmsSelect","find_selected_columns","get_all","selected_columns","checked","find_selected_columns_types","include_target","column_types","createTargetDropdown","createFeaturesDropdown","insertSpaces","string","renderDatasetStats","continuousFeatures","categoricalFeatures","continuousFeaturesStats","categoricalFeaturesStats","continuousHeaders","field","categoricalHeaders","median","std","missingValuesCount","isNa","selected","category_info","get_numeric_columns","selected_columns_types","numericColumns","get_categorical_columns","visualize","file_name","filterd_dataset","limit","innerHTML","toggle_loading_progress","show","init_tooltips","tippy","interactive","popperOptions","positionFixed","allowHTML","predictions_table_regression","table_columns","DataTable","pageLength","paging","columnDefs","bPaginate","bDestroy","removeTable","tableId","destroy","predictions_table","rowCallback","row","prediction","addClass","ClassificationModel","chartController","ui","task","hasProbability","hasExplaination","helpSectionId","evaluateModel","generatePythonCode","model_import","model_fit","trim","classes","$labels","tensor","inverseTransform","LogisticRegression","summary","model_stats_matrix","y_train","X_train","X_test","regularization_type","regularization","webR","webr","init","installPackages","quiet","objs","globalEnv","bind","plotlyData","evalR","toArray","JSON","coefs","stds","z_scores","p_values","probabities","pred","confidence_intervals","confidence_intervals_row_names","aic","toNumber","best_fit_min","best_fit_1se","lambda_min","lambda_1se","cols","unshift","min_ols_columns","se_ols_columns","coef","pval","placeholder_row","start","end","api","footer","html","info","search","ordering","searching","y_classes","conf_intervals","traces_params","ols_y","error_x","y_classes_min","conf_intervals_min","lasso_y","_1se_y","y_classes_1se","conf_intervals_1se","lambda","params","predictor","param","coefficient","lambdas","textangle","RegressionModel","mse","rsquared","LinearRegression","bse","pvalues","predictions1se","predictionsmin","residuals_ols","residuals_1se","residuals_min","bic","r2","reg_plot","coefs_plot","errors_plot","qqplot_ols_plot","qqplot_1se_plot","qqplot_min_plot","td","cellData","rowData","css","BSplineRegression","knots","explain","degree","pdp_averages","pdp_grid","filename","lineno","SupportVectorMachine","opt","kernel","bias","c","__","pdpIndex","SupportVectorMachineRegression","chartControler","gamma","KNNModel","k_neighbor_results","KNNRegressor","RandomForest","rf_type","criteria","max_features","num_estimators","estimators","max_depth","depth","num_classes","probas","RandomForestRegressor","NaiveBayes","nb_type","priors","smoothing","laplace","DiscriminantAnalysis","lda_type","PolynomialRegression","columnNames","KernelRegression","types","Boosting","booster","objective","eta","BoostingRegression","ModelFactory","createModel","modelName","logistic_regression","k_nearest_neighbour","random_forest","support_vector_machine","boosting","discriminant_analysis","naive_bayes","linear_regression","polynomial_regression","kernel_regression","bspline_regression","components","UploadComponent","configureFeatures","featureTypeOptions","featureSettings","modelSettings","formdata","FormData","axios","post","headers","updateFeatures","toggleTraining","getDefaultModelConfiguration","dtypes","selectedFeatures","targetFeature","selectedClasses","newClass","cls","cross_validation_setting","splitData","performances","kfoldSplit","encoded_y","encoded_y_test","encodeTarget","model_factory","pca_train","___","____","pca_test","showProbas","snapshot","xt","yt","xFeatures","modelTask","stringify","toJSON","res","created","stepSize","ceil","train_bound","test_bound","iloc","fold","lowerLimit","upperLimit","train_bound_lower","train_bound_upper","x_train_upper","y_train_upper","x_train_lower","y_train_lower","dfList","resize","isActive","applyChanges","sampleData","datasetColumns","method","loading","correlationMatrix","loadingPCA","drawPCA","pcaVarianceData","downloadExplainedVariance","hasPCA","findPCA","pcaData","downloadPCA","downloadPCAPlot","componentsTSNE","seedTSNE","loadingTSNE","findTSNE","hiddenLayerSize","autoEncoderX","autoEncoderY","iterations","encoderActivationFunction","decoderActivationFunction","loadingAutoEncoder","autoEncoder","pcaContainers","prepareData","drawExplainedVariance","toCSV","filePath","varianceData","Components","ExplainedVariace","sequential","unitsLength","layers","dense","units","batchInputShape","activation","kernelInitializer","biasInitializer","decoder","compile","optimizer","loss","tensor2d","epochs","batchSize","validationSplit","tidyWrapper","ret","autoencoderPredictions","errorCaptured","activeResult","compareResultsDraw","metricsCollection","compare","deleteResult","scalerLabel","deleteTab","toggleHelp","downloadPythonCode","hide","if","pdpFeature","fileName","showResult","intervalId","jobProgressTries","vm","Blob","get","setInterval","pdp_avgs","pfi","clearInterval","err","el","scrollIntoView","behavior","pyCode","url","createObjectURL","revokeObjectURL","updatePartialDependencePlot","handler","immediate","unmounted","ClassificationViewComponent","RegressionViewComponent","computed","isClassication","comparisonMetric","baseMetrics","visitedTabs","xTicks","fillMetrics","compareResults","methodResults","draw","v","table","plot","showMethodDetails","alert","downlaodSPLOM","column_width","scaleData","classesInfo","classesInfoColumns","row-class","isLoading","update","ParallelCoordinatePlot","validTransformations","PCPComponent","updateClassesInfo","targetValues","samplesLength","dispalySPLOM","$refs","coordinate_plot","reset","transformationInfo","initSPLOM","formula","sserror","Clustermap","PCAComponent","ResultsComponent","SPLOMComponent","MethodsTabComponent","checkedRows","img","continuousFeaturesColumns","categoricalFeaturesColumns","hasCorrelationMatrix","matrix","Matrix","correlation","mtx","dendogram","orderedMatrix","renderStats","categoricalColumns","sclaer","datasetStats","head","splom","SidebarComponent","MainComponent","stack","sidebar","main","setSelectedFeatures","Vue","prototype","use","VueMathjax","Buefy","PiniaVuePlugin","pinia","createPinia","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","amdD","amdO","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","getter","__esModule","d","definition","o","defineProperty","enumerable","chunkId","globalThis","Function","obj","prop","Symbol","toStringTag","nmd","paths","children","baseURI","self","location","installedChunks","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}